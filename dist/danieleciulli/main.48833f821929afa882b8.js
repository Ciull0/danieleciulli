(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=Object(r.g)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=Object(r.e)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(a,s),a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=Object(r.g)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a});var i="8.6.8";r.a.registerVersion("firebase",i,"app"),r.a.SDK_VERSION=i},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("z6cu");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return Ke}),n.d(e,"b",function(){return $s}),n.d(e,"c",function(){return Hs}),n.d(e,"d",function(){return qs}),n.d(e,"e",function(){return Bs}),n.d(e,"f",function(){return qa}),n.d(e,"g",function(){return ka}),n.d(e,"h",function(){return Qo}),n.d(e,"i",function(){return oa}),n.d(e,"j",function(){return bo}),n.d(e,"k",function(){return Ys}),n.d(e,"l",function(){return So}),n.d(e,"m",function(){return nr}),n.d(e,"n",function(){return Os}),n.d(e,"o",function(){return Oi}),n.d(e,"p",function(){return cn}),n.d(e,"q",function(){return A}),n.d(e,"r",function(){return Ge}),n.d(e,"s",function(){return Ui}),n.d(e,"t",function(){return Bo}),n.d(e,"u",function(){return zo}),n.d(e,"v",function(){return Js}),n.d(e,"w",function(){return ss}),n.d(e,"x",function(){return Da}),n.d(e,"y",function(){return os}),n.d(e,"z",function(){return Ia}),n.d(e,"A",function(){return ua}),n.d(e,"B",function(){return ln}),n.d(e,"C",function(){return Ws}),n.d(e,"D",function(){return Ks}),n.d(e,"E",function(){return Io}),n.d(e,"F",function(){return To}),n.d(e,"G",function(){return sr}),n.d(e,"H",function(){return xo}),n.d(e,"I",function(){return Yn}),n.d(e,"J",function(){return hn}),n.d(e,"K",function(){return La}),n.d(e,"L",function(){return es}),n.d(e,"M",function(){return ga}),n.d(e,"N",function(){return We}),n.d(e,"O",function(){return jo}),n.d(e,"P",function(){return Ao}),n.d(e,"Q",function(){return us}),n.d(e,"R",function(){return P}),n.d(e,"S",function(){return Ca}),n.d(e,"T",function(){return Oa}),n.d(e,"U",function(){return Sa}),n.d(e,"V",function(){return Ua}),n.d(e,"W",function(){return va}),n.d(e,"X",function(){return Qs}),n.d(e,"Y",function(){return Ii}),n.d(e,"Z",function(){return fo}),n.d(e,"ab",function(){return y}),n.d(e,"bb",function(){return Qn}),n.d(e,"cb",function(){return Nn}),n.d(e,"db",function(){return _n}),n.d(e,"eb",function(){return Sn}),n.d(e,"fb",function(){return Cn}),n.d(e,"gb",function(){return Tn}),n.d(e,"hb",function(){return On}),n.d(e,"ib",function(){return In}),n.d(e,"jb",function(){return uo}),n.d(e,"kb",function(){return Fa}),n.d(e,"lb",function(){return co}),n.d(e,"mb",function(){return lo}),n.d(e,"nb",function(){return En}),n.d(e,"ob",function(){return V}),n.d(e,"pb",function(){return Hi}),n.d(e,"qb",function(){return Zi}),n.d(e,"rb",function(){return Yi}),n.d(e,"sb",function(){return Xi}),n.d(e,"tb",function(){return ao}),n.d(e,"ub",function(){return St}),n.d(e,"vb",function(){return h}),n.d(e,"wb",function(){return wn}),n.d(e,"xb",function(){return mt}),n.d(e,"yb",function(){return Ki}),n.d(e,"zb",function(){return Ms}),n.d(e,"Ab",function(){return Y}),n.d(e,"Bb",function(){return it}),n.d(e,"Cb",function(){return w}),n.d(e,"Db",function(){return _}),n.d(e,"Eb",function(){return et}),n.d(e,"Fb",function(){return ot}),n.d(e,"Gb",function(){return Wi}),n.d(e,"Hb",function(){return Ji}),n.d(e,"Ib",function(){return ro}),n.d(e,"Jb",function(){return sn}),n.d(e,"Kb",function(){return Be}),n.d(e,"Lb",function(){return Vs}),n.d(e,"Mb",function(){return to}),n.d(e,"Nb",function(){return Fs}),n.d(e,"Ob",function(){return Ls}),n.d(e,"Pb",function(){return Xn}),n.d(e,"Qb",function(){return nt});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("oB13"),u=n("x+ZX");function c(){return new r.a}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(h).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function f(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=l({__forward_ref__:l});function p(t){return t.__forward_ref__=p,t.toString=function(){return h(this())},t}function g(t){return"function"==typeof(e=t)&&e.hasOwnProperty(d)&&e.__forward_ref__===p?t():t;var e}class y extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function m(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():m(t)}function b(t,e){const n=e?` in ${e}`:"";throw new y("201",`No provider for ${v(t)} found${n}`)}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _(t){return{providers:t.providers||[],imports:t.imports||[]}}function E(t){return S(t,T)||S(t,C)}function S(t,e){return t.hasOwnProperty(e)?t[e]:null}function O(t){return t&&(t.hasOwnProperty(I)||t.hasOwnProperty(x))?t[I]:null}const T=l({"\u0275prov":l}),I=l({"\u0275inj":l}),C=l({ngInjectableDef:l}),x=l({ngInjectorDef:l});var A=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let j;function k(t){const e=j;return j=t,e}function N(t,e,n){const r=E(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&A.Optional?null:void 0!==e?e:void b(h(t),"Injector")}function D(t){return{toString:t}.toString()}var R=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),P=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const L="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,F="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,V=L||U||M||F,q={},B=[],H=l({"\u0275cmp":l}),z=l({"\u0275dir":l}),G=l({"\u0275pipe":l}),K=l({"\u0275mod":l}),W=l({"\u0275loc":l}),$=l({"\u0275fac":l}),Q=l({__NG_ELEMENT_ID__:l});let J=0;function Y(t){return D(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===R.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||B,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||P.Emulated,id:"c",styles:t.styles||B,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=J++,n.inputs=rt(t.inputs,e),n.outputs=rt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(X):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Z):null,n})}function X(t){return st(t)||function(t){return t[z]||null}(t)}function Z(t){return function(t){return t[G]||null}(t)}const tt={};function et(t){const e={type:t.type,bootstrap:t.bootstrap||B,declarations:t.declarations||B,imports:t.imports||B,exports:t.exports||B,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&D(()=>{tt[t.id]=t.type}),e}function nt(t,e){return D(()=>{const n=at(t,!0);n.declarations=e.declarations||B,n.imports=e.imports||B,n.exports=e.exports||B})}function rt(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const it=Y;function ot(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function st(t){return t[H]||null}function at(t,e){const n=t[K]||null;if(!n&&!0===e)throw new Error(`Type ${h(t)} does not have '\u0275mod' property.`);return n}const ut=10;function ct(t){return Array.isArray(t)&&"object"==typeof t[1]}function lt(t){return Array.isArray(t)&&!0===t[1]}function ht(t){return 0!=(8&t.flags)}function ft(t){return 2==(2&t.flags)}function dt(t){return 1==(1&t.flags)}function pt(t){return null!==t.template}function gt(t,e){return t.hasOwnProperty($)?t[$]:null}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function mt(){return vt}function vt(t){return t.type.prototype.ngOnChanges&&(t.setInput=wt),bt}function bt(){const t=_t(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function wt(t,e,n,r){const i=_t(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new yt(u&&u.currentValue,e,s===q),t[r]=e}function _t(t){return t.__ngSimpleChanges__||null}let Et;function St(t){Et=t}function Ot(t){return!!t.listen}mt.ngInherit=!0;const Tt={createRenderer:(t,e)=>void 0!==Et?Et:"undefined"!=typeof document?document:void 0};function It(t){for(;Array.isArray(t);)t=t[0];return t}function Ct(t,e){return It(e[t.index])}function xt(t,e){return t.data[e]}function At(t,e){const n=e[t];return ct(n)?n:n[0]}function jt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function kt(t){return 4==(4&t[2])}function Nt(t){return 128==(128&t[2])}function Dt(t,e){return null==e?null:t[e]}function Rt(t){t[18]=0}function Pt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Lt={lFrame:ee(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Mt(){return Lt.bindingsEnabled}function Ft(){return Lt.lFrame.lView}function Ut(){return Lt.lFrame.tView}function Vt(){let t=qt();for(;null!==t&&64===t.type;)t=t.parent;return t}function qt(){return Lt.lFrame.currentTNode}function Bt(t,e){const n=Lt.lFrame;n.currentTNode=t,n.isParent=e}function Ht(){return Lt.lFrame.isParent}function zt(){return Lt.isInCheckNoChangesMode}function Gt(t){Lt.isInCheckNoChangesMode=t}function Kt(){return Lt.lFrame.bindingIndex++}function Wt(t,e){const n=Lt.lFrame;n.bindingIndex=n.bindingRootIndex=t,$t(e)}function $t(t){Lt.lFrame.currentDirectiveIndex=t}function Qt(){return Lt.lFrame.currentQueryIndex}function Jt(t){Lt.lFrame.currentQueryIndex=t}function Yt(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Xt(t,e,n){if(n&A.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&A.Host||(r=Yt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Lt.lFrame=te();return r.currentTNode=e,r.lView=t,!0}function Zt(t){const e=te(),n=t[1];Lt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function te(){const t=Lt.lFrame,e=null===t?null:t.child;return null===e?ee(t):e}function ee(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ne(){const t=Lt.lFrame;return Lt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const re=ne;function ie(){const t=ne();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function oe(t){Lt.lFrame.selectedIndex=t}function se(){const t=Lt.lFrame;return xt(t.tView,t.selectedIndex)}function ae(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ue(t,e,n){he(t,e,3,n)}function ce(t,e,n,r){(3&t[2])===n&&he(t,e,n,r)}function le(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function he(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(fe(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function fe(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const de=-1;class pe{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function ge(t,e,n){const r=Ot(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];me(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function ye(t){return 3===t||4===t||6===t}function me(t){return 64===t.charCodeAt(0)}function ve(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||be(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function be(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function we(t){return t!==de}function _e(t){return 32767&t}function Ee(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Se=!0;function Oe(t){const e=Se;return Se=t,e}let Te=0;function Ie(t,e){const n=xe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ce(r.data,t),Ce(e,null),Ce(r.blueprint,null));const i=Ae(t,e),o=t.injectorIndex;if(we(i)){const t=_e(i),n=Ee(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ce(t,e){t.push(0,0,0,0,0,0,0,0,e)}function xe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ae(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return de;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return de}function je(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Q)&&(r=n[Q]),null==r&&(r=n[Q]=Te++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function ke(t,e,n){if(n&A.Optional)return t;b(e,"NodeInjector")}function Ne(t,e,n,r){if(n&A.Optional&&void 0===r&&(r=null),0==(n&(A.Self|A.Host))){const i=t[9],o=k(void 0);try{return i?i.get(e,r,n&A.Optional):N(e,r,n&A.Optional)}finally{k(o)}}return ke(r,e,n)}function De(t,e,n,r=A.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Q)?t[Q]:void 0;return"number"==typeof e?e>=0?255&e:Pe:e}(n);if("function"==typeof o){if(!Xt(e,t,r))return r&A.Host?ke(i,n,r):Ne(e,n,r,i);try{const t=o();if(null!=t||r&A.Optional)return t;b(n)}finally{re()}}else if("number"==typeof o){let i=null,s=xe(t,e),a=de,u=r&A.Host?e[16][6]:null;for((-1===s||r&A.SkipSelf)&&(a=-1===s?Ae(t,e):e[s+8],a!==de&&Ve(r,!1)?(i=e[1],s=_e(a),e=Ee(a,e)):s=-1);-1!==s;){const t=e[1];if(Ue(o,s,t.data)){const t=Le(s,e,n,i,r,u);if(t!==Re)return t}a=e[s+8],a!==de&&Ve(r,e[1].data[s+8]===u)&&Ue(o,s,e)?(i=t,s=_e(a),e=Ee(a,e)):s=-1}}}return Ne(e,n,r,i)}const Re={};function Pe(){return new qe(Vt(),Ft())}function Le(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Me(a,s,n,null==r?ft(a)&&Se:r!=s&&0!=(3&a.type),i&A.Host&&o===a);return null!==u?Fe(e,s,u,a):Re}function Me(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&pt(t)&&t.type===n)return u}return null}function Fe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof pe){const s=i;s.resolving&&function(t,e){throw new y("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Oe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?k(s.injectImpl):null;Xt(t,r,A.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=vt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&k(u),Oe(a),s.resolving=!1,re()}}return i}function Ue(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ve(t,e){return!(t&A.Self||t&A.Host&&e)}class qe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return De(this._tNode,this._lView,t,void 0,e)}}function Be(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(ye(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Vt(),t)}const He="__parameters__";function ze(t,e,n){return D(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(He)?t[He]:Object.defineProperty(t,He,{value:[]})[He];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Ge{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=w({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ke=new Ge("AnalyzeForEntryComponents"),We=Function;function $e(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),$e(r,e)):e!==t&&e.push(r)}return e}function Qe(t,e){t.forEach(t=>Array.isArray(t)?Qe(t,e):e(t))}function Je(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ye(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Xe={},Ze=/\n/gm,tn="__source",en=l({provide:String,useValue:l});let nn;function rn(t){const e=nn;return nn=t,e}function on(t,e=A.Default){if(void 0===nn)throw new Error("inject() must be called from an injection context");return null===nn?N(t,void 0,e):nn.get(t,e&A.Optional?null:void 0,e)}function sn(t,e=A.Default){return(j||on)(g(t),e)}function an(t){const e=[];for(let n=0;n<t.length;n++){const r=g(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=A.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(sn(t,n))}else e.push(sn(r))}return e}function un(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const cn=un(ze("Inject",t=>({token:t})),-1),ln=un(ze("Optional"),8),hn=un(ze("SkipSelf"),4);let fn;function dn(t){var e;return(null===(e=function(){if(void 0===fn&&(fn=null,V.trustedTypes))try{fn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return fn}())||void 0===e?void 0:e.createHTML(t))||t}class pn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class gn extends pn{getTypeName(){return"HTML"}}class yn extends pn{getTypeName(){return"Style"}}class mn extends pn{getTypeName(){return"Script"}}class vn extends pn{getTypeName(){return"URL"}}class bn extends pn{getTypeName(){return"ResourceURL"}}function wn(t){return t instanceof pn?t.changingThisBreaksApplicationSecurity:t}function _n(t,e){const n=En(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function En(t){return t instanceof pn&&t.getTypeName()||null}function Sn(t){return new gn(t)}function On(t){return new yn(t)}function Tn(t){return new mn(t)}function In(t){return new vn(t)}function Cn(t){return new bn(t)}class xn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(dn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class An{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=dn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=dn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const jn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,kn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Nn(t){return(t=String(t)).match(jn)||t.match(kn)?t:"unsafe:"+t}function Dn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Rn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Pn=Dn("area,br,col,hr,img,wbr"),Ln=Dn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Mn=Dn("rp,rt"),Fn=Rn(Mn,Ln),Un=Rn(Pn,Rn(Ln,Dn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Rn(Mn,Dn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Fn),Vn=Dn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qn=Dn("srcset"),Bn=Rn(Vn,qn,Dn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Dn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Hn=Dn("script,style,template");class zn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Un.hasOwnProperty(e))return this.sanitizedSomething=!0,!Hn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Bn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Vn[o]&&(s=Nn(s)),qn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Nn(t.trim())).join(", ")),this.buf.push(" ",e,'="',Wn(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Un.hasOwnProperty(e)&&!Pn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Wn(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Gn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Kn=/([^\#-~ |!])/g;function Wn(t){return t.replace(/&/g,"&amp;").replace(Gn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Kn,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $n;function Qn(t,e){let n=null;try{$n=$n||function(t){const e=new An(t);return function(){try{return!!(new window.DOMParser).parseFromString(dn(""),"text/html")}catch(t){return!1}}()?new xn(e):e}(t);let r=e?String(e):"";n=$n.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=$n.getInertBodyElement(r)}while(r!==o);return dn((new zn).sanitizeChildren(Jn(n)||n))}finally{if(n){const t=Jn(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Jn(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Yn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Xn(t){const e=function(){const t=Ft();return t&&t[12]}();return e?e.sanitize(Yn.URL,t)||"":_n(t,"URL")?wn(t):Nn(m(t))}function Zn(t){return t.ngDebugContext}function tr(t){return t.ngOriginalError}function er(t,...e){t.error(...e)}class nr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||er}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Zn(t)?Zn(t):this._findContext(tr(t)):null}_findOriginalError(t){let e=tr(t);for(;e&&tr(e);)e=tr(e);return e}}function rr(t,e){t.__ngContext__=e}const ir=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function or(t){return t instanceof Function?t():t}var sr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function ar(t,e){return(void 0)(t,e)}function ur(t){const e=t[3];return lt(e)?e[3]:e}function cr(t){return hr(t[13])}function lr(t){return hr(t[4])}function hr(t){for(;null!==t&&!lt(t);)t=t[4];return t}function fr(t,e,n,r,i){if(null!=r){let o,s=!1;lt(r)?o=r:ct(r)&&(s=!0,r=r[0]);const a=It(r);0===t&&null!==n?null==i?br(e,n,a):vr(e,n,a,i||null,!0):1===t&&null!==n?vr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=_r(t,e);r&&function(t,e,n,r){Ot(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==It(n)&&fr(e,t,r,o,i);for(let s=ut;s<n.length;s++){const i=n[s];Cr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function dr(t,e,n){return Ot(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function pr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Pt(i,-1)),n.splice(r,1)}function gr(t,e){if(t.length<=ut)return;const n=ut+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&pr(o,r),e>0&&(t[n-1][4]=r[4]);const s=Ye(t,ut+e);Cr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function yr(t,e){if(!(256&e[2])){const n=e[11];Ot(n)&&n.destroyNode&&Cr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return mr(t[1],t);for(;e;){let n=null;if(ct(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ct(e)&&mr(e[1],e),e=e[3];null===e&&(e=t),ct(e)&&mr(e[1],e),n=e&&e[4]}e=n}}(e)}}function mr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof pe)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):It(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Ot(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&lt(e[3])){n!==e[3]&&pr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function vr(t,e,n,r,i){Ot(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function br(t,e,n){Ot(t)?t.appendChild(e,n):e.appendChild(n)}function wr(t,e,n,r,i){null!==r?vr(t,e,n,r,i):br(t,e,n)}function _r(t,e){return Ot(t)?t.parentNode(e):e.parentNode}function Er(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===P.None||e===P.Emulated)return null}return Ct(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Ct(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)wr(o,i,n[a],s,!1);else wr(o,i,n,s,!1)}function Sr(t,e){if(null!==e){const n=e.type;if(3&n)return Ct(e,t);if(4&n)return Tr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Sr(t,n);{const n=t[e.index];return lt(n)?Tr(-1,n):It(n)}}if(32&n)return ar(e,t)()||It(t[e.index]);{const n=Or(t,e);return null!==n?Array.isArray(n)?n[0]:Sr(ur(t[16]),n):Sr(t,e.next)}}return null}function Or(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Tr(t,e){const n=ut+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Sr(t,r)}return e[7]}function Ir(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&rr(It(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Ir(t,e,n.child,r,i,o,!1),fr(e,t,i,a,o);else if(32&u){const s=ar(n,r);let u;for(;u=s();)fr(e,t,i,u,o);fr(e,t,i,a,o)}else 16&u?xr(t,e,r,n,i,o):fr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Cr(t,e,n,r,i,o){Ir(n,r,t.firstChild,e,i,o,!1)}function xr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)fr(e,t,i,a[u],o);else Ir(t,e,a,s[3],i,o,!0)}function Ar(t,e,n){Ot(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function jr(t,e,n){Ot(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function kr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Nr="ng-template";function Dr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==kr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Rr(t){return 4===t.type&&t.value!==Nr}function Pr(t,e,n){return e===(4!==t.type||n?t.value:Nr)}function Lr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(ye(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Pr(t,u,n)||""===u&&1===e.length){if(Mr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Dr(t.attrs,c,n)){if(Mr(r))return!1;s=!0}continue}const l=Fr(8&r?"class":u,i,Rr(t),n);if(-1===l){if(Mr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==kr(e,c,0)||2&r&&c!==t){if(Mr(r))return!1;s=!0}}}}else{if(!s&&!Mr(r)&&!Mr(u))return!1;if(s&&Mr(u))continue;s=!1,r=u|1&r}}return Mr(r)||s}function Mr(t){return 0==(1&t)}function Fr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Ur(t,e,n=!1){for(let r=0;r<e.length;r++)if(Lr(t,e[r],n))return!0;return!1}function Vr(t,e){return t?":not("+e.trim()+")":e}function qr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Mr(s)||(e+=Vr(o,i),i=""),r=s,o=o||!Mr(r);n++}return""!==i&&(e+=Vr(o,i)),e}const Br={};function Hr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Jt(i),n.contentQueries(2,e[o],o)}}}function zr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Rt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Gr(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=qt(),s=Ht(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Lt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Lt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Bt(o,!0),o}function Kr(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Wr(t,e,n){Zt(e);try{const r=t.viewQuery;null!==r&&mi(1,r,n);const i=t.template;null!==i&&Jr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Hr(t,e),t.staticViewQueries&&mi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)fi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ie()}}function $r(t,e,n,r){const i=e[2];if(256==(256&i))return;Zt(e);const o=zt();try{Rt(e),Lt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Jr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&ue(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ce(e,n,0,null),le(e,0)}if(function(t){for(let e=cr(t);null!==e;e=lr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Pt(r,1),n[2]|=1024}}}(e),function(t){for(let e=cr(t);null!==e;e=lr(e))for(let t=ut;t<e.length;t++){const n=e[t],r=n[1];Nt(n)&&$r(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Hr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&ue(e,n)}else{const n=t.contentHooks;null!==n&&ce(e,n,1),le(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)oe(~r);else{const i=r,o=n[++t],s=n[++t];Wt(o,i),s(2,e[i])}}}finally{oe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)li(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&mi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&ue(e,n)}else{const n=t.viewHooks;null!==n&&ce(e,n,2),le(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Pt(e[3],-1))}finally{ie()}}function Qr(t,e,n,r){const i=e[10],o=!zt(),s=kt(e);try{o&&!s&&i.begin&&i.begin(),s&&Wr(t,e,r),$r(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Jr(t,e,n,r,i){const o=Lt.lFrame.selectedIndex,s=2&r;try{oe(-1),s&&e.length>20&&function(t,e,n,r){if(!r)if(3==(3&e[2])){const n=t.preOrderCheckHooks;null!==n&&ue(e,n,20)}else{const n=t.preOrderHooks;null!==n&&ce(e,n,0,20)}oe(20)}(t,e,0,zt()),n(r,i)}finally{oe(o)}}function Yr(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Xr(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Xr(t,e,n,r,i,o,s,a,u,c){const l=20+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Br);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Zr(t,e,n,r){const i=bi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&wi(t).push(r,i.length-1))}function ti(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ei(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function ni(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ri(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ii(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;pt(e)&&(n[""]=t)}}function oi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function si(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=gt(i.type)),s=new pe(o,pt(i),null);t.blueprint[r]=s,n[r]=s,ei(t,e,0,r,Kr(t,n,i.hostVars,Br),i)}function ai(t,e,n){const r=Ct(e,t),i=Yr(n),o=t[10],s=di(t,zr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function ui(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ci(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function li(t,e){const n=At(e,t);if(Nt(n)){const t=n[1];80&n[2]?$r(t,n,t.template,n[8]):n[5]>0&&hi(n)}}function hi(t){for(let n=cr(t);null!==n;n=lr(n))for(let t=ut;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];$r(t,e,t.template,e[8])}else e[5]>0&&hi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=At(e[n],t);Nt(r)&&r[5]>0&&hi(r)}}function fi(t,e){const n=At(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Wr(r,n,n[8])}function di(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function pi(t){for(;t;){t[2]|=64;const e=ur(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function gi(t,e,n){const r=e[10];r.begin&&r.begin();try{$r(t,e,t.template,n)}catch(i){throw _i(e,i),i}finally{r.end&&r.end()}}function yi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=jt(n),i=r[1];Qr(i,r,i.template,n)}}(t[8])}function mi(t,e,n){Jt(0),e(t,n)}const vi=(()=>Promise.resolve(null))();function bi(t){return t[7]||(t[7]=[])}function wi(t){return t.cleanup||(t.cleanup=[])}function _i(t,e){const n=t[9],r=n?n.get(nr,null):null;r&&r.handleError(e)}function Ei(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Si(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=f(i,t):2==o&&(r=f(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Oi=new Ge("INJECTOR",-1);class Ti{get(t,e=Xe){if(e===Xe){const e=new Error(`NullInjectorError: No provider for ${h(t)}!`);throw e.name="NullInjectorError",e}return e}}const Ii=new Ge("Set Injector scope."),Ci={},xi={},Ai=[];let ji;function ki(){return void 0===ji&&(ji=new Ti),ji}function Ni(t,e=null,n=null,r){return new Di(t,n,e||ki(),r)}class Di{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Qe(e,n=>this.processProvider(n,t,e)),Qe([t],t=>this.processInjectorType(t,[],i)),this.records.set(Oi,Pi(void 0,this));const o=this.records.get(Ii);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:h(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Xe,n=A.Default){this.assertNotDestroyed();const r=rn(this);try{if(!(n&A.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Ge)&&E(t);e=n&&this.injectableDefInScope(n)?Pi(Ri(t),Ci):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&A.Self?ki():this.parent).get(t,e=n&A.Optional&&e===Xe?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(h(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[tn]&&i.unshift(e[tn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=h(e);if(Array.isArray(e))i=e.map(h).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):h(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ze,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{rn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(h(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=g(t)))return!1;let r=O(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=O(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Qe(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Qe(r,t=>this.processProvider(t,n,r||Ai))}}this.injectorDefTypes.add(o);const a=gt(o)||(()=>new o);this.records.set(o,Pi(a,Ci));const u=r.providers;if(null!=u&&!s){const e=t;Qe(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Mi(t=g(t))?t:g(t&&t.provide);const i=function(t,e,n){return Li(t)?Pi(void 0,t.useValue):Pi(function(t,e,n){let r;if(Mi(t)){const e=g(t);return gt(e)||Ri(e)}if(Li(t))r=()=>g(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...an(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>sn(g(t.useExisting));else{const e=g(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return gt(e)||Ri(e);r=()=>new e(...an(t.deps))}var i;return r}(t),Ci)}(t);if(Mi(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Pi(void 0,Ci,!0),e.factory=()=>an(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Ci&&(e.value=xi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Ri(t){const e=E(t),n=null!==e?e.factory:gt(t);if(null!==n)return n;if(t instanceof Ge)throw new Error(`Token ${h(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${h(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[T]||t[C]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Pi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Li(t){return null!==t&&"object"==typeof t&&en in t}function Mi(t){return"function"==typeof t}const Fi=function(t,e,n){return function(t,e=null,n=null,r){const i=Ni(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Ui=(()=>{class t{static create(t,e){return Array.isArray(t)?Fi(t,e,""):Fi(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Xe,t.NULL=new Ti,t.\u0275prov=w({token:t,providedIn:"any",factory:()=>sn(Oi)}),t.__NG_ELEMENT_ID__=-1,t})();function Vi(t,e){ae(jt(t)[1],Vt())}let qi=null;function Bi(){if(!qi){const t=V.Symbol;if(t&&t.iterator)qi=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(qi=n)}}}return qi}function Hi(t){return!!zi(t)&&(Array.isArray(t)||!(t instanceof Map)&&Bi()in t)}function zi(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Gi(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ki(t,e,n,r){const i=Ft();return Gi(i,Kt(),e)&&(Ut(),function(t,e,n,r,i,o){const s=Ct(t,e);!function(t,e,n,r,i,o,s){if(null==o)Ot(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?m(o):s(o,r||"",i);Ot(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(se(),i,t,e,n,r)),Ki}function Wi(t,e=A.Default){const n=Ft();return null===n?sn(t,e):De(Vt(),n,g(t),e)}function $i(t,e,n,r,i){const o=i?"class":"style";Ei(t,n,e.inputs[o],o,r)}function Qi(t,e,n,r){const i=Ft(),o=Ut(),s=20+t,a=i[11],u=i[s]=dr(a,e,Lt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Gr(e,t,2,i,Dt(a,o));return function(t,e,n,r){let i=!1;if(Mt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Ur(n,s.selectors,!1)&&(i||(i=[]),je(Ie(n,e),t,s.type),pt(s)?(ri(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,oi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Kr(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=ve(n.mergedAttrs,c.hostAttrs),si(t,n,e,u,c),ii(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Rr(e)?null:ci(n,i);o.push(c),s=ti(n,u,s),a=ti(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new y("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}n.mergedAttrs=ve(n.mergedAttrs,n.attrs)}(e,n,u,Dt(a,s)),null!==u.attrs&&Si(u,u.attrs,!1),null!==u.mergedAttrs&&Si(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Bt(c,!0);const l=c.mergedAttrs;null!==l&&ge(a,u,l);const h=c.classes;null!==h&&jr(a,u,h);const f=c.styles;null!==f&&Ar(a,u,f),64!=(64&c.flags)&&Er(o,i,u,c),0===Lt.lFrame.elementDepthCount&&rr(u,i),Lt.lFrame.elementDepthCount++,dt(c)&&(function(t,e,n){Mt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ie(n,e),rr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=pt(r);o&&ai(e,n,r);const u=Fe(e,t,a,n);rr(u,e),null!==s&&ui(0,a-i,u,r,0,s),o&&(At(n.index,e)[8]=u)}}(t,e,n,Ct(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Lt.lFrame.currentDirectiveIndex;try{oe(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];$t(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||ni(r,i)}}finally{oe(-1),$t(s)}}(t,e,n))}(o,i,c),function(t,e,n){if(ht(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&function(t,e,n=Ct){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}(i,c)}function Ji(t,e,n,r){Qi(t,e,n,r),function(){let t=Vt();Ht()?Lt.lFrame.isParent=!1:(t=t.parent,Bt(t,!1));const e=t;Lt.lFrame.elementDepthCount--;const n=Ut();n.firstCreatePass&&(ae(n,t),ht(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&$i(n,e,Ft(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&$i(n,e,Ft(),e.stylesWithoutHost,!1)}()}function Yi(t){return!!t&&"function"==typeof t.then}function Xi(t){return!!t&&"function"==typeof t.subscribe}const Zi=Xi;function to(t,e,n=!1,r){const i=Ft(),o=Ut(),s=Vt();return function(t,e,n,r,i,o,s=!1,a){const u=dt(r),c=t.firstCreatePass&&wi(t),l=bi(e);let h=!0;if(3&r.type){const f=Ct(r,e),d=a?a(f):q,p=d.target||f,g=l.length,y=a?t=>a(It(t[r.index])).target:r.index;if(Ot(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=no(r,e,0,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=no(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=no(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),to}function eo(t,e,n,r){try{return!1!==n(r)}catch(i){return _i(t,i),!1}}function no(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?At(t.index,e):e;0==(32&e[2])&&pi(s);let a=eo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=eo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ro(t,e,n){const r=Ft();return Gi(r,Kt(),e)&&function(t,e,n,r,i,o,s,a){const u=Ct(e,n);var c;3&e.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,i=null!=s?s(i,e.value||"",r):i,Ot(o)?o.setProperty(u,r,i):me(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}(Ut(),se(),r,t,e,r[11],n),ro}const io=void 0;var oo=["en",[["a","p"],["AM","PM"],io],[["AM","PM"],io,io],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],io,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],io,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",io,"{1} 'at' {0}",io],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let so={};function ao(t,e,n){"string"!=typeof e&&(n=e,e=t[fo.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),so[e]=t,n&&(so[e][fo.ExtraData]=n)}function uo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ho(e);if(n)return n;const r=e.split("-")[0];if(n=ho(r),n)return n;if("en"===r)return oo;throw new Error(`Missing locale data for the locale "${t}".`)}function co(t){return uo(t)[fo.CurrencyCode]||null}function lo(t){return uo(t)[fo.PluralCase]}function ho(t){return t in so||(so[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),so[t]}var fo=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const po="en-US";let go=po;function yo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(go=t.toLowerCase().replace(/_/g,"-"))}class mo{}class vo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${h(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let bo=(()=>{class t{}return t.NULL=new vo,t})();function wo(...t){}function _o(t,e){return new So(Ct(t,e))}const Eo=function(){return _o(Vt(),Ft())};let So=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Eo,t})();function Oo(t){return t instanceof So?t.nativeElement:t}class To{}let Io=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Co(),t})();const Co=function(){const t=Ft(),e=At(Vt().index,t);return function(t){return t[11]}(ct(e)?e:t)};let xo=(()=>{class t{}return t.\u0275prov=w({token:t,providedIn:"root",factory:()=>null}),t})();class Ao{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const jo=new Ao("11.2.14");class ko{constructor(){}supports(t){return Hi(t)}create(t){return new Do(t)}}const No=(t,e)=>e;class Do{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||No}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Mo(n,r,i)?e:n,s=Mo(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Hi(t))throw new Error(`Error trying to diff '${h(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Bi()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Ro(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Lo),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Lo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ro{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Po{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Lo{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Po,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Mo(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Fo{constructor(){}supports(t){return t instanceof Map||zi(t)}create(){return new Uo}}class Uo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||zi(t)))throw new Error(`Error trying to diff '${h(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Vo(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Vo{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qo(){return new Bo([new ko])}let Bo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||qo()),deps:[[t,new hn,new ln]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=w({token:t,providedIn:"root",factory:qo}),t})();function Ho(){return new zo([new Fo])}let zo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ho()),deps:[[t,new hn,new ln]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=w({token:t,providedIn:"root",factory:Ho}),t})();function Go(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(It(o)),lt(o))for(let t=ut;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Go(e[1],e,n,r)}const s=n.type;if(8&s)Go(t,e,n.child,r);else if(32&s){const t=ar(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Or(e,n);if(Array.isArray(t))r.push(...t);else{const n=ur(e[16]);Go(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ko{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Go(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(lt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(gr(t,n),Ye(e,n))}this._attachedToViewContainer=!1}yr(this._lView[1],this._lView)}onDestroy(t){Zr(this._lView[1],this._lView,null,t)}markForCheck(){pi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){gi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Gt(!0);try{gi(t,e,n)}finally{Gt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Cr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Wo extends Ko{constructor(t){super(t),this._view=t}detectChanges(){yi(this._view)}checkNoChanges(){!function(t){Gt(!0);try{yi(t)}finally{Gt(!1)}}(this._view)}get context(){return null}}const $o=Jo;let Qo=(()=>{class t{}return t.__NG_ELEMENT_ID__=$o,t.__ChangeDetectorRef__=!0,t})();function Jo(t=!1){return function(t,e,n){if(!n&&ft(t)){const n=At(t.index,e);return new Ko(n,n)}return 47&t.type?new Ko(e[16],e):null}(Vt(),Ft(),t)}const Yo=[new Fo],Xo=new Bo([new ko]),Zo=new zo(Yo),ts=function(){return is(Vt(),Ft())};let es=(()=>{class t{}return t.__NG_ELEMENT_ID__=ts,t})();const ns=es,rs=class extends ns{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=zr(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Wr(e,n,t),new Ko(n)}};function is(t,e){return 4&t.type?new rs(e,t,_o(t,e)):null}class os{}class ss{}const as=function(){return ds(Vt(),Ft())};let us=(()=>{class t{}return t.__NG_ELEMENT_ID__=as,t})();const cs=us,ls=class extends cs{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return _o(this._hostTNode,this._hostLView)}get injector(){return new qe(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ae(this._hostTNode,this._hostLView);if(we(t)){const e=Ee(t,this._hostLView),n=_e(t);return new qe(e[1].data[n+8],e)}return new qe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=hs(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ut}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(os,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(lt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ls(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ut+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ut?(e[4]=n[i],Je(n,ut+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Tr(i,o),a=n[11],u=_r(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Cr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),Je(fs(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=hs(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=gr(this._lContainer,e);n&&(Ye(fs(this._lContainer),e),yr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=gr(this._lContainer,e);return n&&null!=Ye(fs(this._lContainer),e)?new Ko(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function hs(t){return t[8]}function fs(t){return t[8]||(t[8]=[])}function ds(t,e){let n;const r=e[t.index];if(lt(r))n=r;else{let i;if(8&t.type)i=It(r);else{const n=e[11];i=n.createComment("");const r=Ct(t,e);vr(n,_r(n,r),i,function(t,e){return Ot(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=new Array(r,!0,!1,e,null,0,t,i,null,null),di(e,n)}return new ls(n,t,e)}const ps={};class gs extends bo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=st(t);return new vs(e,this.ngModule)}}function ys(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ms=new Ge("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ir});class vs extends mo{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(qr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ys(this.componentDef.inputs)}get outputs(){return ys(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ps,i);return o!==ps||r===ps?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(To,Tt),s=i.get(xo,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Ot(t))return t.selectRootElement(e,n===P.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):dr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:ir,clean:vi,playerHandler:null,flags:0},f=Xr(0,null,null,1,0,null,null,null,null,null),d=zr(null,f,h,l,null,null,o,a,s,i);let p,g;Zt(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Gr(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Si(a,u,!0),null!==t&&(ge(i,t,u),null!==a.classes&&jr(i,t,a.classes),null!==a.styles&&Ar(i,t,a.styles)));const c=r.createRenderer(t,e),l=zr(n,Yr(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(je(Ie(a,n),s,e.type),ri(s,a),oi(a,n.length,1)),di(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)ge(a,c,["ng-version",jo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Mr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&ge(a,c,t),e&&e.length>0&&jr(a,c,e.join(" "))}if(g=xt(f,20),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Vt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),si(t,r,e,Kr(t,e,1,null),n));const i=Fe(e,t,r.directiveStart,r);rr(i,e);const o=Ct(r,e);return o&&rr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Vt();e.contentQueries(1,s,t.directiveStart)}const a=Vt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(oe(a.index),ei(n[1],a,0,a.directiveStart,a.directiveEnd,e),ni(e,s)),s}(t,this.componentDef,d,h,[Vi]),Wr(f,d,null)}finally{ie()}return new bs(this.componentType,p,_o(g,d),d,g)}}class bs extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Wo(r),this.componentType=t}get injector(){return new qe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const ws=new Map;class _s extends os{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new gs(this);const n=at(t),r=t[W]||null;r&&yo(r),this._bootstrapComponents=or(n.bootstrap),this._r3Injector=Ni(t,e,[{provide:os,useValue:this},{provide:bo,useValue:this.componentFactoryResolver}],h(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Ui.THROW_IF_NOT_FOUND,n=A.Default){return t===Ui||t===os||t===Oi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Es extends ss{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const r=at(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${h(e)} vs ${h(e.name)}`)}(i,ws.get(i),n),ws.set(i,n));const o=or(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new _s(this.moduleType,t)}}function Ss(t){return e=>{setTimeout(t,void 0,e)}}const Os=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Ss(u),a&&(a=Ss(a)),c&&(c=Ss(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function Ts(){return this._results[Bi()]()}class Is{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Bi(),n=Is.prototype;n[e]||(n[e]=Ts)}get changes(){return this._changes||(this._changes=new Os)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=$e(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Cs{constructor(t){this.queryList=t,this.matches=null}clone(){return new Cs(this.queryList)}setDirty(){this.queryList.setDirty()}}class xs{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new xs(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Us(t,e).matches&&this.queries[e].setDirty()}}class As{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class js{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new js(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ks{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new ks(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ns(e,i)),this.matchTNodeWithReadOption(t,e,Me(e,t,i,!1,!1))}else n===es?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Me(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===So||r===us||r===es&&4&e.type)this.addMatch(e.index,-2);else{const n=Me(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ns(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ds(t,e,n,r){return-1===n?function(t,e){return 11&t.type?_o(t,e):4&t.type?is(t,e):null}(e,t):-2===n?function(t,e,n){return n===So?_o(e,t):n===es?is(e,t):n===us?ds(e,t):void 0}(t,e,r):Fe(t,t[1],n,e)}function Rs(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ds(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ps(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Rs(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ut;t<s.length;t++){const e=s[t];e[17]===e[3]&&Ps(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Ps(n[1],n,i,r)}}}}}return r}function Ls(t){const e=Ft(),n=Ut(),r=Qt();Jt(r+1);const i=Us(n,r);if(t.dirty&&kt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Ps(n,e,r,[]):Rs(n,e,i,r);t.reset(o,Oo),t.notifyOnChanges()}return!0}return!1}function Ms(t,e,n,r){const i=Ut();if(i.firstCreatePass){const o=Vt();(function(t,e,n){null===t.queries&&(t.queries=new js),t.queries.track(new ks(e,n))})(i,new As(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Is(4==(4&n));Zr(t,e,r,r.destroy),null===e[19]&&(e[19]=new xs),e[19].queries.push(new Cs(r))}(i,Ft(),n)}function Fs(){return t=Ft(),e=Qt(),t[19].queries[e].queryList;var t,e}function Us(t,e){return t.queries.getByIndex(e)}function Vs(t=A.Default){const e=Jo(!0);if(null!=e||t&A.Optional)return e;b("ChangeDetectorRef")}const qs=new Ge("Application Initializer");let Bs=(()=>{class t{constructor(t){this.appInits=t,this.resolve=wo,this.reject=wo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Yi(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(sn(qs,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Hs=new Ge("AppId"),zs={provide:Hs,useFactory:function(){return`${Gs()}${Gs()}${Gs()}`},deps:[]};function Gs(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ks=new Ge("Platform Initializer"),Ws=new Ge("Platform ID"),$s=new Ge("appBootstrapListener");let Qs=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Js=new Ge("LocaleId"),Ys=new Ge("DefaultCurrencyCode");class Xs{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Zs=function(t){return new Es(t)},ta=Zs,ea=function(t){return Promise.resolve(Zs(t))},na=function(t){const e=Zs(t),n=or(at(t).declarations).reduce((t,e)=>{const n=st(e);return n&&t.push(new vs(n)),t},[]);return new Xs(e,n)},ra=na,ia=function(t){return Promise.resolve(na(t))};let oa=(()=>{class t{constructor(){this.compileModuleSync=ta,this.compileModuleAsync=ea,this.compileModuleAndAllComponentsSync=ra,this.compileModuleAndAllComponentsAsync=ia}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const sa=(()=>Promise.resolve(0))();function aa(t){"undefined"==typeof Zone?sa.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ua{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Os(!1),this.onMicrotaskEmpty=new Os(!1),this.onStable=new Os(!1),this.onError=new Os(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ha(t),la(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ha(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return fa(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),da(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return fa(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),da(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,ha(t),la(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ua.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ua.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,ca,wo,wo);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const ca={};function la(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ha(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function fa(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function da(t){t._nesting--,la(t)}class pa{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Os,this.onMicrotaskEmpty=new Os,this.onStable=new Os,this.onError=new Os}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let ga=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ua.assertNotInAngularZone(),aa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())aa(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(sn(ua))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})(),ya=(()=>{class t{constructor(){this._applications=new Map,wa.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return wa.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();class ma{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function va(t){wa=t}let ba,wa=new ma,_a=!0,Ea=!1;function Sa(){return Ea=!0,_a}function Oa(){if(Ea)throw new Error("Cannot enable prod mode after platform setup.");_a=!1}const Ta=new Ge("AllowMultipleToken");class Ia{constructor(t,e){this.name=t,this.token=e}}function Ca(t,e,n=[]){const r=`Platform: ${e}`,i=new Ge(r);return(e=[])=>{let o=xa();if(!o||o.injector.get(Ta,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Ii,useValue:"platform"});!function(t){if(ba&&!ba.destroyed&&!ba.injector.get(Ta,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ba=t.get(Aa);const e=t.get(Ks,null);e&&e.forEach(t=>t())}(Ui.create({providers:t,name:r}))}return function(t){const e=xa();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function xa(){return ba&&!ba.destroyed?ba:null}let Aa=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new pa:("zone.js"===t?void 0:t)||new ua({enableLongStackTrace:Sa(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:ua,useValue:n}];return n.run(()=>{const e=Ui.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(nr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Na(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Yi(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Bs);return t.runInitializers(),t.donePromise.then(()=>(yo(i.injector.get(Js,po)||po),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=ja({},e);return function(t,e,n){const r=new Es(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(ka);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${h(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(sn(Ui))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function ja(t,e){return Array.isArray(e)?e.reduce(ja,t):Object.assign(Object.assign({},t),e)}let ka=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ua.assertNotInAngularZone(),aa(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ua.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(l,h.pipe(t=>Object(u.a)()(Object(a.a)(c)(t))))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof mo?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(os),i=n.create(Ui.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(ga,null),a=s&&i.injector.get(ya);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Na(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Na(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get($s,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(sn(ua),sn(Ui),sn(nr),sn(bo),sn(Bs))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Na(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Da{}class Ra{}const Pa={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let La=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Pa}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Ma(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Ma(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(sn(oa),sn(Ra,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Ma(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Fa=function(t){return null},Ua=Ca(null,"core",[{provide:Ws,useValue:"unknown"},{provide:Aa,deps:[Ui]},{provide:ya,deps:[]},{provide:Qs,deps:[]}]),Va=[{provide:ka,useClass:ka,deps:[ua,Ui,nr,bo,Bs]},{provide:ms,deps:[ua],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Bs,useClass:Bs,deps:[[new ln,qs]]},{provide:oa,useClass:oa,deps:[]},zs,{provide:Bo,useFactory:function(){return Xo},deps:[]},{provide:zo,useFactory:function(){return Zo},deps:[]},{provide:Js,useFactory:function(t){return yo(t=t||"undefined"!=typeof $localize&&$localize.locale||po),t},deps:[[new cn(Js),new ln,new hn]]},{provide:Ys,useValue:"USD"}];let qa=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(sn(ka))},t.\u0275mod=et({type:t}),t.\u0275inj=_({providers:Va}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},oB13:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("EQ5u");function i(t,e){return function(n){let i;if(i="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new o(i,e));const s=Object.create(n,r.b);return s.source=n,s.subjectFactory=i,s}}class o{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:n}=this,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i}}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return E}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return S}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return s}),n.d(e,"h",function(){return I}),n.d(e,"i",function(){return c}),n.d(e,"j",function(){return f}),n.d(e,"k",function(){return d}),n.d(e,"l",function(){return g}),n.d(e,"m",function(){return y}),n.d(e,"n",function(){return l}),n.d(e,"o",function(){return h}),n.d(e,"p",function(){return p}),n.d(e,"q",function(){return m});var r=n("mrSG"),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return c().indexOf("Electron/")>=0}function y(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m(){return c().indexOf("MSAppHost/")>=0}var v=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,b.prototype.create),o}return Object(r.c)(e,t),e}(Error),b=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?w(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new v(i,a,r);return u},t}();function w(t,e){return t.replace(_,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var _=/\{\$([^}]+)}/g;function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function S(t,e){var n=new O(t,e);return n.subscribe.bind(n)}var O=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function T(){}function I(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return I}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return O}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),w=new u.P("6.1.5");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&S("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{Object(u.U)()&&"undefined"!=typeof console&&console[t](...e)};function O(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:_,deps:[v,u.A,[new u.B,b]]};let I=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Jb(u.C))},t.\u0275mod=u.Eb({type:t}),t.\u0275inj=u.Db({providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.f)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.6.8",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.g)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.g)(e,t)},createSubscribe:s.e,ErrorFactory:s.b,deepExtend:s.g}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.j)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.o)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.27",void 0),t.registerVersion("fire-js","")}(w),e.a=w},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Cb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Jb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(s))},t.\u0275prov=Object(r.Cb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Jb)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Cb)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Jb)(s).location;return new b(Object(r.Jb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a),r.Jb(v,8))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a),r.Jb(v,8))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(S(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,S(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(y),r.Jb(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Cb)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new _(Object(r.Jb)(y),Object(r.Jb)(a))}function S(t){return t.replace(/\/index.html$/,"")}var O=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const T=r.mb;class I{}let C=(()=>{class t extends I{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(T(e||this.locale)(t)){case O.Zero:return"zero";case O.One:return"one";case O.Two:return"two";case O.Few:return"few";case O.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.v))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();function x(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({providers:[{provide:I,useClass:C}]}),t})();function j(t){return"browser"===t}function k(t){return"server"===t}let N=(()=>{class t{}return t.\u0275prov=Object(r.Cb)({token:t,providedIn:"root",factory:()=>new D(Object(r.Jb)(s),window)}),t})();class D{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=R(this.window.history)||R(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function R(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class P extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new P,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=M||(M=document.querySelector("base"),M)?M.getAttribute("href"):null;return null==e?null:(n=e,L||(L=document.createElement("a")),L.setAttribute("href",n),"/"===L.pathname.charAt(0)?L.pathname:"/"+L.pathname);var n}resetBaseElement(){M=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return x(document.cookie,t)}}let L,M=null;const F=new r.r("TRANSITION_ID"),U=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[F,s,r.s],multi:!0}];class V{static init(){Object(r.W)(new V)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const q=new r.r("EventManagerPlugins");let B=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(q),r.Jb(r.A))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();class H{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let z=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),G=(()=>{class t extends z{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(K),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(K))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();function K(t){o().remove(t)}const W={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},$=/%COMP%/g;function Q(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Q(t,i,n):(i=i.replace($,t),n.push(i))}return n}function J(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Y=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new X(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Z(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new tt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Q(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(B),r.Jb(G),r.Jb(r.c))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();class X{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(W[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=W[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=W[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,J(n)):this.eventManager.addEventListener(t,e,J(n))}}class Z extends X{constructor(t,e,n,r){super(t),this.component=n;const i=Q(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace($,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace($,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class tt extends X{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Q(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let et=(()=>{class t extends H{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const nt=["alt","control","meta","shift"],rt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},it={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ot={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let st=(()=>{class t extends H{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(nt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&it.hasOwnProperty(e)&&(e=it[e]))}return rt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),nt.forEach(r=>{r!=n&&(0,ot[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const at=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){P.makeCurrent(),V.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],ut=Object(r.S)(r.V,"browser",at),ct=[[],{provide:r.Y,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:q,useClass:et,multi:!0,deps:[s,r.A,r.C]},{provide:q,useClass:st,multi:!0,deps:[s]},[],{provide:Y,useClass:Y,deps:[B,G,r.c]},{provide:r.F,useExisting:Y},{provide:z,useExisting:G},{provide:G,useClass:G,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:B,useClass:B,deps:[q,r.A]},[]];let lt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:F,useExisting:r.c},U]}}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(t,12))},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({providers:ct,imports:[A,r.f]}),t})();"undefined"!=typeof window&&window;var ht=n("Cfvw"),ft=n("LRne"),dt=n("XNiG"),pt=n("9ppp");class gt extends dt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new pt.a;return this._value}next(t){super.next(this._value=t)}}var yt=n("z+Ro"),mt=n("DH7j"),vt=n("7o/Q");class bt extends vt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class wt extends vt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var _t=n("SeVD"),Et=n("HDdC");function St(t,e,n,r,i=new wt(t,n,r)){if(!i.closed)return e instanceof Et.a?e.subscribe(i):Object(_t.a)(e)(i)}var Ot=n("yCtX");const Tt={};class It{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ct(t,this.resultSelector))}}class Ct extends bt{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Tt),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(St(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Tt?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const xt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var At=n("bHdf");function jt(...t){return Object(At.a)(1)(Object(ft.a)(...t))}var kt=n("EY2u");function Nt(t){return new Et.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(ht.a)(n):Object(kt.b)()).subscribe(e)})}var Dt=n("EQ5u"),Rt=n("lJxs"),Pt=n("zx2A");function Lt(t,e){return"function"==typeof e?n=>n.pipe(Lt((n,r)=>Object(ht.a)(t(n,r)).pipe(Object(Rt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Mt(t))}class Mt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Ft(t,this.project))}}class Ft extends Pt.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Pt.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Pt.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Ut=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Vt(t){return e=>0===t?Object(kt.b)():e.lift(new qt(t))}class qt{constructor(t){if(this.total=t,this.total<0)throw new Ut}call(t,e){return e.subscribe(new Bt(t,this.total))}}class Bt extends vt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ht(...t){const e=t[t.length-1];return Object(yt.a)(e)?(t.pop(),n=>jt(t,n,e)):e=>jt(t,e)}function zt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Gt(t,e,n))}}class Gt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Kt(t,this.accumulator,this.seed,this.hasSeed))}}class Kt extends vt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Wt(t,e){return function(n){return n.lift(new $t(t,e))}}class $t{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Qt(t,this.predicate,this.thisArg))}}class Qt extends vt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function Jt(t){return function(e){const n=new Yt(t),r=e.lift(n);return n.caught=r}}class Yt{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Xt(t,this.selector,this.caught))}}class Xt extends Pt.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Pt.a(this);this.add(r);const i=Object(Pt.c)(n,r);i!==r&&this.add(i)}}}var Zt=n("5+tZ");function te(t,e){return Object(Zt.a)(t,e,1)}function ee(t){return function(e){return 0===t?Object(kt.b)():e.lift(new ne(t))}}class ne{constructor(t){if(this.total=t,this.total<0)throw new Ut}call(t,e){return e.subscribe(new re(t,this.total))}}class re extends vt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ie(t=ae){return e=>e.lift(new oe(t))}class oe{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new se(t,this.errorFactory))}}class se extends vt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(zb){t=zb}this.destination.error(t)}}}function ae(){return new xt}function ue(t=null){return e=>e.lift(new ce(t))}class ce{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new le(t,this.defaultValue))}}class le extends vt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var he=n("SpAZ");function fe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Wt((e,n)=>t(e,n,r)):he.a,Vt(1),n?ue(e):ie(()=>new xt))}var de=n("vkgz"),pe=n("x+ZX"),ge=n("quSY");class ye{constructor(t){this.callback=t}call(t,e){return e.subscribe(new me(t,this.callback))}}class me extends vt.a{constructor(t,e){super(t),this.add(new ge.a(e))}}class ve{constructor(t,e){this.id=t,this.url=e}}class be extends ve{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class we extends ve{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _e extends ve{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ee extends ve{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Se extends ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oe extends ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Te extends ve{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ie extends ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ce extends ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xe{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ae{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class je{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ke{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ne{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class De{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Re{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pe="primary";class Le{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Me(t){return new Le(t)}function Fe(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Ue(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ve(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!qe(t[i],e[i]))return!1;return!0}function qe(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Be(t){return Array.prototype.concat.apply([],t)}function He(t){return t.length>0?t[t.length-1]:null}function ze(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ge(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(ht.a)(Promise.resolve(t)):Object(ft.a)(t)}function Ke(t,e,n){return n?function(t,e){return Ve(t,e)}(t.queryParams,e.queryParams)&&We(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qe(t[n],e[n]))}(t.queryParams,e.queryParams)&&$e(t.root,e.root)}function We(t,e){if(!Ze(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!We(t.children[n],e.children[n]))return!1}return!0}function $e(t,e){return Qe(t,e,e.segments)}function Qe(t,e,n){if(t.segments.length>n.length)return!!Ze(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Ze(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!$e(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Ze(t.segments,r)&&!!t.children.primary&&Qe(t.children.primary,e,i)}}class Je{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Me(this.queryParams)),this._queryParamMap}toString(){return nn.serialize(this)}}class Ye{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ze(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rn(this)}}class Xe{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Me(this.parameters)),this._parameterMap}toString(){return hn(this)}}function Ze(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class tn{}class en{parse(t){const e=new yn(t);return new Je(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${on(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${an(e)}=${an(t)}`).join("&"):`${an(e)}=${an(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const nn=new en;function rn(t){return t.segments.map(t=>hn(t)).join("/")}function on(t,e){if(!t.hasChildren())return rn(t);if(e){const e=t.children.primary?on(t.children.primary,!1):"",n=[];return ze(t.children,(t,e)=>{e!==Pe&&n.push(`${e}:${on(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return ze(t.children,(t,r)=>{r===Pe&&(n=n.concat(e(t,r)))}),ze(t.children,(t,r)=>{r!==Pe&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Pe?[on(t.children.primary,!1)]:[`${n}:${on(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${rn(t)}/${e[0]}`:`${rn(t)}/(${e.join("//")})`}}function sn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function an(t){return sn(t).replace(/%3B/gi,";")}function un(t){return sn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cn(t){return decodeURIComponent(t)}function ln(t){return cn(t.replace(/\+/g,"%20"))}function hn(t){return`${un(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${un(t)}=${un(e[t])}`).join("")}`;var e}const fn=/^[^\/()?;=#]+/;function dn(t){const e=t.match(fn);return e?e[0]:""}const pn=/^[^=?&#]+/,gn=/^[^?&#]+/;class yn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ye([],{}):new Ye([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Ye(t,e)),n}parseSegment(){const t=dn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Xe(cn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=dn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=dn(this.remaining);t&&(n=t,this.capture(n))}t[cn(e)]=cn(n)}parseQueryParam(t){const e=function(t){const e=t.match(pn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(gn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=ln(e),i=ln(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=dn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Pe);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Ye([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class mn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=vn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=vn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=bn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return bn(t,this._root).map(t=>t.value)}}function vn(t,e){if(t===e.value)return e;for(const n of e.children){const e=vn(t,n);if(e)return e}return null}function bn(t,e){if(t===e.value)return[e];for(const n of e.children){const r=bn(t,n);if(r.length)return r.unshift(e),r}return[]}class wn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function _n(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class En extends mn{constructor(t,e){super(t),this.snapshot=e,xn(this,t)}toString(){return this.snapshot.toString()}}function Sn(t,e){const n=function(t,e){const n=new In([],{},{},"",{},Pe,e,null,t.root,-1,{});return new Cn("",new wn(n,[]))}(t,e),r=new gt([new Xe("",{})]),i=new gt({}),o=new gt({}),s=new gt({}),a=new gt(""),u=new On(r,i,s,a,o,Pe,e,n.root);return u.snapshot=n.root,new En(new wn(u,[]),n)}class On{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Rt.a)(t=>Me(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Rt.a)(t=>Me(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Tn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class In{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Me(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Me(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Cn extends mn{constructor(t,e){super(e),this.url=t,xn(this,e)}toString(){return An(this._root)}}function xn(t,e){e.value._routerState=t,e.children.forEach(e=>xn(t,e))}function An(t){const e=t.children.length>0?` { ${t.children.map(An).join(", ")} } `:"";return`${t.value}${e}`}function jn(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ve(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Ve(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ve(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Ve(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function kn(t,e){return Ve(t.params,e.params)&&function(t,e){return Ze(t,e)&&t.every((t,n)=>Ve(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||kn(t.parent,e.parent))}function Nn(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Nn(t,e,r);return Nn(t,e)})}(t,e,n);return new wn(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Dn(e,t),t}}const n=new On(new gt((r=e.value).url),new gt(r.params),new gt(r.queryParams),new gt(r.fragment),new gt(r.data),r.outlet,r.component,r),i=e.children.map(e=>Nn(t,e));return new wn(n,i)}var r}function Dn(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Dn(t.children[n],e.children[n])}function Rn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Pn(t){return"object"==typeof t&&null!=t&&t.outlets}function Ln(t,e,n,r,i){let o={};return r&&ze(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Je(n.root===t?e:Mn(n.root,t,e),o,i)}function Mn(t,e,n){const r={};return ze(t.children,(t,i)=>{r[i]=t===e?n:Mn(t,e,n)}),new Ye(t.segments,r)}class Fn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Rn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Pn);if(r&&r!==He(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Un{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Vn(t,e,n){if(t||(t=new Ye([],{})),0===t.segments.length&&t.hasChildren())return qn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Pn(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Gn(a,u,e))return o;r+=2}else{if(!Gn(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Ye(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Ye(t.segments.slice(r.pathIndex),t.children),qn(e,0,i)}return r.match&&0===i.length?new Ye(t.segments,{}):r.match&&!t.hasChildren()?Bn(t,e,n):r.match?qn(t,0,i):Bn(t,e,n)}function qn(t,e,n){if(0===n.length)return new Ye(t.segments,{});{const r=function(t){return Pn(t[0])?t[0].outlets:{[Pe]:t}}(n),i={};return ze(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Vn(t.children[r],e,n))}),ze(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Ye(t.segments,i)}}function Bn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Pn(o)){const t=Hn(o.outlets);return new Ye(r,t)}if(0===i&&Rn(n[0])){r.push(new Xe(t.segments[e].path,zn(n[0]))),i++;continue}const s=Pn(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Rn(a)?(r.push(new Xe(s,zn(a))),i+=2):(r.push(new Xe(s,{})),i++)}return new Ye(r,{})}function Hn(t){const e={};return ze(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Bn(new Ye([],{}),0,t))}),e}function zn(t){const e={};return ze(t,(t,n)=>e[n]=`${t}`),e}function Gn(t,e,n){return t==n.path&&Ve(e,n.parameters)}class Kn{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),jn(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=_n(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),ze(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=_n(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=_n(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new De(t.value.snapshot))}),t.children.length&&this.forwardEvent(new ke(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(jn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Wn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Wn(t){jn(t.value),t.children.forEach(Wn)}class $n{constructor(t,e){this.routes=t,this.module=e}}function Qn(t){return"function"==typeof t}function Jn(t){return t instanceof Je}const Yn=Symbol("INITIAL_VALUE");function Xn(){return Lt(t=>function(...t){let e,n;return Object(yt.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(mt.a)(t[0])&&(t=t[0]),Object(Ot.a)(t,n).lift(new It(e))}(t.map(t=>t.pipe(Vt(1),Ht(Yn)))).pipe(zt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Yn)return t;if(r===Yn&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Jn(r))return r}return t},t)},Yn),Wt(t=>t!==Yn),Object(Rt.a)(t=>Jn(t)?t:!0===t),Vt(1)))}let Zn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ab({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Hb(0,"router-outlet")},directives:function(){return[Gr]},encapsulation:2}),t})();function tr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];er(r,nr(e,r))}}function er(t,e){t.children&&tr(t.children,e)}function nr(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function rr(t){const e=t.children&&t.children.map(rr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Pe&&(n.component=Zn),n}function ir(t){return t.outlet||Pe}function or(t,e){const n=t.filter(t=>ir(t)===e);return n.push(...t.filter(t=>ir(t)!==e)),n}const sr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ar(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},sr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ue)(n,t,e);if(!i)return Object.assign({},sr);const o={};ze(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function ur(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>cr(t,e,n)&&ir(n)!==Pe)}(t,n,r)){const i=new Ye(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&ir(o)!==Pe){const n=new Ye([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[ir(o)]=n}return i}(t,e,r,new Ye(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>cr(t,e,n))}(t,n,r)){const o=new Ye(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(cr(t,n,a)&&!i[ir(a)]){const n=new Ye([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[ir(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Ye(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function cr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function lr(t,e,n,r){return!!(ir(t)===r||r!==Pe&&cr(e,n,t))&&("**"===t.path||ar(e,t,n).matched)}function hr(t,e,n){return 0===e.length&&!t.children[n]}class fr{constructor(t){this.segmentGroup=t||null}}class dr{constructor(t){this.urlTree=t}}function pr(t){return new Et.a(e=>e.error(new fr(t)))}function gr(t){return new Et.a(e=>e.error(new dr(t)))}function yr(t){return new Et.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class mr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=ur(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ye(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Pe).pipe(Object(Rt.a)(t=>this.createUrlTree(vr(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Jt(t=>{if(t instanceof dr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof fr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Pe).pipe(Object(Rt.a)(e=>this.createUrlTree(vr(e),t.queryParams,t.fragment))).pipe(Jt(t=>{if(t instanceof fr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Ye([],{[Pe]:t}):t;return new Je(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Rt.a)(t=>new Ye([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(ht.a)(r).pipe(te(r=>{const i=n.children[r],o=or(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(Rt.a)(t=>({segment:t,outlet:r})))}),zt((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Wt((e,n)=>t(e,n,r)):he.a,ee(1),n?ue(e):ie(()=>new xt))}())}expandSegment(t,e,n,r,i,o){return Object(ht.a)(n).pipe(te(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Jt(t=>{if(t instanceof fr)return Object(ft.a)(null);throw t}))),fe(t=>!!t),Jt((t,n)=>{if(t instanceof xt||"EmptyError"===t.name){if(hr(e,r,i))return Object(ft.a)(new Ye([],{}));throw new fr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return lr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):pr(e):pr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?gr(i):this.lineralizeSegments(n,i).pipe(Object(Zt.a)(n=>{const i=new Ye(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=ar(e,r,i);if(!s)return pr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?gr(l):this.lineralizeSegments(r,l).pipe(Object(Zt.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(ft.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(Rt.a)(t=>(n._loadedConfig=t,new Ye(r,{})))):Object(ft.a)(new Ye(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=ar(e,n,r);if(!o)return pr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Zt.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=ur(e,s,u,o),l=new Ye(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(Rt.a)(t=>new Ye(s,t)));if(0===o.length&&0===c.length)return Object(ft.a)(new Ye(s,{}));const h=ir(n)===i;return this.expandSegment(r,l,o,c,h?Pe:i,!0).pipe(Object(Rt.a)(t=>new Ye(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(ft.a)(new $n(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(ft.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Zt.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Rt.a)(t=>(e._loadedConfig=t,t))):function(t){return new Et.a(e=>e.error(Fe(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(ft.a)(new $n([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(ft.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Qn(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Qn(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Ge(o)});return Object(ft.a)(i).pipe(Xn(),Object(de.a)(t=>{if(!Jn(t))return;const e=Fe(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Rt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(ft.a)(n);if(r.numberOfChildren>1||!r.children.primary)return yr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Je(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ze(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return ze(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Ye(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function vr(t){const e={};for(const n of Object.keys(t.children)){const r=vr(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Ye(t.segments.concat(e.segments),e.children)}return t}(new Ye(t.segments,e))}class br{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class wr{constructor(t,e){this.component=t,this.route=e}}function _r(t,e,n){const r=t._root;return Sr(r,e?e._root:null,n,[r.value])}function Er(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Sr(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=_n(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ze(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ze(t.url,e.url)||!Ve(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kn(t,e)||!Ve(t.queryParams,e.queryParams);case"paramsChange":default:return!kn(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new br(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Sr(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new wr(a.outlet.component,s))}else s&&Or(e,a,i),i.canActivateChecks.push(new br(r)),Sr(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),ze(o,(t,e)=>Or(t,n.getContext(e),i)),i}function Or(t,e,n){const r=_n(t),i=t.value;ze(r,(t,r)=>{Or(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new wr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Tr{}function Ir(t){return new Et.a(e=>e.error(t))}class Cr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=ur(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Pe);if(null===e)return null;const n=new In([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pe,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new wn(n,e),i=new Cn(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Tn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=or(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Ar(n);return r.sort((t,e)=>t.value.outlet===Pe?-1:e.value.outlet===Pe?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return hr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!lr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?He(n).parameters:{};i=new In(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Nr(t),ir(t),t.component,t,jr(e),kr(e)+n.length,Dr(t))}else{const r=ar(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new In(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Nr(t),ir(t),t.component,t,jr(e),kr(e)+o.length,Dr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=ur(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new wn(i,t)]}if(0===a.length&&0===c.length)return[new wn(i,[])];const l=ir(t)===r,h=this.processSegment(a,u,c,l?Pe:r);return null===h?null:[new wn(i,h)]}}function xr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ar(t){const e=[],n=new Set;for(const r of t){if(!xr(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Ar(r.children);e.push(new wn(r.value,t))}return e.filter(t=>!n.has(t))}function jr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function kr(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Nr(t){return t.data||{}}function Dr(t){return t.resolve||{}}function Rr(t){return Lt(e=>{const n=t(e);return n?Object(ht.a)(n).pipe(Object(Rt.a)(()=>e)):Object(ft.a)(e)})}class Pr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Lr=new r.r("ROUTES");class Mr{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(Rt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new $n(Be(i.injector.get(Lr,void 0,r.q.Self|r.q.Optional)).map(rr),i)}),Jt(t=>{throw e._loader$=void 0,t}));return e._loader$=new Dt.a(n,()=>new dt.a).pipe(Object(pe.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(ht.a)(this.loader.load(t)):Ge(t()).pipe(Object(Zt.a)(t=>t instanceof r.w?Object(ft.a)(t):Object(ht.a)(this.compiler.compileModuleAsync(t))))}}class Fr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ur,this.attachRef=null}}class Ur{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Fr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Vr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function qr(t){throw t}function Br(t,e,n){return e.parse("/")}function Hr(t,e){return Object(ft.a)(null)}let zr=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new dt.a,this.errorHandler=qr,this.malformedUriErrorHandler=Br,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Hr,afterPreactivation:Hr},this.urlHandlingStrategy=new Vr,this.routeReuseStrategy=new Pr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.X);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Je(new Ye([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Mr(s,a,t=>this.triggerEvent(new xe(t)),t=>this.triggerEvent(new Ae(t))),this.routerState=Sn(this.currentUrlTree,this.rootComponentType),this.transitions=new gt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Wt(t=>0!==t.id),Object(Rt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Lt(t=>{let n=!1,r=!1;return Object(ft.a)(t).pipe(Object(de.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Lt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(ft.a)(t).pipe(Lt(t=>{const n=this.transitions.getValue();return e.next(new be(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?kt.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Lt(t=>function(t,e,n,r,i){return new mr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Rt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(de.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Zt.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Cr(t,e,n,r,i,o).recognize();return null===s?Ir(new Tr):Object(ft.a)(s)}catch(zb){return Ir(zb)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Rt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(de.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Se(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new be(n,this.serializeUrl(r),i,o);e.next(a);const u=Sn(r,this.rootComponentType).snapshot;return Object(ft.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),kt.a}),Rr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(de.a)(t=>{const e=new Oe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Rt.a)(t=>Object.assign(Object.assign({},t),{guards:_r(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Zt.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(ft.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(ht.a)(t).pipe(Object(Zt.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(ft.a)(!0);const s=o.map(o=>{const s=Er(o,e,i);let a;if(function(t){return t&&Qn(t.canDeactivate)}(s))a=Ge(s.canDeactivate(t,e,n,r));else{if(!Qn(s))throw new Error("Invalid CanDeactivate guard");a=Ge(s(t,e,n,r))}return a.pipe(fe())});return Object(ft.a)(s).pipe(Xn())}(t.component,t.route,n,e,r)),fe(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Zt.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(ht.a)(e).pipe(te(e=>jt(function(t,e){return null!==t&&e&&e(new je(t)),Object(ft.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Ne(t)),Object(ft.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Nt(()=>{const i=e.guards.map(i=>{const o=Er(i,e.node,n);let s;if(function(t){return t&&Qn(t.canActivateChild)}(o))s=Ge(o.canActivateChild(r,t));else{if(!Qn(o))throw new Error("Invalid CanActivateChild guard");s=Ge(o(r,t))}return s.pipe(fe())});return Object(ft.a)(i).pipe(Xn())}));return Object(ft.a)(i).pipe(Xn())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(ft.a)(!0);const i=r.map(r=>Nt(()=>{const i=Er(r,e,n);let o;if(function(t){return t&&Qn(t.canActivate)}(i))o=Ge(i.canActivate(e,t));else{if(!Qn(i))throw new Error("Invalid CanActivate guard");o=Ge(i(e,t))}return o.pipe(fe())}));return Object(ft.a)(i).pipe(Xn())}(t,e.route,n))),fe(t=>!0!==t,!0))}(r,o,t,e):Object(ft.a)(n)),Object(Rt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(de.a)(t=>{if(Jn(t.guardsResult)){const e=Fe(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Te(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Wt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new _e(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Rr(t=>{if(t.guards.canActivateChecks.length)return Object(ft.a)(t).pipe(Object(de.a)(t=>{const e=new Ie(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Lt(t=>{let n=!1;return Object(ft.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Zt.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(ft.a)(t);let o=0;return Object(ht.a)(n).pipe(te(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(ft.a)({});const o={};return Object(ht.a)(i).pipe(Object(Zt.a)(i=>function(t,e,n,r){const i=Er(t,e,r);return Ge(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(de.a)(t=>{o[i]=t}))),ee(1),Object(Zt.a)(()=>Object.keys(o).length===i.length?Object(ft.a)(o):kt.a))}(t._resolve,t,e,r).pipe(Object(Rt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Tn(t,n).resolve),null)))}(t.route,e,r,i)),Object(de.a)(()=>o++),ee(1),Object(Zt.a)(e=>o===n.length?Object(ft.a)(t):kt.a))})),Object(de.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new _e(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(de.a)(t=>{const e=new Ce(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Rr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Rt.a)(t=>{const e=function(t,e,n){const r=Nn(t,e._root,n?n._root:void 0);return new En(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(de.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Rt.a)(t=>(new Kn(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(de.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new _e(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new ye(i))),Jt(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Jn(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new _e(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ee(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(ph){t.reject(ph)}}var i;return kt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){tr(t),this.config=t.map(rr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Ln(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Fn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return ze(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Fn(n,e,r)}(n);if(o.toRoot())return Ln(e.root,new Ye([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Un(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Un(t,t===e.root,0)}const r=Rn(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Un(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?qn(s.segmentGroup,s.index,o.commands):Vn(s.segmentGroup,s.index,o.commands);return Ln(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Jn(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(zb){e=this.malformedUriErrorHandler(zb,this.urlSerializer,t)}return e}isActive(t,e){if(Jn(t))return Ke(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Ke(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new we(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.N),r.Jb(tn),r.Jb(Ur),r.Jb(_),r.Jb(r.s),r.Jb(r.x),r.Jb(r.i),r.Jb(void 0))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),Gr=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Pe,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Kr(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Ur),r.Gb(r.Q),r.Gb(r.j),r.Kb("name"),r.Gb(r.h))},t.\u0275dir=r.Bb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Kr{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===On?this.route:t===Ur?this.childContexts:this.parent.get(t,e)}}class Wr{}class $r{preload(t,e){return Object(ft.a)(null)}}let Qr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Mr(e,n,e=>t.triggerEvent(new xe(e)),e=>t.triggerEvent(new Ae(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Wt(t=>t instanceof we),te(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(ht.a)(n).pipe(Object(At.a)(),Object(Rt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(ft.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(Zt.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(zr),r.Jb(r.x),r.Jb(r.i),r.Jb(r.s),r.Jb(Wr))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),Jr=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof be?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof we&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Re&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Re(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(zr),r.Jb(N),r.Jb(void 0))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const Yr=new r.r("ROUTER_CONFIGURATION"),Xr=new r.r("ROUTER_FORROOT_GUARD"),Zr=[_,{provide:tn,useClass:en},{provide:zr,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new zr(null,t,e,n,r,i,s,Be(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[tn,Ur,_,r.s,r.x,r.i,Lr,Yr,[class{},new r.B],[class{},new r.B]]},Ur,{provide:On,useFactory:function(t){return t.routerState.root},deps:[zr]},{provide:r.x,useClass:r.K},Qr,$r,class{preload(t,e){return e().pipe(Jt(()=>Object(ft.a)(null)))}},{provide:Yr,useValue:{enableTracing:!1}}];function ti(){return new r.z("Router",zr)}let ei=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Zr,oi(e),{provide:Xr,useFactory:ii,deps:[[zr,new r.B,new r.J]]},{provide:Yr,useValue:n||{}},{provide:y,useFactory:ri,deps:[a,[new r.p(v),new r.B],Yr]},{provide:Jr,useFactory:ni,deps:[zr,N,Yr]},{provide:Wr,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:$r},{provide:r.z,multi:!0,useFactory:ti},[si,{provide:r.d,multi:!0,useFactory:ai,deps:[si]},{provide:ci,useFactory:ui,deps:[si]},{provide:r.b,multi:!0,useExisting:ci}]]}}static forChild(e){return{ngModule:t,providers:[oi(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Xr,8),r.Jb(zr,8))},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({}),t})();function ni(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Jr(t,e,n)}function ri(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function ii(t){return"guarded"}function oi(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Lr,multi:!0,useValue:t}]}let si=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new dt.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(zr),r=this.injector.get(Yr);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(ft.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Yr),n=this.injector.get(Qr),i=this.injector.get(Jr),o=this.injector.get(zr),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();function ai(t){return t.appInitializer.bind(t)}function ui(t){return t.bootstrapListener.bind(t)}const ci=new r.r("Router Initializer"),li=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ab({type:t,selectors:[["app-home"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})()}];let hi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({imports:[[ei.forRoot(li)],ei]}),t})(),fi=(()=>{class t{constructor(){this.title="danieleciulli"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ab({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r.Hb(0,"router-outlet")},directives:[Gr],styles:[""]}),t})();var di=n("z6cu"),pi=n("n6bG");function gi(t,e,n,r){return Object(pi.a)(n)&&(r=n,n=void 0),r?gi(t,e,n).pipe(Object(Rt.a)(t=>Object(mt.a)(t)?r(...t):r(t))):new Et.a(r=>{yi(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function yi(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)yi(t[o],e,n,r,i)}r.add(o)}var mi=n("KqfI");const vi=new Et.a(mi.a);var bi=n("VRyK"),wi=n("oB13"),_i=n("D0XW"),Ei=n("WMd4");class Si{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new Oi(t,this.delay,this.scheduler))}}class Oi extends vt.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(Oi.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new Ti(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(Ei.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(Ei.a.createComplete()),this.unsubscribe()}}class Ti{constructor(t,e){this.time=t,this.notification=e}}const Ii="Service workers are disabled or not supported by this browser";class Ci{constructor(t){if(this.serviceWorker=t,t){const e=gi(t,"controllerchange").pipe(Object(Rt.a)(()=>t.controller)),n=jt(Nt(()=>Object(ft.a)(t.controller)),e);this.worker=n.pipe(Wt(t=>!!t)),this.registration=this.worker.pipe(Lt(()=>t.getRegistration()));const r=gi(t,"message").pipe(Object(Rt.a)(t=>t.data)).pipe(Wt(t=>t&&t.type)).pipe(Object(wi.a)(new dt.a));r.connect(),this.events=r}else this.worker=this.events=this.registration=Nt(()=>Object(di.a)(new Error("Service workers are disabled or not supported by this browser")))}postMessage(t,e){return this.worker.pipe(Vt(1),Object(de.a)(n=>{n.postMessage(Object.assign({action:t},e))})).toPromise().then(()=>{})}postMessageWithStatus(t,e,n){const r=this.waitForStatus(n),i=this.postMessage(t,e);return Promise.all([r,i]).then(()=>{})}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){return this.events.pipe(Wt(e=>e.type===t))}nextEventOfType(t){return this.eventsOfType(t).pipe(Vt(1))}waitForStatus(t){return this.eventsOfType("STATUS").pipe(Wt(e=>e.nonce===t),Vt(1),Object(Rt.a)(t=>{if(!t.status)throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let xi=(()=>{class t{constructor(t){if(this.sw=t,this.subscriptionChanges=new dt.a,!t.isEnabled)return this.messages=vi,this.notificationClicks=vi,void(this.subscription=vi);this.messages=this.sw.eventsOfType("PUSH").pipe(Object(Rt.a)(t=>t.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Object(Rt.a)(t=>t.data)),this.pushManager=this.sw.registration.pipe(Object(Rt.a)(t=>t.pushManager));const e=this.pushManager.pipe(Lt(t=>t.getSubscription()));this.subscription=Object(bi.a)(e,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(Ii));const e={userVisibleOnly:!0};let n=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(n.length));for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return e.applicationServerKey=r,this.pushManager.pipe(Lt(t=>t.subscribe(e)),Vt(1)).toPromise().then(t=>(this.subscriptionChanges.next(t),t))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Vt(1),Lt(t=>{if(null===t)throw new Error("Not subscribed to push notifications.");return t.unsubscribe().then(t=>{if(!t)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Ii))}decodeBase64(t){return atob(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Ci))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),Ai=(()=>{class t{constructor(t){if(this.sw=t,!t.isEnabled)return this.available=vi,this.activated=vi,void(this.unrecoverable=vi);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ii));const t=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ii));const t=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:t},t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Ci))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();class ji{}const ki=new r.r("NGSW_REGISTER_SCRIPT");function Ni(t,e,n,i){return()=>{if(!j(i)||!("serviceWorker"in navigator)||!1===n.enabled)return;let o;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)o=n.registrationStrategy();else{const[e,...r]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(e){case"registerImmediately":o=Object(ft.a)(null);break;case"registerWithDelay":o=Di(+r[0]||0);break;case"registerWhenStable":o=r[0]?Object(bi.a)(Ri(t),Di(+r[0])):Ri(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(r.A).runOutsideAngular(()=>o.pipe(Vt(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(t=>console.error("Service worker registration failed with:",t))))}}function Di(t){return Object(ft.a)(null).pipe(function(t,e=_i.a){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new Si(r,e))}(t))}function Ri(t){return t.get(r.g).isStable.pipe(Wt(t=>t))}function Pi(t,e){return new Ci(j(e)&&!1!==t.enabled?navigator.serviceWorker:void 0)}let Li=(()=>{class t{static register(e,n={}){return{ngModule:t,providers:[{provide:ki,useValue:e},{provide:ji,useValue:n},{provide:Ci,useFactory:Pi,deps:[ji,r.C]},{provide:r.d,useFactory:Ni,deps:[r.s,ki,ji,r.C],multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({providers:[xi,Ai]}),t})();const Mi={apiKey:"AIzaSyDeQpyu8MPFyPeh-bMewu3ZNbKUkk5HTDA",authDomain:"danieleciulli-ad053.firebaseapp.com",projectId:"danieleciulli-ad053",storageBucket:"danieleciulli-ad053.appspot.com",messagingSenderId:"542860233165",appId:"1:542860233165:web:bdb220a6fec0a096385c84",measurementId:"G-5XNM534BBL"};class Fi{}class Ui{}class Vi{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Vi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Vi;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Vi?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class qi{encodeKey(t){return Bi(t)}encodeValue(t){return Bi(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Bi(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Hi{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new qi,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Hi({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function zi(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Gi(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Ki(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Wi{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Vi),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Hi,this.urlWithParams=e}serializeBody(){return null===this.body?null:zi(this.body)||Gi(this.body)||Ki(this.body)||"string"==typeof this.body?this.body:this.body instanceof Hi?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ki(this.body)?null:Gi(this.body)?this.body.type||null:zi(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Hi?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new Wi(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var $i=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Qi{constructor(t,e=200,n="OK"){this.headers=t.headers||new Vi,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Ji extends Qi{constructor(t={}){super(t),this.type=$i.ResponseHeader}clone(t={}){return new Ji({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Yi extends Qi{constructor(t={}){super(t),this.type=$i.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Yi({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Xi extends Qi{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Zi(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let to=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Wi)r=t;else{let i,o;i=n.headers instanceof Vi?n.headers:new Vi(n.headers),n.params&&(o=n.params instanceof Hi?n.params:new Hi({fromObject:n.params})),r=new Wi(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(ft.a)(r).pipe(te(t=>this.handler.handle(t)));if(t instanceof Wi||"events"===n.observe)return i;const o=i.pipe(Wt(t=>t instanceof Yi));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(Rt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(Rt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(Rt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(Rt.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Hi).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Zi(n,e))}post(t,e,n={}){return this.request("POST",t,Zi(n,e))}put(t,e,n={}){return this.request("PUT",t,Zi(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Fi))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();class eo{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const no=new r.r("HTTP_INTERCEPTORS");let ro=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const io=/^\)\]\}',?\n/;class oo{}let so=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),ao=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Et.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Vi(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Ji({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(io,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Yi({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Xi({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Xi({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:$i.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:$i.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:$i.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(oo))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const uo=new r.r("XSRF_COOKIE_NAME"),co=new r.r("XSRF_HEADER_NAME");class lo{}let ho=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=x(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(s),r.Jb(r.C),r.Jb(uo))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),fo=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(lo),r.Jb(co))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),po=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(no,[]);this.chain=t.reduceRight((t,e)=>new eo(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Ui),r.Jb(r.s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),go=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:fo,useClass:ro}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:uo,useValue:e.cookieName}:[],e.headerName?{provide:co,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({providers:[fo,{provide:no,useExisting:fo,multi:!0},{provide:lo,useClass:ho},{provide:uo,useValue:"XSRF-TOKEN"},{provide:co,useValue:"X-XSRF-TOKEN"}]}),t})(),yo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({providers:[to,{provide:Fi,useClass:po},ao,{provide:Ui,useExisting:ao},so,{provide:oo,useExisting:so}],imports:[[go.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var mo=n("spgP");function vo(){return t=>t.lift(new bo)}class bo{call(t,e){return e.subscribe(new wo(t))}}class wo extends vt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class _o{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Eo(t,this.compare,this.keySelector))}}class Eo extends vt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var So=n("pxpQ"),Oo=n("Jgta"),To=n("zIRd"),Io=n("qOnz"),Co=n("q/0M"),xo=function(t,e){return(xo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ao(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var jo,ko="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},No=No||{},Do=ko||self;function Ro(){}function Po(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Lo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Mo="closure_uid_"+(1e9*Math.random()>>>0),Fo=0;function Uo(t,e,n){return t.call.apply(t.bind,arguments)}function Vo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function qo(t,e,n){return(qo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Uo:Vo).apply(null,arguments)}function Bo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Ho(){return Date.now()}function zo(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Pb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Go(){this.j=this.j,this.i=this.i}Go.prototype.j=!1,Go.prototype.ka=function(){!this.j&&(this.j=!0,this.H(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Mo)&&t[Mo]||(t[Mo]=++Fo)}(this)},Go.prototype.H=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ko=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Wo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function $o(t){return Array.prototype.concat.apply([],arguments)}function Qo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Jo(t){return/^[\s\xa0]*$/.test(t)}var Yo,Xo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Zo(t,e){return-1!=t.indexOf(e)}function ts(t,e){return t<e?-1:t>e?1:0}t:{var es=Do.navigator;if(es){var ns=es.userAgent;if(ns){Yo=ns;break t}}Yo=""}function rs(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function is(t){var e={};for(var n in t)e[n]=t[n];return e}var os="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ss(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<os.length;o++)n=os[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function as(t){return as[" "](t),t}as[" "]=Ro;var us,cs,ls=Zo(Yo,"Opera"),hs=Zo(Yo,"Trident")||Zo(Yo,"MSIE"),fs=Zo(Yo,"Edge"),ds=fs||hs,ps=Zo(Yo,"Gecko")&&!(Zo(Yo.toLowerCase(),"webkit")&&!Zo(Yo,"Edge"))&&!(Zo(Yo,"Trident")||Zo(Yo,"MSIE"))&&!Zo(Yo,"Edge"),gs=Zo(Yo.toLowerCase(),"webkit")&&!Zo(Yo,"Edge");function ys(){var t=Do.document;return t?t.documentMode:void 0}t:{var ms="",vs=(cs=Yo,ps?/rv:([^\);]+)(\)|;)/.exec(cs):fs?/Edge\/([\d\.]+)/.exec(cs):hs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(cs):gs?/WebKit\/(\S+)/.exec(cs):ls?/(?:Version)[ \/]?(\S+)/.exec(cs):void 0);if(vs&&(ms=vs?vs[1]:""),hs){var bs=ys();if(null!=bs&&bs>parseFloat(ms)){us=String(bs);break t}}us=ms}var ws={};function _s(t){return function(t,e){var n=ws;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Xo(String(us)).split("."),r=Xo(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ts(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ts(0==s[2].length,0==a[2].length)||ts(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Es=Do.document&&hs&&(ys()||parseInt(us,10))||void 0,Ss=!hs||9<=Number(Es),Os=hs&&!_s("9"),Ts=function(){if(!Do.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Do.addEventListener("test",Ro,e),Do.removeEventListener("test",Ro,e)}catch(n){}return t}();function Is(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Cs(t,e){if(Is.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ps){t:{try{as(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:xs[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Is.prototype.b=function(){this.defaultPrevented=!0},zo(Cs,Is);var xs={2:"touch",3:"pen",4:"mouse"};Cs.prototype.b=function(){Cs.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Os)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var As="closure_listenable_"+(1e6*Math.random()|0),js=0;function ks(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++js,this.Y=this.Z=!1}function Ns(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function Ds(t){this.src=t,this.a={},this.b=0}function Rs(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Ko(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ns(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ps(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}Ds.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ps(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ks(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ls="closure_lm_"+(1e6*Math.random()|0),Ms={};function Fs(t,e,n,r,i){if(r&&r.once)return Vs(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Fs(t,e[o],n,r,i);return null}return n=$s(n),t&&t[As]?t.wa(e,n,Lo(r)?!!r.capture:!!r,i):Us(t,e,n,!1,r,i)}function Us(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Lo(i)?!!i.capture:!!i;if(s&&!Ss)return null;var a=Ks(t);if(a||(t[Ls]=a=new Ds(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Gs,e=Ss?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ts||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Hs(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Vs(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Vs(t,e[o],n,r,i);return null}return n=$s(n),t&&t[As]?t.xa(e,n,Lo(r)?!!r.capture:!!r,i):Us(t,e,n,!0,r,i)}function qs(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)qs(t,e[o],n,r,i);else r=Lo(r)?!!r.capture:!!r,n=$s(n),t&&t[As]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Ps(o=t.a[e],n,r,i))&&(Ns(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Ks(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ps(e,n,r,i)),(n=-1<t?e[t]:null)&&Bs(n))}function Bs(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[As])Rs(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Hs(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ks(e))?(Rs(n,t),0==n.b&&(n.src=null,e[Ls]=null)):Ns(t)}}}function Hs(t){return t in Ms?Ms[t]:Ms[t]="on"+t}function zs(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&Bs(t),n.call(r,e)}function Gs(t,e){if(t.Y)return!0;if(!Ss){if(!e)t:{e=["window","event"];for(var n=Do,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return zs(t,e=new Cs(e,this))}return zs(t,new Cs(e,this))}function Ks(t){return(t=t[Ls])instanceof Ds?t:null}var Ws="__closure_events_fn_"+(1e9*Math.random()>>>0);function $s(t){return"function"==typeof t?t:(t[Ws]||(t[Ws]=function(e){return t.handleEvent(e)}),t[Ws])}function Qs(){Go.call(this),this.c=new Ds(this),this.J=this,this.D=null}function Js(t,e){var n,r=t.D;if(r)for(n=[];r;r=r.D)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Is(e,t);else if(e instanceof Is)e.target=e.target||t;else{var i=e;ss(e=new Is(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ys(s,r,!0,e)&&i}if(i=Ys(s=e.a=t,r,!0,e)&&i,i=Ys(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ys(s=e.a=n[o],r,!1,e)&&i}function Ys(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&Rs(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}zo(Qs,Go),Qs.prototype[As]=!0,(jo=Qs.prototype).addEventListener=function(t,e,n,r){Fs(this,t,e,n,r)},jo.removeEventListener=function(t,e,n,r){qs(this,t,e,n,r)},jo.H=function(){if(Qs.X.H.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ns(n[r]);delete e.a[t],e.b--}}this.D=null},jo.wa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},jo.xa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Xs=Do.JSON.stringify;function Zs(){this.b=this.a=null}var ta,ea=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ra},function(t){t.reset()});function na(){var t=aa,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ra(){this.next=this.b=this.a=null}function ia(t){Do.setTimeout(function(){throw t},0)}function oa(t,e){ta||function(){var t=Do.Promise.resolve(void 0);ta=function(){t.then(ua)}}(),sa||(ta(),sa=!0),aa.add(t,e)}Zs.prototype.add=function(t,e){var n=ea.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ra.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ra.prototype.reset=function(){this.next=this.b=this.a=null};var sa=!1,aa=new Zs;function ua(){for(var t;t=na();){try{t.a.call(t.b)}catch(n){ia(n)}var e=ea;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}sa=!1}function ca(t,e){Qs.call(this),this.b=t||1,this.a=e||Do,this.f=qo(this.eb,this),this.g=Ho()}function la(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ha(t,e,n){if("function"==typeof t)n&&(t=qo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=qo(t.handleEvent,t)}return 2147483647<Number(e)?-1:Do.setTimeout(t,e||0)}function fa(t){t.a=ha(function(){t.a=null,t.c&&(t.c=!1,fa(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}zo(ca,Qs),(jo=ca.prototype).aa=!1,jo.M=null,jo.eb=function(){if(this.aa){var t=Ho()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Js(this,"tick"),this.aa&&(la(this),this.start()))}},jo.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Ho())},jo.H=function(){ca.X.H.call(this),la(this),delete this.a};var da=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}xo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:fa(this)},e.prototype.H=function(){t.prototype.H.call(this),this.a&&(Do.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Go);function pa(t){Go.call(this),this.b=t,this.a={}}zo(pa,Go);var ga=[];function ya(t,e,n,r){Array.isArray(n)||(n&&(ga[0]=n.toString()),n=ga);for(var i=0;i<n.length;i++){var o=Fs(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ma(t){rs(t.a,function(t,e){this.a.hasOwnProperty(e)&&Bs(t)},t),t.a={}}function va(){this.a=!0}function ba(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Xs(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}pa.prototype.H=function(){pa.X.H.call(this),ma(this)},pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},va.prototype.info=function(){};var wa={},_a=null;function Ea(){return _a=_a||new Qs}function Sa(t){Is.call(this,wa.Ga,t)}function Oa(t){var e=Ea();Js(e,new Sa(e,t))}function Ta(t,e){Is.call(this,wa.STAT_EVENT,t),this.stat=e}function Ia(t){var e=Ea();Js(e,new Ta(e,t))}function Ca(t){Is.call(this,wa.Ha,t)}function xa(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Do.setTimeout(function(){t()},e)}wa.Ga="serverreachability",zo(Sa,Is),wa.STAT_EVENT="statevent",zo(Ta,Is),wa.Ha="timingevent",zo(Ca,Is);var Aa={NO_ERROR:0,fb:1,sb:2,rb:3,mb:4,qb:5,tb:6,Ea:7,TIMEOUT:8,wb:9},ja={kb:"complete",Gb:"success",Fa:"error",Ea:"abort",yb:"ready",zb:"readystatechange",TIMEOUT:"timeout",ub:"incrementaldata",xb:"progress",nb:"downloadprogress",Ob:"uploadprogress"};function ka(){}function Na(){}ka.prototype.b=null;var Da,Ra={OPEN:"a",jb:"b",Fa:"c",vb:"d"};function Pa(){Is.call(this,"d")}function La(){Is.call(this,"c")}function Ma(){}function Fa(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new pa(this),this.P=Ua,this.R=new ca(t=ds?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.G=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}zo(Pa,Is),zo(La,Is),zo(Ma,ka),Ma.prototype.a=function(){return new XMLHttpRequest},Ma.prototype.c=function(){return{}},Da=new Ma;var Ua=45e3,Va={},qa={};function Ba(t,e,n){t.G=1,t.i=lu(iu(e)),t.j=n,t.I=!0,Ha(t,null)}function Ha(t,e){t.u=Ho(),Ka(t),t.l=iu(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Su(n.b,"t",r),t.D=0,t.a=mc(t.g,t.g.C?e:null),0<t.O&&(t.F=new da(qo(t.Da,t,t.a),t.O)),ya(t.J,t.a,"readystatechange",t.bb),e=t.B?is(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Oa(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function za(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ga(t,n);if(i==qa){4==e&&(t.h=4,Ia(14),r=!1),ba(t.c,t.f,null,"[Incomplete Response]");break}if(i==Va){t.h=4,Ia(15),ba(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ba(t.c,t.f,i,null),Ya(t,i)}4==e&&0==n.length&&(t.h=1,Ia(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),cc(e),e.F=!0,Ia(11))):(ba(t.c,t.f,n,"[Invalid Chunked Response]"),Ja(t),Qa(t))}function Ga(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?qa:(n=Number(e.substring(n,r)),isNaN(n)?Va:(r+=1)+n>e.length?qa:(e=e.substr(r,n),t.D=r+n,e))}function Ka(t){t.T=Ho()+t.P,Wa(t,t.P)}function Wa(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=xa(qo(t.$a,t),e)}function $a(t){t.o&&(Do.clearTimeout(t.o),t.o=null)}function Qa(t){0==t.g.v||t.A||fc(t.g,t)}function Ja(t){$a(t);var e=t.F;e&&"function"==typeof e.ka&&e.ka(),t.F=null,la(t.R),ma(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ka())}function Ya(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||ju(n.b,t)))if(n.I=t.N,!t.C&&ju(n.b,t)&&3==n.v){try{var r=n.la.a.parse(e)}catch(wb){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;hc(n),tc(n)}uc(n),Ia(18)}}else n.pa=i[1],0<n.pa-n.P&&37500>i[2]&&n.G&&0==n.o&&!n.m&&(n.m=xa(qo(n.Xa,n),6e3));if(1>=Au(n.b)&&n.fa){try{n.fa()}catch(wb){}n.fa=void 0}}else pc(n,11)}else if((t.C||n.a==t)&&hc(n),!Jo(e))for(e=r=n.la.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ha=i[2];var o=i[3];null!=o&&(n.ia=o,n.c.info("VER="+n.ia));var s=i[4];null!=s&&(n.qa=s,n.c.info("SVER="+n.qa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Zo(l,"spdy")||Zo(l,"quic")||Zo(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(ku(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.oa=f,cu(u.B,u.A,f))}}n.v=3,n.f&&n.f.ua(),n.U&&(n.N=Ho()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).ma=yc(u,u.C?u.ha:null,u.ga),d.C){Nu(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&($a(p),Ka(p)),u.a=d}else ac(u);0<n.g.length&&rc(n)}else"stop"!=i[0]&&"close"!=i[0]||pc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?pc(n,7):Zu(n):"noop"!=i[0]&&n.f&&n.f.ta(i),n.o=0);Oa(4)}catch(wb){}}function Xa(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Po(t)||"string"==typeof t)Wo(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Po(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Po(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Za(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Za)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function tu(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];eu(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)eu(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function eu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(jo=Fa.prototype).setTimeout=function(t){this.P=t},jo.bb=function(t){t=t.target;var e=this.F;e&&3==Qu(t)?e.f():this.Da(t)},jo.Da=function(t){try{if(t==this.a)t:{var e=Qu(this.a),n=this.a.va(),r=this.a.W();if(!(3>e||3==e&&!ds&&!this.a.$())){this.A||4!=e||7==n||Oa(8==n||0>=r?3:2),$a(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jo(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Ia(12),Ja(this),Qa(this);break t}ba(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ya(this,u)}this.I?(za(this,e,o),ds&&this.b&&3==e&&(ya(this.J,this.R,"tick",this.ab),this.R.start())):(ba(this.c,this.f,o,null),Ya(this,o)),4==e&&Ja(this),this.b&&!this.A&&(4==e?fc(this.g,this):(this.b=!1,Ka(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Ia(12)):(this.h=0,Ia(13)),Ja(this),Qa(this)}}}catch(c){}},jo.ab=function(){if(this.a){var t=Qu(this.a),e=this.a.$();this.D<e.length&&($a(this),za(this,t,e),this.b&&4!=t&&Ka(this))}},jo.cancel=function(){this.A=!0,Ja(this)},jo.$a=function(){this.o=null;var t=Ho();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.G&&(Oa(3),Ia(17)),Ja(this),this.h=2,Qa(this)):Wa(this,this.T-t)},(jo=Za.prototype).K=function(){tu(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},jo.L=function(){return tu(this),this.a.concat()},jo.get=function(t,e){return eu(this.b,t)?this.b[t]:e},jo.set=function(t,e){eu(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},jo.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var nu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ru(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ru){this.a=void 0!==e?e:t.a,ou(this,t.f),this.j=t.j,su(this,t.c),au(this,t.h),this.g=t.g,e=t.b;var n=new bu;n.c=e.c,e.a&&(n.a=new Za(e.a),n.b=e.b),uu(this,n),this.i=t.i}else t&&(n=String(t).match(nu))?(this.a=!!e,ou(this,n[1]||"",!0),this.j=hu(n[2]||""),su(this,n[3]||"",!0),au(this,n[4]),this.g=hu(n[5]||"",!0),uu(this,n[6]||"",!0),this.i=hu(n[7]||"")):(this.a=!!e,this.b=new bu(null,this.a))}function iu(t){return new ru(t)}function ou(t,e,n){t.f=n?hu(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function su(t,e,n){t.c=n?hu(e,!0):e}function au(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function uu(t,e,n){e instanceof bu?(t.b=e,function(t,e){e&&!t.f&&(wu(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(_u(this,e),Su(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=fu(e,mu)),t.b=new bu(e,t.a))}function cu(t,e,n){t.b.set(e,n)}function lu(t){return cu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Ho()).toString(36)),t}function hu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,du),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function du(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ru.prototype.toString=function(){var t=[],e=this.f;e&&t.push(fu(e,pu,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(fu(e,pu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(fu(n,"/"==n.charAt(0)?yu:gu,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",fu(n,vu)),t.join("")};var pu=/[#\/\?@]/g,gu=/[#\?:]/g,yu=/[#\?]/g,mu=/[#\?@]/g,vu=/#/g;function bu(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function wu(t){t.a||(t.a=new Za,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function _u(t,e){wu(t),e=Ou(t,e),eu(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,eu((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&tu(t)))}function Eu(t,e){return wu(t),e=Ou(t,e),eu(t.a.b,e)}function Su(t,e,n){_u(t,e),0<n.length&&(t.c=null,t.a.set(Ou(t,e),Qo(n)),t.b+=n.length)}function Ou(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(jo=bu.prototype).add=function(t,e){wu(this),this.c=null,t=Ou(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},jo.forEach=function(t,e){wu(this),this.a.forEach(function(n,r){Wo(n,function(n){t.call(e,n,r,this)},this)},this)},jo.L=function(){wu(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},jo.K=function(t){wu(this);var e=[];if("string"==typeof t)Eu(this,t)&&(e=$o(e,this.a.get(Ou(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=$o(e,t[n])}return e},jo.set=function(t,e){return wu(this),this.c=null,Eu(this,t=Ou(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},jo.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},jo.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Tu=function(){return function(t,e){this.b=t,this.a=e}}();function Iu(t){this.g=t||Cu,t=Do.PerformanceNavigationTiming?0<(t=Do.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Do.ja&&Do.ja.za&&Do.ja.za()&&Do.ja.za().Qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Cu=10;function xu(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Au(t){return t.b?1:t.a?t.a.size:0}function ju(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ku(t,e){t.a?t.a.add(e):t.b=e}function Nu(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Du(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ao(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Qo(t.c)}function Ru(){}function Pu(){this.a=new Ru}function Lu(t,e,n){var r=n||"";try{Xa(t,function(t,n){var i=t;Lo(t)&&(i=Xs(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(zb){throw e.push(r+"type="+encodeURIComponent("_badmap")),zb}}function Mu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Iu.prototype.cancel=function(){var t,e;if(this.c=Du(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ao(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ru.prototype.stringify=function(t){return Do.JSON.stringify(t,void 0)},Ru.prototype.parse=function(t){return Do.JSON.parse(t,void 0)};var Fu=Do.JSON.parse;function Uu(t){Qs.call(this),this.headers=new Za,this.l=t||null,this.b=!1,this.u=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.m=this.A=!1,this.s=0,this.o=null,this.I=Vu,this.F=this.G=!1}zo(Uu,Qs);var Vu="",qu=/^https?$/i,Bu=["POST","PUT"];function Hu(t){return"content-type"==t.toLowerCase()}function zu(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Gu(t),Wu(t)}function Gu(t){t.A||(t.A=!0,Js(t,"complete"),Js(t,"error"))}function Ku(t){if(t.b&&void 0!==No&&(!t.u[1]||4!=Qu(t)||2!=t.W()))if(t.m&&4==Qu(t))ha(t.Aa,0,t);else if(Js(t,"readystatechange"),4==Qu(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.C).match(nu)[1]||null;if(!o&&Do.self&&Do.self.location){var s=Do.self.location.protocol;o=s.substr(0,s.length-1)}i=!qu.test(o?o.toLowerCase():"")}e=i}if(e)Js(t,"complete"),Js(t,"success");else{t.h=6;try{var a=2<Qu(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Gu(t)}}finally{Wu(t)}}}function Wu(t,e){if(t.a){$u(t);var n=t.a,r=t.u[0]?Ro:null;t.a=null,t.u=null,e||Js(t,"ready");try{n.onreadystatechange=r}catch(zb){}}}function $u(t){t.a&&t.F&&(t.a.ontimeout=null),t.o&&(Do.clearTimeout(t.o),t.o=null)}function Qu(t){return t.a?t.a.readyState:0}function Ju(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return rs(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):cu(t,e,n))}function Yu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Xu(t){this.qa=0,this.g=[],this.c=new va,this.ha=this.ma=this.B=this.ga=this.a=this.oa=this.A=this.V=this.i=this.O=this.l=null,this.Pa=this.R=0,this.Ma=Yu("failFast",!1,t),this.G=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.pa=this.P=-1,this.T=this.o=this.u=0,this.Ia=Yu("baseRetryDelayMs",5e3,t),this.Sa=Yu("retryDelaySeedMs",1e4,t),this.Na=Yu("forwardChannelMaxRetries",2,t),this.na=Yu("forwardChannelRequestTimeoutMs",2e4,t),this.Oa=t&&t.xmlHttpFactory||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Iu(t&&t.concurrentRequestLimit),this.la=new Pu,this.ea=t&&t.fastHandshake||!1,this.Ja=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.ea&&this.S&&t&&t.detectBufferingProxy||!1,this.fa=void 0,this.N=0,this.F=!1,this.s=null,(this.La=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Zu(t){if(ec(t),3==t.v){var e=t.R++,n=iu(t.B);cu(n,"SID",t.J),cu(n,"RID",e),cu(n,"TYPE","terminate"),oc(t,n),(e=new Fa(t,t.c,e,void 0)).G=2,e.i=lu(iu(n)),n=!1,Do.navigator&&Do.navigator.sendBeacon&&(n=Do.navigator.sendBeacon(e.i.toString(),"")),!n&&Do.Image&&((new Image).src=e.i,n=!0),n||(e.a=mc(e.g,null),e.a.ba(e.i)),e.u=Ho(),Ka(e)}gc(t)}function tc(t){t.a&&(cc(t),t.a.cancel(),t.a=null)}function ec(t){tc(t),t.j&&(Do.clearTimeout(t.j),t.j=null),hc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Do.clearTimeout(t.h),t.h=null)}function nc(t,e){t.g.push(new Tu(t.Pa++,e)),3==t.v&&rc(t)}function rc(t){xu(t.b)||t.h||(t.h=!0,oa(t.Ca,t),t.u=0)}function ic(t,e){var n;n=e?e.f:t.R++;var r=iu(t.B);cu(r,"SID",t.J),cu(r,"RID",n),cu(r,"AID",t.P),oc(t,r),t.i&&t.l&&Ju(r,t.i,t.l),n=new Fa(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=sc(t,n,1e3),n.setTimeout(Math.round(.5*t.na)+Math.round(.5*t.na*Math.random())),ku(t.b,n),Ba(n,r,e)}function oc(t,e){t.f&&Xa({},function(t,n){cu(e,n,t)})}function sc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?qo(t.f.Ka,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Lu(l,s,"req"+c+"_")}catch(tl){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function ac(t){t.a||t.j||(t.T=1,oa(t.Ba,t),t.o=0)}function uc(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=xa(qo(t.Ba,t),dc(t,t.o)),t.o++,0))}function cc(t){null!=t.s&&(Do.clearTimeout(t.s),t.s=null)}function lc(t){t.a=new Fa(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=iu(t.ma);cu(e,"RID","rpc"),cu(e,"SID",t.J),cu(e,"CI",t.G?"0":"1"),cu(e,"AID",t.P),oc(t,e),cu(e,"TYPE","xmlhttp"),t.i&&t.l&&Ju(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ha,n.G=1,n.i=lu(iu(e)),n.j=null,n.I=!0,Ha(n,t)}function hc(t){null!=t.m&&(Do.clearTimeout(t.m),t.m=null)}function fc(t,e){var n=null;if(t.a==e){hc(t),cc(t),t.a=null;var r=2}else{if(!ju(t.b,e))return;n=e.s,Nu(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Ho()-e.u;var i=t.u;Js(r=Ea(),new Ca(r,n,e,i)),rc(t)}else ac(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Au(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ma?0:t.Na)||(t.h=xa(qo(t.Ca,t,e),dc(t,t.u)),t.u++,0)))}(t,e)||2==r&&uc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:pc(t,5);break;case 4:pc(t,10);break;case 3:pc(t,6);break;default:pc(t,2)}}function dc(t,e){var n=t.Ia+Math.floor(Math.random()*t.Sa);return t.f||(n*=2),n*e}function pc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=qo(t.cb,t);n||(n=new ru("//www.google.com/images/cleardot.gif"),Do.location&&"http"==Do.location.protocol||ou(n,"https"),lu(n)),function(t,e){var n=new va;if(Do.Image){var r=new Image;r.onload=Bo(Mu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Bo(Mu,n,r,"TestLoadImage: error",!1,e),r.onabort=Bo(Mu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Bo(Mu,n,r,"TestLoadImage: timeout",!1,e),Do.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ia(2);t.v=0,t.f&&t.f.sa(e),gc(t),ec(t)}function gc(t){t.v=0,t.I=-1,t.f&&(0==Du(t.b).length&&0==t.g.length||(t.b.c.length=0,Qo(t.g),t.g.length=0),t.f.ra())}function yc(t,e,n){var r=function(t){return t instanceof ru?iu(t):new ru(t,void 0)}(n);if(""!=r.c)e&&su(r,e+"."+r.c),au(r,r.h);else{var i=Do.location;r=function(t,e,n,r){var i=new ru(null,void 0);return t&&ou(i,t),e&&su(i,e),n&&au(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&rs(t.V,function(t,e){cu(r,e,t)}),n=t.oa,(e=t.A)&&n&&cu(r,e,n),cu(r,"VER",t.ia),oc(t,r),r}function mc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Uu(t.Oa)).G=t.C,e}function vc(){}function bc(){if(hs&&!(10<=Number(Es)))throw Error("Environmental error: no available transport.")}function wc(t,e){Qs.call(this),this.a=new Xu(e),this.g=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Jo(t)&&(this.a.i=t),this.o=e&&e.supportsCrossDomainXhr||!1,this.m=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jo(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Sc(this)}function _c(t){Pa.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ec(){La.call(this),this.status=1}function Sc(t){this.a=t}function Oc(t){this.f=t}function Tc(t){Qs.call(this),this.u=t,this.h=void 0,this.readyState=Ic,this.status=0,this.responseType=this.responseText=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.o="",this.a=!1,this.m=this.f=this.g=null}(jo=Uu.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+t);e=e?e.toUpperCase():"GET",this.C=t,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.l?this.l.a():Da.a(),this.u=function(t){return t.b||(t.b=t.c())}(this.l?this.l:Da),this.a.onreadystatechange=qo(this.Aa,this);try{this.B=!0,this.a.open(e,String(t),!0),this.B=!1}catch(o){return void zu(this,o)}t=n||"";var i=new Za(this.headers);r&&Xa(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Hu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Do.FormData&&t instanceof Do.FormData,!(0<=Ko(Bu,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.G&&(this.a.withCredentials=this.G);try{$u(this),0<this.s&&((this.F=function(t){return hs&&_s(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.s,this.a.ontimeout=qo(this.ya,this)):this.o=ha(this.ya,this.s,this)),this.m=!0,this.a.send(t),this.m=!1}catch(o){zu(this,o)}},jo.ya=function(){void 0!==No&&this.a&&(this.f="Timed out after "+this.s+"ms, aborting",this.h=8,Js(this,"timeout"),this.abort(8))},jo.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Js(this,"complete"),Js(this,"abort"),Wu(this))},jo.H=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Wu(this,!0)),Uu.X.H.call(this)},jo.Aa=function(){this.j||(this.B||this.m||this.g?Ku(this):this.Za())},jo.Za=function(){Ku(this)},jo.W=function(){try{return 2<Qu(this)?this.a.status:-1}catch(cs){return-1}},jo.$=function(){try{return this.a?this.a.responseText:""}catch(cs){return""}},jo.Qa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Fu(e)}},jo.va=function(){return this.h},jo.Ra=function(){return"string"==typeof this.f?this.f:String(this.f)},(jo=Xu.prototype).ia=8,jo.v=1,jo.Ca=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Fa(this,this.c,t,void 0),r=this.l;if(this.O&&(r?ss(r=is(r),this.O):r=this.O),null===this.i&&(n.B=r),this.ea)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=sc(this,n,e),cu(i=iu(this.B),"RID",t),cu(i,"CVER",22),this.A&&cu(i,"X-HTTP-Session-Id",this.A),oc(this,i),this.i&&r&&Ju(i,this.i,r),ku(this.b,n),this.Ja&&cu(i,"TYPE","init"),this.ea?(cu(i,"$req",e),cu(i,"SID","null"),n.U=!0,Ba(n,i,null)):Ba(n,i,e),this.v=2}}else 3==this.v&&(t?ic(this,t):0==this.g.length||xu(this.b)||ic(this))},jo.Ba=function(){if(this.j=null,lc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=xa(qo(this.Ya,this),t)}},jo.Ya=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.F=!0,Ia(10),tc(this),lc(this))},jo.Xa=function(){null!=this.m&&(this.m=null,tc(this),uc(this),Ia(19))},jo.cb=function(t){t?(this.c.info("Successfully pinged google.com"),Ia(2)):(this.c.info("Failed to ping google.com"),Ia(1))},(jo=vc.prototype).ua=function(){},jo.ta=function(){},jo.sa=function(){},jo.ra=function(){},jo.Ka=function(){},bc.prototype.a=function(t,e){return new wc(t,e)},zo(wc,Qs),wc.prototype.h=function(){this.a.f=this.f,this.o&&(this.a.C=!0);var t=this.a,e=this.g,n=this.b||void 0;Ia(0),t.ga=e,t.V=n||{},t.G=t.S,t.B=yc(t,null,t.ga),rc(t)},wc.prototype.close=function(){Zu(this.a)},wc.prototype.l=function(t){if("string"==typeof t){var e={};e.__data__=t,nc(this.a,e)}else this.m?((e={}).__data__=Xs(t),nc(this.a,e)):nc(this.a,t)},wc.prototype.H=function(){this.a.f=null,delete this.f,Zu(this.a),delete this.a,wc.X.H.call(this)},zo(_c,Pa),zo(Ec,La),zo(Sc,vc),Sc.prototype.ua=function(){Js(this.a,"a")},Sc.prototype.ta=function(t){Js(this.a,new _c(t))},Sc.prototype.sa=function(t){Js(this.a,new Ec(t))},Sc.prototype.ra=function(){Js(this.a,"b")},zo(Oc,ka),Oc.prototype.a=function(){return new Tc(this.f)},Oc.prototype.c=function(t){return function(){return t}}({}),zo(Tc,Qs);var Ic=0;function Cc(t){t.f.read().then(t.Ta.bind(t)).catch(t.ca.bind(t))}function xc(t){t.readyState=4,t.g=null,t.f=null,t.m=null,Ac(t)}function Ac(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(jo=Tc.prototype).open=function(t,e){if(this.readyState!=Ic)throw this.abort(),Error("Error reopening a connection");this.s=t,this.o=e,this.readyState=1,Ac(this)},jo.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.o,e)).then(this.Wa.bind(this),this.ca.bind(this))},jo.abort=function(){this.responseText="",this.l=new Headers,this.status=0,this.f&&this.f.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,xc(this)),this.readyState=Ic},jo.Wa=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Ac(this)),this.a&&(this.readyState=3,Ac(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.Ua.bind(this),this.ca.bind(this)):void 0!==Do.ReadableStream&&"body"in t?(this.responseText="",this.f=t.body.getReader(),this.m=new TextDecoder,Cc(this)):t.text().then(this.Va.bind(this),this.ca.bind(this)))))},jo.Ta=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.responseText+=e),t.done?xc(this):Ac(this),3==this.readyState&&Cc(this)}},jo.Va=function(t){this.a&&(this.responseText=t,xc(this))},jo.Ua=function(){this.a&&xc(this)},jo.ca=function(){this.a&&xc(this)},jo.setRequestHeader=function(t,e){this.l.append(t,e)},jo.getResponseHeader=function(t){return this.b&&this.b.get(t.toLowerCase())||""},jo.getAllResponseHeaders=function(){if(!this.b)return"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Tc.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),bc.prototype.createWebChannel=bc.prototype.a,wc.prototype.send=wc.prototype.l,wc.prototype.open=wc.prototype.h,wc.prototype.close=wc.prototype.close,Aa.NO_ERROR=0,Aa.TIMEOUT=8,Aa.HTTP_ERROR=6,ja.COMPLETE="complete",Na.EventType=Ra,Ra.OPEN="a",Ra.CLOSE="b",Ra.ERROR="c",Ra.MESSAGE="d",Qs.prototype.listen=Qs.prototype.wa,Uu.prototype.listenOnce=Uu.prototype.xa,Uu.prototype.getLastError=Uu.prototype.Ra,Uu.prototype.getLastErrorCode=Uu.prototype.va,Uu.prototype.getStatus=Uu.prototype.W,Uu.prototype.getResponseJson=Uu.prototype.Qa,Uu.prototype.getResponseText=Uu.prototype.$,Uu.prototype.send=Uu.prototype.ba;var jc=Aa,kc=ja,Nc=wa,Dc=Oc,Rc=Na,Pc=Uu,Lc=n("mrSG"),Mc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Mc.o=-1;var Fc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Uc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Lc.c)(e,t),e}(Error),Vc=new Co.b("@firebase/firestore");function qc(){return Vc.logLevel}function Bc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vc.logLevel<=Co.a.DEBUG){var r=e.map(Gc);Vc.debug.apply(Vc,Object(Lc.f)(["Firestore (8.6.8): "+t],r))}}function Hc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vc.logLevel<=Co.a.ERROR){var r=e.map(Gc);Vc.error.apply(Vc,Object(Lc.f)(["Firestore (8.6.8): "+t],r))}}function zc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vc.logLevel<=Co.a.WARN){var r=e.map(Gc);Vc.warn.apply(Vc,Object(Lc.f)(["Firestore (8.6.8): "+t],r))}}function Gc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(zb){return t}}function Kc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.8) INTERNAL ASSERTION FAILED: "+t;throw Hc(e),new Error(e)}function Wc(t,e){t||Kc()}function $c(t,e){return t}function Qc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Jc=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Qc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Yc(t,e){return t<e?-1:t>e?1:0}function Xc(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Zc(t){return t+"\0"}var tl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Uc(Fc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Uc(Fc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Uc(Fc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Uc(Fc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Yc(this.nanoseconds,t.nanoseconds):Yc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),el=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new tl(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function nl(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function il(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ol=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Kc(),void 0===n?n=t.length-e:n>t.length-e&&Kc(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),sl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Uc(Fc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(ol),al=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ul=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return al.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Uc(Fc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Uc(Fc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Uc(Fc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Uc(Fc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(ol),cl=function(){function t(t){this.fields=t,t.sort(ul.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Xc(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),ll=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Yc(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ll.EMPTY_BYTE_STRING=new ll("");var hl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fl(t){if(Wc(!!t),"string"==typeof t){var e=0,n=hl.exec(t);if(Wc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dl(t.seconds),nanos:dl(t.nanos)}}function dl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function pl(t){return"string"==typeof t?ll.fromBase64String(t):ll.fromUint8Array(t)}function gl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function yl(t){var e=t.mapValue.fields.__previous_value__;return gl(e)?yl(e):e}function ml(t){var e=fl(t.mapValue.fields.__local_write_time__.timestampValue);return new tl(e.seconds,e.nanos)}function vl(t){return null==t}function bl(t){return 0===t&&1/t==-1/0}function wl(t){return"number"==typeof t&&Number.isInteger(t)&&!bl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var _l=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(sl.fromString(e))},t.fromName=function(e){return new t(sl.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===sl.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return sl.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new sl(e.slice()))},t}();function El(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gl(t)?4:10:Kc()}function Sl(t,e){var n=El(t);if(n!==El(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ml(t).isEqual(ml(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=fl(t.timestampValue),r=fl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return pl(t.bytesValue).isEqual(pl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return dl(t.geoPointValue.latitude)===dl(e.geoPointValue.latitude)&&dl(t.geoPointValue.longitude)===dl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return dl(t.integerValue)===dl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=dl(t.doubleValue),r=dl(e.doubleValue);return n===r?bl(n)===bl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Xc(t.arrayValue.values||[],e.arrayValue.values||[],Sl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(nl(n)!==nl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Sl(n[i],r[i])))return!1;return!0}(t,e);default:return Kc()}}function Ol(t,e){return void 0!==(t.values||[]).find(function(t){return Sl(t,e)})}function Tl(t,e){var n=El(t),r=El(e);if(n!==r)return Yc(n,r);switch(n){case 0:return 0;case 1:return Yc(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=dl(t.integerValue||t.doubleValue),r=dl(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Il(t.timestampValue,e.timestampValue);case 4:return Il(ml(t),ml(e));case 5:return Yc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=pl(t),r=pl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Yc(n[i],r[i]);if(0!==o)return o}return Yc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Yc(dl(t.latitude),dl(e.latitude));return 0!==n?n:Yc(dl(t.longitude),dl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Tl(n[i],r[i]);if(o)return o}return Yc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Yc(r[s],o[s]);if(0!==a)return a;var u=Tl(n[r[s]],i[o[s]]);if(0!==u)return u}return Yc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Kc()}}function Il(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Yc(t,e);var n=fl(t),r=fl(e),i=Yc(n.seconds,r.seconds);return 0!==i?i:Yc(n.nanos,r.nanos)}function Cl(t){return xl(t)}function xl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=fl(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?pl(t.bytesValue).toBase64():"referenceValue"in t?_l.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=xl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+xl(t.fields[o])}return e+"}"}(t.mapValue):Kc();var e}function Al(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function jl(t){return!!t&&"integerValue"in t}function kl(t){return!!t&&"arrayValue"in t}function Nl(t){return!!t&&"nullValue"in t}function Dl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rl(t){return!!t&&"mapValue"in t}function Pl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},fl(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return rl(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Pl(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Pl(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Ll=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Rl(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Pl(e)},t.prototype.setAll=function(t){var e=this,n=ul.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Pl(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Rl(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Sl(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Rl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){rl(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Pl(this.value))},t}();function Ml(t){var e=[];return rl(t.fields,function(t,n){var r=new ul([t]);if(Rl(n)){var i=Ml(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new cl(e)}var Fl=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,el.min(),Ll.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ll.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ll.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ll.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ll.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ul=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Vl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ul(t,e,n,r,i,o,s)}function ql(t){var e=$c(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Cl(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),vl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=th(e.startAt)),e.endAt&&(n+="|ub:",n+=th(e.endAt)),e.h=n}return e.h}function Bl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!nh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Sl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ih(t.startAt,e.startAt)&&ih(t.endAt,e.endAt)}function Hl(t){return _l.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var zl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Lc.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Gl(t,n,r):"array-contains"===n?new Ql(t,r):"in"===n?new Jl(t,r):"not-in"===n?new Yl(t,r):"array-contains-any"===n?new Xl(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Kl(t,n):new Wl(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Tl(e,this.value)):null!==e&&El(this.value)===El(e)&&this.m(Tl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Kc()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Gl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=_l.fromName(r.referenceValue),i}return Object(Lc.c)(e,t),e.prototype.matches=function(t){var e=_l.comparator(t.key,this.key);return this.m(e)},e}(zl),Kl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=$l(0,n),r}return Object(Lc.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(zl),Wl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=$l(0,n),r}return Object(Lc.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(zl);function $l(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return _l.fromName(t.referenceValue)})}var Ql=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Lc.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return kl(e)&&Ol(e.arrayValue,this.value)},e}(zl),Jl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Lc.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Ol(this.value.arrayValue,e)},e}(zl),Yl=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Lc.c)(e,t),e.prototype.matches=function(t){if(Ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Ol(this.value.arrayValue,e)},e}(zl),Xl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Lc.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!kl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Ol(e.value.arrayValue,t)})},e}(zl),Zl=function(t,e){this.position=t,this.before=e};function th(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Cl(t)}).join(",")}var eh=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function nh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function rh(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?_l.comparator(_l.fromName(s.referenceValue),n.key):Tl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ih(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Sl(t.position[n],e.position[n]))return!1;return!0}var oh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function sh(t,e,n,r,i,o,s,a){return new oh(t,e,n,r,i,o,s,a)}function ah(t){return new oh(t)}function uh(t){return!vl(t.limit)&&"F"===t.limitType}function ch(t){return!vl(t.limit)&&"L"===t.limitType}function lh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function hh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function fh(t){return null!==t.collectionGroup}function dh(t){var e=$c(t);if(null===e.p){e.p=[];var n=hh(e),r=lh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new eh(n)),e.p.push(new eh(ul.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new eh(ul.keyField(),u))}}}return e.p}function ph(t){var e=$c(t);if(!e.T)if("F"===e.limitType)e.T=Vl(e.path,e.collectionGroup,dh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=dh(e);r<i.length;r++){var o=i[r];n.push(new eh(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Zl(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Zl(e.startAt.position,!e.startAt.before):null;e.T=Vl(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function gh(t,e,n){return new oh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yh(t,e){return Bl(ph(t),ph(e))&&t.limitType===e.limitType}function mh(t){return ql(ph(t))+"|lt:"+t.limitType}function vh(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Cl(e.value);var e}).join(", ")+"]"),vl(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+th(t.startAt)),t.endAt&&(e+=", endAt: "+th(t.endAt)),"Target("+e+")"}(ph(t))+"; limitType="+t.limitType+")"}function bh(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):_l.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!rh(t.startAt,dh(t),e)||t.endAt&&rh(t.endAt,dh(t),e))}(t,e)}function wh(t){return function(e,n){for(var r=!1,i=0,o=dh(t);i<o.length;i++){var s=o[i],a=_h(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function _h(t,e,n){var r=t.field.isKeyField()?_l.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Tl(r,i):Kc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Kc()}}function Eh(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bl(e)?"-0":e}}function Sh(t){return{integerValue:""+t}}function Oh(t,e){return wl(e)?Sh(e):Eh(t,e)}var Th=function(){this._=void 0};function Ih(t,e,n){return t instanceof Ah?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof jh?kh(t,e):t instanceof Nh?Dh(t,e):function(t,e){var n=xh(t,e),r=Ph(n)+Ph(t.A);return jl(n)&&jl(t.A)?Sh(r):Eh(t.R,r)}(t,e)}function Ch(t,e,n){return t instanceof jh?kh(t,e):t instanceof Nh?Dh(t,e):n}function xh(t,e){return t instanceof Rh?jl(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ah=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lc.c)(e,t),e}(Th),jh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Lc.c)(e,t),e}(Th);function kh(t,e){for(var n=Lh(e),r=function(t){n.some(function(e){return Sl(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Nh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Lc.c)(e,t),e}(Th);function Dh(t,e){for(var n=Lh(e),r=function(t){n=n.filter(function(e){return!Sl(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Rh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Lc.c)(e,t),e}(Th);function Ph(t){return dl(t.integerValue||t.doubleValue)}function Lh(t){return kl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Mh=function(t,e){this.field=t,this.transform=e},Fh=function(t,e){this.version=t,this.transformResults=e},Uh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Vh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var qh=function(){};function Bh(t,e,n){t instanceof Wh?function(t,e,n){var r=t.value.clone(),i=Jh(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof $h?function(t,e,n){if(Vh(t.precondition,e)){var r=Jh(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Qh(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Hh(t,e,n){t instanceof Wh?function(t,e,n){if(Vh(t.precondition,e)){var r=t.value.clone(),i=Yh(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Kh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof $h?function(t,e,n){if(Vh(t.precondition,e)){var r=Yh(t.fieldTransforms,n,e),i=e.data;i.setAll(Qh(t)),i.setAll(r),e.convertToFoundDocument(Kh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Vh(t.precondition,e)&&e.convertToNoDocument(el.min())}(t,e)}function zh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=xh(o.transform,s||null);null!=a&&(null==n&&(n=Ll.empty()),n.set(o.field,a))}return n||null}function Gh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Xc(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof jh&&e instanceof jh||t instanceof Nh&&e instanceof Nh?Xc(t.elements,e.elements,Sl):t instanceof Rh&&e instanceof Rh?Sl(t.A,e.A):t instanceof Ah&&e instanceof Ah}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Kh(t){return t.isFoundDocument()?t.version:el.min()}var Wh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Lc.c)(e,t),e}(qh),$h=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Lc.c)(e,t),e}(qh);function Qh(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Jh(t,e,n){var r=new Map;Wc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Ch(s,a,n[i]))}return r}function Yh(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Ih(a,u,e))}return r}var Xh,Zh,tf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Lc.c)(e,t),e}(qh),ef=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Lc.c)(e,t),e}(qh),nf=function(t){this.count=t};function rf(t){switch(t){case Fc.OK:return Kc();case Fc.CANCELLED:case Fc.UNKNOWN:case Fc.DEADLINE_EXCEEDED:case Fc.RESOURCE_EXHAUSTED:case Fc.INTERNAL:case Fc.UNAVAILABLE:case Fc.UNAUTHENTICATED:return!1;case Fc.INVALID_ARGUMENT:case Fc.NOT_FOUND:case Fc.ALREADY_EXISTS:case Fc.PERMISSION_DENIED:case Fc.FAILED_PRECONDITION:case Fc.ABORTED:case Fc.OUT_OF_RANGE:case Fc.UNIMPLEMENTED:case Fc.DATA_LOSS:return!0;default:return Kc()}}function of(t){if(void 0===t)return Hc("GRPC error has no .code"),Fc.UNKNOWN;switch(t){case Xh.OK:return Fc.OK;case Xh.CANCELLED:return Fc.CANCELLED;case Xh.UNKNOWN:return Fc.UNKNOWN;case Xh.DEADLINE_EXCEEDED:return Fc.DEADLINE_EXCEEDED;case Xh.RESOURCE_EXHAUSTED:return Fc.RESOURCE_EXHAUSTED;case Xh.INTERNAL:return Fc.INTERNAL;case Xh.UNAVAILABLE:return Fc.UNAVAILABLE;case Xh.UNAUTHENTICATED:return Fc.UNAUTHENTICATED;case Xh.INVALID_ARGUMENT:return Fc.INVALID_ARGUMENT;case Xh.NOT_FOUND:return Fc.NOT_FOUND;case Xh.ALREADY_EXISTS:return Fc.ALREADY_EXISTS;case Xh.PERMISSION_DENIED:return Fc.PERMISSION_DENIED;case Xh.FAILED_PRECONDITION:return Fc.FAILED_PRECONDITION;case Xh.ABORTED:return Fc.ABORTED;case Xh.OUT_OF_RANGE:return Fc.OUT_OF_RANGE;case Xh.UNIMPLEMENTED:return Fc.UNIMPLEMENTED;case Xh.DATA_LOSS:return Fc.DATA_LOSS;default:return Kc()}}(Zh=Xh||(Xh={}))[Zh.OK=0]="OK",Zh[Zh.CANCELLED=1]="CANCELLED",Zh[Zh.UNKNOWN=2]="UNKNOWN",Zh[Zh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zh[Zh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zh[Zh.NOT_FOUND=5]="NOT_FOUND",Zh[Zh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zh[Zh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zh[Zh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zh[Zh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zh[Zh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zh[Zh.ABORTED=10]="ABORTED",Zh[Zh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zh[Zh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zh[Zh.INTERNAL=13]="INTERNAL",Zh[Zh.UNAVAILABLE=14]="UNAVAILABLE",Zh[Zh.DATA_LOSS=15]="DATA_LOSS";var sf=function(){function t(t,e){this.comparator=t,this.root=e||uf.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,uf.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,uf.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new af(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new af(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new af(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new af(this.root,t,this.comparator,!0)},t}(),af=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),uf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Kc();if(this.right.isRed())throw Kc();var t=this.left.check();if(t!==this.right.check())throw Kc();return t+(this.isRed()?0:1)},t}();uf.EMPTY=null,uf.RED=!0,uf.BLACK=!1,uf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Kc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Kc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Kc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Kc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Kc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new uf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var cf=function(){function t(t){this.comparator=t,this.data=new sf(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new lf(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new lf(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),lf=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),hf=new sf(_l.comparator);function ff(){return hf}var df=new sf(_l.comparator);function pf(){return df}var gf=new sf(_l.comparator);function yf(){return gf}var mf=new cf(_l.comparator);function vf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=mf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var bf=new cf(Yc);function wf(){return bf}var _f=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Ef.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(el.min(),r,wf(),ff(),vf())},t}(),Ef=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ll.EMPTY_BYTE_STRING,n,vf(),vf(),vf())},t}(),Sf=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Of=function(t,e){this.targetId=t,this.V=e},Tf=function(t,e,n,r){void 0===n&&(n=ll.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},If=function(){function t(){this.S=0,this.D=Af(),this.C=ll.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=vf(),e=vf(),n=vf();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Kc()}}),new Ef(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Af()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Cf=function(){function t(t){this.W=t,this.G=new Map,this.H=ff(),this.J=xf(),this.Y=new cf(Yc)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Kc()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Hl(i))if(0===n){var o=new _l(i.path);this.tt(e,o,Fl.newNoDocument(o,el.min()))}else Wc(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Hl(o.target)){var s=new _l(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Fl.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=vf();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new _f(t,n,this.Y,this.H,r);return this.H=ff(),this.J=xf(),this.Y=new cf(Yc),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new If,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new cf(Yc),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Bc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new If),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function xf(){return new sf(_l.comparator)}function Af(){return new sf(_l.comparator)}var jf={asc:"ASCENDING",desc:"DESCENDING"},kf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nf=function(t,e){this.databaseId=t,this.I=e};function Df(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rf(t,e){return t.I?e.toBase64():e.toUint8Array()}function Pf(t,e){return Df(t,e.toTimestamp())}function Lf(t){return Wc(!!t),el.fromTimestamp(function(t){var e=fl(t);return new tl(e.seconds,e.nanos)}(t))}function Mf(t,e){return function(t){return new sl(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ff(t){var e=sl.fromString(t);return Wc(ud(e)),e}function Uf(t,e){return Mf(t.databaseId,e.path)}function Vf(t,e){var n=Ff(e);if(n.get(1)!==t.databaseId.projectId)throw new Uc(Fc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Uc(Fc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _l(zf(n))}function qf(t,e){return Mf(t.databaseId,e)}function Bf(t){var e=Ff(t);return 4===e.length?sl.emptyPath():zf(e)}function Hf(t){return new sl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zf(t){return Wc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Gf(t,e,n){return{name:Uf(t,e),fields:n.value.mapValue.fields}}function Kf(t,e,n){var r=Vf(t,e.name),i=Lf(e.updateTime),o=new Ll({mapValue:{fields:e.fields}}),s=Fl.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Wf(t,e){var n;if(e instanceof Wh)n={update:Gf(t,e.key,e.value)};else if(e instanceof tf)n={delete:Uf(t,e.key)};else if(e instanceof $h)n={update:Gf(t,e.key,e.data),updateMask:ad(e.fieldMask)};else{if(!(e instanceof ef))return Kc();n={verify:Uf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Ah)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof jh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Nh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rh)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Kc()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Pf(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Kc()}(t,e.precondition)),n}function $f(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Uh.updateTime(Lf(t.updateTime)):void 0!==t.exists?Uh.exists(t.exists):Uh.none()}(e.currentDocument):Uh.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Wc("REQUEST_TIME"===e.setToServerValue),n=new Ah):"appendMissingElements"in e?n=new jh(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Nh(e.removeAllFromArray.values||[]):"increment"in e?n=new Rh(t,e.increment):Kc();var r=ul.fromServerFormat(e.fieldPath);return new Mh(r,n)}(t,e)}):[];if(e.update){var i=Vf(t,e.update.name),o=new Ll({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new cl((t.fieldPaths||[]).map(function(t){return ul.fromServerFormat(t)}))}(e.updateMask);return new $h(i,o,s,n,r)}return new Wh(i,o,n,r)}if(e.delete){var a=Vf(t,e.delete);return new tf(a,n)}if(e.verify){var u=Vf(t,e.verify);return new ef(u,n)}return Kc()}function Qf(t,e){return{documents:[qf(t,e.path)]}}function Jf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=qf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=qf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Dl(t.value))return{unaryFilter:{field:rd(t.field),op:"IS_NAN"}};if(Nl(t.value))return{unaryFilter:{field:rd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Dl(t.value))return{unaryFilter:{field:rd(t.field),op:"IS_NOT_NAN"}};if(Nl(t.value))return{unaryFilter:{field:rd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rd(t.field),op:nd(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:rd(t.field),direction:ed(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||vl(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Zf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Zf(e.endAt)),n}function Yf(t){var e=Bf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Wc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Xf(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new eh(id(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return vl(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=td(n.startAt));var l=null;return n.endAt&&(l=td(n.endAt)),sh(e,i,a,s,u,"F",c,l)}function Xf(t){return t?void 0!==t.unaryFilter?[sd(t)]:void 0!==t.fieldFilter?[od(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Xf(t)}).reduce(function(t,e){return t.concat(e)}):Kc():[]}function Zf(t){return{before:t.before,values:t.position}}function td(t){return new Zl(t.values||[],!!t.before)}function ed(t){return jf[t]}function nd(t){return kf[t]}function rd(t){return{fieldPath:t.canonicalString()}}function id(t){return ul.fromServerFormat(t.fieldPath)}function od(t){return zl.create(id(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Kc()}}(t.fieldFilter.op),t.fieldFilter.value)}function sd(t){switch(t.unaryFilter.op){case"IS_NAN":var e=id(t.unaryFilter.field);return zl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=id(t.unaryFilter.field);return zl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=id(t.unaryFilter.field);return zl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=id(t.unaryFilter.field);return zl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Kc()}}function ad(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function ud(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function cd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=hd(e)),e=ld(t.get(n),e);return hd(e)}function ld(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function hd(t){return t+"\x01\x01"}function fd(t){var e=t.length;if(Wc(e>=2),2===e)return Wc("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),sl.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Kc(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Kc()}o=s+2}return new sl(r)}var dd=function(t,e){this.seconds=t,this.nanoseconds=e},pd=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};pd.store="owner",pd.key="owner";var gd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};gd.store="mutationQueues",gd.keyPath="userId";var yd=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};yd.store="mutations",yd.keyPath="batchId",yd.userMutationsIndex="userMutationsIndex",yd.userMutationsKeyPath=["userId","batchId"];var md=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,cd(e)]},t.key=function(t,e,n){return[t,cd(e),n]},t}();md.store="documentMutations",md.PLACEHOLDER=new md;var vd=function(t,e){this.path=t,this.readTime=e},bd=function(t,e){this.path=t,this.version=e},wd=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};wd.store="remoteDocuments",wd.readTimeIndex="readTimeIndex",wd.readTimeIndexPath="readTime",wd.collectionReadTimeIndex="collectionReadTimeIndex",wd.collectionReadTimeIndexPath=["parentPath","readTime"];var _d=function(t){this.byteSize=t};_d.store="remoteDocumentGlobal",_d.key="remoteDocumentGlobalKey";var Ed=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Ed.store="targets",Ed.keyPath="targetId",Ed.queryTargetsIndexName="queryTargetsIndex",Ed.queryTargetsKeyPath=["canonicalId","targetId"];var Sd=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Sd.store="targetDocuments",Sd.keyPath=["targetId","path"],Sd.documentTargetsIndex="documentTargetsIndex",Sd.documentTargetsKeyPath=["path","targetId"];var Od=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Od.key="targetGlobalKey",Od.store="targetGlobal";var Td=function(t,e){this.collectionId=t,this.parent=e};Td.store="collectionParents",Td.keyPath=["collectionId","parent"];var Id=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Id.store="clientMetadata",Id.keyPath="clientId";var Cd=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Cd.store="bundles",Cd.keyPath="bundleId";var xd=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};xd.store="namedQueries",xd.keyPath="name";var Ad=Object(Lc.f)(Object(Lc.f)([],Object(Lc.f)(Object(Lc.f)([],Object(Lc.f)(Object(Lc.f)([],Object(Lc.f)(Object(Lc.f)([],[gd.store,yd.store,md.store,wd.store,Ed.store,pd.store,Od.store,Sd.store]),[Id.store])),[_d.store])),[Td.store])),[Cd.store,xd.store]),jd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kd=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Nd=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Dd=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Kc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Rd=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Nd,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Md(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Bd(e.target.error);n.ft.reject(new Md(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Md(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Bc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ud(e)},t}(),Pd=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Io.i)())&&Hc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Bc("SimpleDb","Removing database:",t),Vd(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Io.i)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Lc.b)(this,void 0,void 0,function(){var e,n=this;return Object(Lc.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Bc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Md(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Uc(Fc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Md(t,n))},i.onupgradeneeded=function(t){Bc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Bc("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Lc.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Lc.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Lc.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Rd.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Dd.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Bc("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ld=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Vd(this.Pt.delete())},t}(),Md=function(t){function e(e,n){var r=this;return(r=t.call(this,Fc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Lc.c)(e,t),e}(Uc);function Fd(t){return"IndexedDbTransactionError"===t.name}var Ud=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Bc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Bc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Vd(n)},t.prototype.add=function(t){return Bc("SimpleDb","ADD",this.store.name,t,t),Vd(this.store.add(t))},t.prototype.get=function(t){var e=this;return Vd(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Bc("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Bc("SimpleDb","DELETE",this.store.name,t),Vd(this.store.delete(t))},t.prototype.count=function(){return Bc("SimpleDb","COUNT",this.store.name),Vd(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Bc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Dd(function(n,r){e.onerror=function(t){var e=Bd(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Dd(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ld(i),s=e(i.primaryKey,i.value,o);if(s instanceof Dd){var a=s.catch(function(t){return o.done(),Dd.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Dd.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Vd(t){return new Dd(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Bd(t.target.error);n(e)}})}var qd=!1;function Bd(t){var e=Pd._t(Object(Io.i)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Uc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return qd||(qd=!0,setTimeout(function(){throw r},0)),r}}return t}var Hd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Lc.c)(e,t),e}(kd);function zd(t,e){var n=$c(t);return Pd.It(n.Mt,e)}var Gd=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Bh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Hh(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Hh(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(el.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},vf())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Xc(this.mutations,t.mutations,function(t,e){return Gh(t,e)})&&Xc(this.baseMutations,t.baseMutations,function(t,e){return Gh(t,e)})},t}(),Kd=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Wc(e.mutations.length===r.length);for(var i=yf(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Wd=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=el.min()),void 0===o&&(o=el.min()),void 0===s&&(s=ll.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),$d=function(t){this.Lt=t};function Qd(t,e){if(e.document)return Kf(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=_l.fromSegments(e.noDocument.path),r=tp(e.noDocument.readTime),i=Fl.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=_l.fromSegments(e.unknownDocument.path);return r=tp(e.unknownDocument.version),Fl.newUnknownDocument(o,r)}return Kc()}function Jd(t,e,n){var r=Yd(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Uf(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Df(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new wd(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Zd(e.version);return s=e.hasCommittedMutations,new wd(null,new vd(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Zd(e.version);return new wd(new bd(c,l),null,null,!0,r,i)}return Kc()}function Yd(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Xd(t){var e=new tl(t[0],t[1]);return el.fromTimestamp(e)}function Zd(t){var e=t.toTimestamp();return new dd(e.seconds,e.nanoseconds)}function tp(t){var e=new tl(t.seconds,t.nanoseconds);return el.fromTimestamp(e)}function ep(t,e){for(var n=(e.baseMutations||[]).map(function(e){return $f(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return $f(t.Lt,e)}),o=tl.fromMillis(e.localWriteTimeMs);return new Gd(e.batchId,o,n,i)}function np(t){var e,n,r=tp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?tp(t.lastLimboFreeSnapshotVersion):el.min();return void 0!==t.query.documents?(Wc(1===(n=t.query).documents.length),e=ph(ah(Bf(n.documents[0])))):e=function(t){return ph(Yf(t))}(t.query),new Wd(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ll.fromBase64String(t.resumeToken))}function rp(t,e){var n,r=Zd(e.snapshotVersion),i=Zd(e.lastLimboFreeSnapshotVersion);n=Hl(e.target)?Qf(t.Lt,e.target):Jf(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Ed(e.targetId,ql(e.target),r,o,e.sequenceNumber,i,n)}function ip(t){var e=Yf({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?gh(e,e.limit,"L"):e}var op=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return sp(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:tp(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return sp(t).put({bundleId:(n=e).id,createTime:Zd(Lf(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return ap(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:ip(e.bundledQuery),readTime:tp(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return ap(t).put(function(t){return{name:t.name,readTime:Zd(Lf(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function sp(t){return zd(t,Cd.store)}function ap(t){return zd(t,xd.store)}var up=function(){function t(){this.Bt=new cp}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Dd.resolve()},t.prototype.getCollectionParents=function(t,e){return Dd.resolve(this.Bt.getEntries(e))},t}(),cp=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new cf(sl.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new cf(sl.comparator)).toArray()},t}(),lp=function(){function t(){this.qt=new cp}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:cd(i)};return hp(t).put(o)}return Dd.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Zc(e),""],!1,!0);return hp(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(fd(o.parent))}return n})},t}();function hp(t){return zd(t,Td.store)}var fp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function pp(t,e,n){var r=t.store(yd.store),i=t.store(md.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Wc(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=md.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Dd.waitFor(o).next(function(){return c})}function gp(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Kc();e=t.noDocument}return JSON.stringify(e).length}dp.DEFAULT_COLLECTION_PERCENTILE=10,dp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dp.DEFAULT=new dp(41943040,dp.DEFAULT_COLLECTION_PERCENTILE,dp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dp.DISABLED=new dp(-1,0,0);var yp=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Wc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vp(t).$t({index:yd.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=bp(t),s=vp(t);return s.add({}).next(function(a){Wc("number"==typeof a);for(var u=new Gd(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Wf(t.Lt,e)}),i=n.mutations.map(function(e){return Wf(t.Lt,e)});return new yd(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new cf(function(t,e){return Yc(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=md.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,md.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Dd.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return vp(t).get(e).next(function(t){return t?(Wc(t.userId===n.userId),ep(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Dd.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return vp(t).$t({index:yd.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Wc(e.batchId>=r),o=ep(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return vp(t).$t({index:yd.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vp(t).Nt(yd.userMutationsIndex,n).next(function(t){return t.map(function(t){return ep(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=md.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return bp(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=fd(r[1]);if(a===n.userId&&e.path.isEqual(c))return vp(t).get(u).next(function(t){if(!t)throw Kc();Wc(t.userId===n.userId),o.push(ep(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new cf(Yc),i=[];return e.forEach(function(e){var o=md.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=bp(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=fd(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Dd.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=md.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new cf(Yc);return bp(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=fd(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(vp(t).get(e).next(function(t){if(null===t)throw Kc();Wc(t.userId===n.userId),r.push(ep(n.R,t))}))}),Dd.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return pp(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Dd.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Dd.resolve();var r=IDBKeyRange.lowerBound(md.prefixForUser(e.userId)),i=[];return bp(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=fd(t[1]);i.push(o)}else r.done()}).next(function(){Wc(0===i.length)})})},t.prototype.containsKey=function(t,e){return mp(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return wp(t).get(this.userId).next(function(t){return t||new gd(e.userId,-1,"")})},t}();function mp(t,e,n){var r=md.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return bp(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function vp(t){return zd(t,yd.store)}function bp(t){return zd(t,md.store)}function wp(t){return zd(t,gd.store)}var _p=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Ep=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new _p(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return el.fromTimestamp(new tl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Sp(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Wc(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Sp(t).$t(function(s,a){var u=np(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Dd.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Sp(t).$t(function(t,n){var r=np(n);e(r)})},t.prototype.Xt=function(t){return Op(t).get(Od.key).next(function(t){return Wc(null!==t),t})},t.prototype.Zt=function(t,e){return Op(t).put(Od.key,e)},t.prototype.te=function(t,e){return Sp(t).put(rp(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=ql(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Sp(t).$t({range:r,index:Ed.queryTargetsIndexName},function(t,n,r){var o=np(n);Bl(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Tp(t);return e.forEach(function(e){var s=cd(e.path);i.push(o.put(new Sd(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Dd.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Tp(t);return Dd.forEach(e,function(e){var o=cd(e.path);return Dd.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Tp(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Tp(t),i=vf();return r.$t({range:n,kt:!0},function(t,e,n){var r=fd(t[1]),o=new _l(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=cd(e.path),r=IDBKeyRange.bound([n],[Zc(n)],!1,!0),i=0;return Tp(t).$t({index:Sd.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Sp(t).get(e).next(function(t){return t?np(t):null})},t}();function Sp(t){return zd(t,Ed.store)}function Op(t){return zd(t,Od.store)}function Tp(t){return zd(t,Sd.store)}function Ip(t){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(e){if(t.code!==Fc.FAILED_PRECONDITION||t.message!==jd)throw t;return Bc("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Cp(t,e){var n=t[1],r=e[1],i=Yc(t[0],e[0]);return 0===i?Yc(n,r):i}var xp=function(){function t(t){this.ne=t,this.buffer=new cf(Cp),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Cp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ap=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Bc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Lc.b)(e,void 0,void 0,function(){var e;return Object(Lc.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Fd(e=n.sent())?(Bc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Ip(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),jp=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Dd.resolve(Mc.o);var r=new xp(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Bc("LruGarbageCollector","Garbage collection skipped; disabled"),Dd.resolve(fp)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Bc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),fp):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Bc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),qc()<=Co.a.DEBUG&&Bc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Dd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),kp=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new jp(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Np(t,n)},t.prototype.removeReference=function(t,e,n){return Np(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Np(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return wp(t).Ot(function(r){return mp(t,r,e).next(function(t){return t&&(n=!0),Dd.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Tp(t).delete([0,cd(s.path)])})});i.push(u)}}).next(function(){return Dd.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Np(t,e)},t.prototype.we=function(t,e){var n,r=Tp(t),i=Mc.o;return r.$t({index:Sd.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Mc.o&&e(new _l(fd(n)),i),i=s,n=o):i=Mc.o}).next(function(){i!==Mc.o&&e(new _l(fd(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Np(t,e){return Tp(t).put(function(t,e){return new Sd(0,cd(t.path),e)}(e,t.currentSequenceNumber))}var Dp=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){rl(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return il(this.inner)},t}(),Rp=function(){function t(){this.changes=new Dp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:el.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Fl.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Dd.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Pp=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Fp(t).put(Up(e),n)},t.prototype.removeEntry=function(t,e){var n=Fp(t),r=Up(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Fp(t).get(Up(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Fp(t).get(Up(e)).next(function(t){return{document:n.ye(e,t),size:gp(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=ff();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=ff(),i=new sf(_l.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,gp(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Dd.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Fp(t).$t({range:r},function(t,e,r){for(var s=_l.fromSegments(t);o&&_l.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ff(),o=e.path.length+1,s={};if(n.isEqual(el.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Yd(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=wd.collectionReadTimeIndex}return Fp(t).$t(s,function(t,n,s){if(t.length===o){var a=Qd(r.R,n);e.path.isPrefixOf(a.key.path)?bh(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Lp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Mp(t).get(_d.key).next(function(t){return Wc(!!t),t})},t.prototype.me=function(t,e){return Mp(t).put(_d.key,e)},t.prototype.ye=function(t,e){if(e){var n=Qd(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(el.min()))return n}return Fl.newInvalidDocument(t)},t}(),Lp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Dp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Lc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new cf(function(t,e){return Yc(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Jd(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=gp(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Jd(e.Ie.R,Fl.newNoDocument(o,el.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Dd.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Rp);function Mp(t){return zd(t,_d.store)}function Fp(t){return zd(t,wd.store)}function Up(t){return t.path.toArray()}var Vp=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Wc(n<r&&n>=0&&r<=11);var o=new Rd("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(pd.store)}(t),function(t){t.createObjectStore(gd.store,{keyPath:gd.keyPath}),t.createObjectStore(yd.store,{keyPath:yd.keyPath,autoIncrement:!0}).createIndex(yd.userMutationsIndex,yd.userMutationsKeyPath,{unique:!0}),t.createObjectStore(md.store)}(t),qp(t),function(t){t.createObjectStore(wd.store)}(t));var s=Dd.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Sd.store),t.deleteObjectStore(Ed.store),t.deleteObjectStore(Od.store)}(t),qp(t)),s=s.next(function(){return function(t){var e=t.store(Od.store),n=new Od(0,0,el.min().toTimestamp(),0);return e.put(Od.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(yd.store).Nt().next(function(n){t.deleteObjectStore(yd.store),t.createObjectStore(yd.store,{keyPath:yd.keyPath,autoIncrement:!0}).createIndex(yd.userMutationsIndex,yd.userMutationsKeyPath,{unique:!0});var r=e.store(yd.store),i=n.map(function(t){return r.put(t)});return Dd.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Id.store,{keyPath:Id.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(_d.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(wd.store);e.createIndex(wd.readTimeIndex,wd.readTimeIndexPath,{unique:!1}),e.createIndex(wd.collectionReadTimeIndex,wd.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Cd.store,{keyPath:Cd.keyPath})}(t),function(t){t.createObjectStore(xd.store,{keyPath:xd.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(wd.store).$t(function(t,n){e+=gp(n)}).next(function(){var n=new _d(e);return t.store(_d.store).put(_d.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(gd.store),r=t.store(yd.store);return n.Nt().next(function(n){return Dd.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(yd.userMutationsIndex,i).next(function(r){return Dd.forEach(r,function(r){Wc(r.userId===n.userId);var i=ep(e.R,r);return pp(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Sd.store),n=t.store(wd.store);return t.store(Od.store).get(Od.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new sl(n),s=function(t){return[0,cd(t)]}(o);r.push(e.get(s).next(function(n){return n?Dd.resolve():function(n){return e.put(new Sd(0,cd(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Dd.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Td.store,{keyPath:Td.keyPath});var n=e.store(Td.store),r=new cp,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:cd(i)})}};return e.store(wd.store).$t({kt:!0},function(t,e){var n=new sl(t);return i(n.popLast())}).next(function(){return e.store(md.store).$t({kt:!0},function(t,e){var n=fd(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Ed.store);return n.$t(function(t,r){var i=np(r),o=rp(e.R,i);return n.put(o)})},t}();function qp(t){t.createObjectStore(Sd.store,{keyPath:Sd.keyPath}).createIndex(Sd.documentTargetsIndex,Sd.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ed.store,{keyPath:Ed.keyPath}).createIndex(Ed.queryTargetsIndexName,Ed.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Od.store)}var Bp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Hp=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Uc(Fc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kp(this,i),this.Le=n+"main",this.R=new $d(u),this.Be=new Pd(this.Le,11,new Vp(this.R)),this.qe=new Ep(this.referenceDelegate,this.R),this.Ut=new lp,this.Ue=function(t,e){return new Pp(t,e)}(this.R,this.Ut),this.Qe=new op,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Hc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Uc(Fc.FAILED_PRECONDITION,Bp);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Mc(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Lc.b)(e,void 0,void 0,function(){return Object(Lc.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Lc.b)(e,void 0,void 0,function(){return Object(Lc.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Lc.b)(e,void 0,void 0,function(){return Object(Lc.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Gp(e).put(new Id(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Fd(e))return Bc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Bc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return zp(t).get(pd.key).next(function(t){return Dd.resolve(e.tn(t))})},t.prototype.en=function(t){return Gp(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Lc.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Lc.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=zd(t,Id.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Dd.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Dd.resolve(!0):zp(t).get(pd.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Uc(Fc.FAILED_PRECONDITION,Bp);return!1}}return!(!e.networkEnabled||!e.inForeground)||Gp(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Bc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Lc.b)(this,void 0,void 0,function(){var t=this;return Object(Lc.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[pd.store,Id.store],function(e){var n=new Hd(e,Mc.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Gp(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return yp.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Bc("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Ad,function(o){return r=new Hd(o,i.Ne?i.Ne.next():Mc.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Hc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Uc(Fc.FAILED_PRECONDITION,jd);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return zp(t).get(pd.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Uc(Fc.FAILED_PRECONDITION,Bp)})},t.prototype.Ze=function(t){var e=new pd(this.clientId,this.allowTabSynchronization,Date.now());return zp(t).put(pd.key,e)},t.yt=function(){return Pd.yt()},t.prototype.Xe=function(t){var e=this,n=zp(t);return n.get(pd.key).next(function(t){return e.tn(t)?(Bc("IndexedDbPersistence","Releasing primary lease."),n.delete(pd.key)):Dd.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Hc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Bc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Hc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Hc("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function zp(t){return zd(t,pd.store)}function Gp(t){return zd(t,Id.store)}function Kp(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Wp=function(t,e){this.progress=t,this.wn=e},$p=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return _l.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):fh(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new _l(e)).next(function(t){var e=pf();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=pf();return this.Ut.getCollectionParents(t,i).next(function(s){return Dd.forEach(s,function(s){var a=function(t,e){return new oh(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Fl.newInvalidDocument(c),r=r.insert(c,l)),Hh(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){bh(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=vf(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof $h&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Qp=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=vf(),i=vf(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Jp=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(el.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(uh(e)||ch(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(qc()<=Co.a.DEBUG&&Bc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),vh(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new cf(wh(t));return e.forEach(function(e,r){bh(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return qc()<=Co.a.DEBUG&&Bc("QueryEngine","Using full collection scan to execute query:",vh(e)),this.Sn.getDocumentsMatchingQuery(t,e,el.min())},t}(),Yp=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new sf(Yc),this.kn=new Dp(function(t){return ql(t)},Bl),this.$n=el.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new $p(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Xp(t,e,n,r){return new Yp(t,e,n,r)}function Zp(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Lc.d)(this,function(s){switch(s.label){case 0:return n=$c(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new $p(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=vf(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function tg(t,e){var n=$c(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Dd.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Wc(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function eg(t){var e=$c(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function ng(t,e){var n=$c(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Wc(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=ff();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(rg(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(el.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Dd.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function rg(t,e,n,r,i){var o=vf();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ff();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(el.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Bc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function ig(t,e){var n=$c(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function og(t,e){var n=$c(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Dd.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Wd(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function sg(t,e,n){return Object(Lc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Lc.d)(this,function(a){switch(a.label){case 0:r=$c(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Fd(s=a.sent()))throw s;return Bc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function ag(t,e,n){var r=$c(t),i=el.min(),o=vf();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=$c(t),i=r.kn.get(n);return void 0!==i?Dd.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,ph(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:el.min(),n?o:vf())}).next(function(t){return{documents:t,Bn:o}})})}function ug(t,e){var n=$c(t),r=$c(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function cg(t){var e=$c(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=$c(t),i=ff(),o=Yd(n),s=Fp(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:wd.readTimeIndex,range:a},function(t,e){var n=Qd(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Xd(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function lg(t){return Object(Lc.b)(this,void 0,void 0,function(){var e;return Object(Lc.d)(this,function(n){return[2,(e=$c(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Fp(t),n=el.min();return e.$t({index:wd.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Xd(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function hg(t,e,n,r){return Object(Lc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(Lc.d)(this,function(p){switch(p.label){case 0:for(i=$c(t),o=vf(),s=ff(),a=yf(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,og(i,function(t){return ph(ah(sl.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return rg(t,f,s,el.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function fg(t,e,n){return void 0===n&&(n=vf()),Object(Lc.b)(this,void 0,void 0,function(){var r,i;return Object(Lc.d)(this,function(o){switch(o.label){case 0:return[4,og(t,ph(ip(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=$c(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Lf(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(ll.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var dg=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Dd.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Lf(n.createTime)}),Dd.resolve()},t.prototype.getNamedQuery=function(t,e){return Dd.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:ip(t.bundledQuery),readTime:Lf(t.readTime)}}(e)),Dd.resolve()},t}(),pg=function(){function t(){this.Wn=new cf(gg.Gn),this.zn=new cf(gg.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new gg(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new gg(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new _l(new sl([])),r=new gg(n,t),i=new gg(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new _l(new sl([])),n=new gg(e,t),r=new gg(e,t+1),i=vf();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new gg(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),gg=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return _l.comparator(t.key,e.key)||Yc(t.ns,e.ns)},t.Hn=function(t,e){return Yc(t.ns,e.ns)||_l.comparator(t.key,e.key)},t}(),yg=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new cf(gg.Gn)}return t.prototype.checkEmpty=function(t){return Dd.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Gd(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new gg(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Dd.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Dd.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Dd.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Dd.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Dd.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new gg(e,0),i=new gg(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Dd.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new cf(Yc);return e.forEach(function(t){var e=new gg(t,0),i=new gg(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Dd.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;_l.isDocumentKey(i)||(i=i.child(""));var o=new gg(new _l(i),0),s=new cf(Yc);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Dd.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Wc(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Dd.forEach(e.mutations,function(i){var o=new gg(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new gg(e,0),r=this.rs.firstAfterOrEqual(n);return Dd.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Dd.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),mg=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new sf(_l.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Dd.resolve(n?n.document.clone():Fl.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ff();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Fl.newInvalidDocument(t))}),Dd.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ff(),i=new _l(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||bh(e,u)&&(r=r.insert(u.key,u.clone()))}return Dd.resolve(r)},t.prototype.fs=function(t,e){return Dd.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new vg(this)},t.prototype.getSize=function(t){return Dd.resolve(this.size)},t}(),vg=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Lc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Dd.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Rp),bg=function(){function t(t){this.persistence=t,this.ds=new Dp(function(t){return ql(t)},Bl),this.lastRemoteSnapshotVersion=el.min(),this.highestTargetId=0,this.ws=0,this._s=new pg,this.targetCount=0,this.ys=_p.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Dd.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Dd.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Dd.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Dd.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Dd.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new _p(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Dd.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Dd.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Dd.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Dd.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Dd.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Dd.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Dd.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Dd.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Dd.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Dd.resolve(n)},t.prototype.containsKey=function(t,e){return Dd.resolve(this._s.containsKey(e))},t}(),wg=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Mc(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new bg(this),this.Ut=new up,this.Ue=function(t,e){return new mg(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new $d(e),this.Qe=new dg(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new yg(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Bc("MemoryPersistence","Starting transaction:",t);var i=new _g(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Dd.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),_g=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Lc.c)(e,t),e}(kd),Eg=function(){function t(t){this.persistence=t,this.As=new pg,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Kc()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Dd.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Dd.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Dd.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dd.forEach(this.vs,function(r){var i=_l.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Dd.or([function(){return Dd.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Sg=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Og(t,e){return"firestore_clients_"+t+"_"+e}function Tg(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Ig(t,e){return"firestore_targets_"+t+"_"+e}Sg.UNAUTHENTICATED=new Sg(null),Sg.GOOGLE_CREDENTIALS=new Sg("google-credentials-uid"),Sg.FIRST_PARTY=new Sg("first-party-uid");var Cg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Uc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Hc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),xg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Uc(i.error.code,i.error.message)),o?new t(e,i.state,r):(Hc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ag=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=wf(),s=0;i&&s<r.activeTargetIds.length;++s)i=wl(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Hc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),jg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Hc("SharedClientState","Failed to parse online state: "+e),null)},t}(),kg=function(){function t(){this.activeTargetIds=wf()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ng=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new sf(Yc),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Og(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new kg),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Lc.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Lc.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Og(this.persistenceKey,r)))&&(o=Ag.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Ig(this.persistenceKey,t));if(n){var r=xg.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Ig(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Bc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Bc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Bc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Bc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Hc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Lc.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Lc.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Mc.o;if(null!=t)try{var n=JSON.parse(t);Wc("number"==typeof n),e=n}catch(t){Hc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Mc.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Cg(this.currentUser,t,e,n),i=Tg(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Tg(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Ig(this.persistenceKey,t),i=new xg(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Ag.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Cg.Vs(new Sg(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return xg.Vs(r,e)},t.prototype.js=function(t){return jg.Vs(t)},t.prototype.ii=function(t){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Bc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=wf();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Dg=function(){function t(){this.li=new kg,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new kg,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Rg=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Pg=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Bc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Bc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Lg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Mg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Fg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(Lc.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Pc;s.listenOnce(kc.COMPLETE,function(){try{switch(s.getLastErrorCode()){case jc.NO_ERROR:var e=s.getResponseJson();Bc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case jc.TIMEOUT:Bc("Connection",'RPC "'+t+'" timed out'),o(new Uc(Fc.DEADLINE_EXCEEDED,"Request time out"));break;case jc.HTTP_ERROR:var n=s.getStatus();if(Bc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Fc).indexOf(e)>=0?e:Fc.UNKNOWN}(r.status);o(new Uc(a,r.message))}else o(new Uc(Fc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Uc(Fc.UNAVAILABLE,"Connection failed."));break;default:Kc()}}finally{Bc("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new bc,i=Ea(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Dc({})),this.Fi(o.initMessageHeaders,e),Object(Io.n)()||Object(Io.p)()||Object(Io.l)()||Object(Io.m)()||Object(Io.q)()||Object(Io.k)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Bc("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Mg({Ei:function(t){c?Bc("Connection","Not sending because WebChannel is closed:",t):(u||(Bc("Connection","Opening WebChannel transport."),a.open(),u=!0),Bc("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Rc.EventType.OPEN,function(){c||Bc("Connection","WebChannel transport opened.")}),h(a,Rc.EventType.CLOSE,function(){c||(c=!0,Bc("Connection","WebChannel transport closed"),l.Vi())}),h(a,Rc.EventType.ERROR,function(t){c||(c=!0,zc("Connection","WebChannel transport errored:",t),l.Vi(new Uc(Fc.UNAVAILABLE,"The operation could not be completed")))}),h(a,Rc.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Wc(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Bc("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Xh[t];if(void 0!==e)return of(e)}(i),s=r.message;void 0===o&&(o=Fc.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Uc(o,s)),a.close()}else Bc("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Nc.STAT_EVENT,function(t){10===t.stat?Bc("Connection","Detected buffering proxy"):11===t.stat&&Bc("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Bc("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Bc("RestConnection","Received: ",t),t},function(e){throw zc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.8",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Lg[t]},t}());function Ug(){return"undefined"!=typeof window?window:null}function Vg(){return"undefined"!=typeof document?document:null}function qg(t){return new Nf(t,!0)}var Bg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Bc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Hg=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Bg(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Fc.RESOURCE_EXHAUSTED?(Hc(e.toString()),Hc("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Fc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Uc(Fc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Lc.b)(t,void 0,void 0,function(){return Object(Lc.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Bc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Bc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),zg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Lc.c)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Kc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Wc(void 0===e||"string"==typeof e),ll.fromBase64String(e||"")):(Wc(void 0===e||e instanceof Uint8Array),ll.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Fc.UNKNOWN:of(t.code);return new Uc(e,t.message||"")}(a);n=new Tf(r,i,o,s||null)}else if("documentChange"in e){i=Vf(t,(r=e.documentChange).document.name),o=Lf(r.document.updateTime);var a=new Ll({mapValue:{fields:r.document.fields}}),u=(s=Fl.newFoundDocument(i,o,a),r.targetIds||[]);n=new Sf(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Vf(t,(r=e.documentDelete).document),o=r.readTime?Lf(r.readTime):el.min(),a=Fl.newNoDocument(i,o),n=new Sf([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Vf(t,(r=e.documentRemove).document),n=new Sf([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Kc();var c=e.filter;i=new nf(r=c.count||0),n=new Of(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return el.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?el.min():e.readTime?Lf(e.readTime):el.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Hf(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Hl(r)?{documents:Qf(t,r)}:{query:Jf(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Rf(t,e.resumeToken):e.snapshotVersion.compareTo(el.min())>0&&(n.readTime=Df(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Kc()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Hf(this.R),e.removeTarget=t,this.cr(e)},e}(Hg),Gg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Lc.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Wc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Wc(void 0!==e),t.map(function(t){return function(t,e){var n=Lf(t.updateTime?t.updateTime:e);return n.isEqual(el.min())&&(n=Lf(e)),new Fh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Lf(t.commitTime);return this.listener.Tr(n,e)}return Wc(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Hf(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Wf(e.R,t)})};this.cr(n)},e}(Hg),Kg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Lc.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Uc(Fc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Fc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Uc(Fc.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Fc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Uc(Fc.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Wg=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Hc(e),this.Vr=!1):Bc("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),$g=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Lc.b)(o,void 0,void 0,function(){return Object(Lc.d)(this,function(t){switch(t.label){case 0:return ry(this)?(Bc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Lc.b)(this,void 0,void 0,function(){var e;return Object(Lc.d)(this,function(n){switch(n.label){case 0:return(e=$c(t)).Or.add(4),[4,Jg(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Qg(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Wg(n,r)};function Qg(t){return Object(Lc.b)(this,void 0,void 0,function(){var e,n;return Object(Lc.d)(this,function(r){switch(r.label){case 0:if(!ry(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Jg(t){return Object(Lc.b)(this,void 0,void 0,function(){var e,n;return Object(Lc.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Yg(t,e){var n=$c(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),ny(n)?ey(n):vy(n).er()&&Zg(n,e))}function Xg(t,e){var n=$c(t),r=vy(n);n.$r.delete(e),r.er()&&ty(n,e),0===n.$r.size&&(r.er()?r.ir():ry(n)&&n.Br.set("Unknown"))}function Zg(t,e){t.qr.U(e.targetId),vy(t).mr(e)}function ty(t,e){t.qr.U(e),vy(t).yr(e)}function ey(t){t.qr=new Cf({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),vy(t).start(),t.Br.Sr()}function ny(t){return ry(t)&&!vy(t).tr()&&t.$r.size>0}function ry(t){return 0===$c(t).Or.size}function iy(t){t.qr=void 0}function oy(t){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(e){return t.$r.forEach(function(e,n){Zg(t,e)}),[2]})})}function sy(t,e){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(n){return iy(t),ny(t)?(t.Br.Nr(e),ey(t)):t.Br.set("Unknown"),[2]})})}function ay(t,e,n){return Object(Lc.b)(this,void 0,void 0,function(){var r,i,o;return Object(Lc.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Tf&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Lc.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Bc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,uy(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Sf?t.qr.X(e):e instanceof Of?t.qr.rt(e):t.qr.et(e),n.isEqual(el.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,eg(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(ll.EMPTY_BYTE_STRING,n.snapshotVersion)),ty(t,e);var r=new Wd(n.target,e,1,n.sequenceNumber);Zg(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Bc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,uy(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function uy(t,e,n){return Object(Lc.b)(this,void 0,void 0,function(){var r=this;return Object(Lc.d)(this,function(i){switch(i.label){case 0:if(!Fd(e))throw e;return t.Or.add(1),[4,Jg(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return eg(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Lc.b)(r,void 0,void 0,function(){return Object(Lc.d)(this,function(e){switch(e.label){case 0:return Bc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Qg(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function cy(t,e){return e().catch(function(n){return uy(t,n,e)})}function ly(t){return Object(Lc.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Lc.d)(this,function(s){switch(s.label){case 0:e=$c(t),n=by(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return ry(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,ig(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=by(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,uy(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return hy(e)&&fy(e),[2]}})})}function hy(t){return ry(t)&&!by(t).tr()&&t.kr.length>0}function fy(t){by(t).start()}function dy(t){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(e){return by(t).Ar(),[2]})})}function py(t){return Object(Lc.b)(this,void 0,void 0,function(){var e,n,r;return Object(Lc.d)(this,function(i){for(e=by(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function gy(t,e,n){return Object(Lc.b)(this,void 0,void 0,function(){var r,i;return Object(Lc.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Kd.from(r,e,n),[4,cy(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,ly(t)];case 2:return o.sent(),[2]}})})}function yy(t,e){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(n){switch(n.label){case 0:return e&&by(t).pr?[4,function(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r;return Object(Lc.d)(this,function(i){switch(i.label){case 0:return rf(r=e.code)&&r!==Fc.ABORTED?(n=t.kr.shift(),by(t).sr(),[4,cy(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,ly(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return hy(t)&&fy(t),[2]}})})}function my(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n;return Object(Lc.d)(this,function(r){switch(r.label){case 0:return n=$c(t),e?(n.Or.delete(2),[4,Qg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Jg(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function vy(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=$c(t);return r.br(),new zg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:oy.bind(null,t),Ri:sy.bind(null,t),_r:ay.bind(null,t)}),t.Mr.push(function(n){return Object(Lc.b)(e,void 0,void 0,function(){return Object(Lc.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),ny(t)?ey(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),iy(t),e.label=3;case 3:return[2]}})})})),t.Ur}function by(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=$c(t);return r.br(),new Gg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:dy.bind(null,t),Ri:yy.bind(null,t),Ir:py.bind(null,t),Tr:gy.bind(null,t)}),t.Mr.push(function(n){return Object(Lc.b)(e,void 0,void 0,function(){return Object(Lc.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,ly(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Bc("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var wy=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Nd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Uc(Fc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function _y(t,e){if(Hc("AsyncQueue",e+": "+t),Fd(t))return new Uc(Fc.UNAVAILABLE,e+": "+t);throw t}var Ey=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||_l.comparator(e.key,n.key)}:function(t,e){return _l.comparator(t.key,e.key)},this.keyedMap=pf(),this.sortedSet=new sf(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Sy=function(){function t(){this.Kr=new sf(_l.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Kc():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Oy=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Ey.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&yh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ty=function(){this.Wr=void 0,this.listeners=[]},Iy=function(){this.queries=new Dp(function(t){return mh(t)},yh),this.onlineState="Unknown",this.Gr=new Set};function Cy(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Lc.d)(this,function(c){switch(c.label){case 0:if(n=$c(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Ty),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=_y(a,"Initialization of query '"+vh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&ky(n),[2]}})})}function xy(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Lc.d)(this,function(a){return n=$c(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Ay(t,e){for(var n=$c(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&ky(n)}function jy(t,e,n){var r=$c(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ky(t){t.Gr.forEach(function(t){t.next()})}var Ny=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Oy(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Oy.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Dy=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Ry=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Vf(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Kf(this.R,t.document,!1):Fl.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Lf(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Ry(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||vf()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Lc.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Lc.d)(this,function(o){switch(o.label){case 0:return[4,hg(this.localStore,new Ry(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,fg(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Wp(Object.assign({},this.progress),t))]}})})}}();var Py=function(t){this.key=t},Ly=function(t){this.key=t},My=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=vf(),this.mutatedKeys=vf(),this.lo=wh(t),this.fo=new Ey(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Sy,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=uh(this.query)&&i.size===this.query.limit?i.last():null,c=ch(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=bh(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),uh(this.query)||ch(this.query))for(;s.size>this.query.limit;){var l=uh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kc()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Oy(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Sy,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=vf(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Ly(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Py(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=vf();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Oy.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Fy=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Uy=function(t){this.key=t,this.bo=!1},Vy=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Dp(function(t){return mh(t)},yh),this.Vo=new Map,this.So=new Set,this.Do=new sf(_l.comparator),this.Co=new Map,this.No=new pg,this.xo={},this.Fo=new Map,this.ko=_p.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function qy(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Lc.d)(this,function(a){switch(a.label){case 0:return n=ym(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,og(n.localStore,ph(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,By(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Yg(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function By(t,e,n,r){return Object(Lc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Lc.d)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Object(Lc.b)(this,void 0,void 0,function(){var i,o,s;return Object(Lc.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,ag(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(em(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,ag(t.localStore,e,!0)];case 1:return i=l.sent(),o=new My(e,i.Bn),s=o._o(i.documents),a=Ef.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),em(t,n,u.To),c=new Fy(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Hy(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Lc.d)(this,function(o){switch(o.label){case 0:return n=$c(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!yh(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,sg(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Xg(n.remoteStore,r.targetId),Zy(n,r.targetId)}).catch(Ip)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Zy(n,r.targetId),[4,sg(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function zy(t,e,n){return Object(Lc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Lc.d)(this,function(a){switch(a.label){case 0:r=mm(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=$c(t),i=tl.now(),o=e.reduce(function(t,e){return t.add(e.key)},vf());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=zh(c,n.get(c.key));null!=l&&s.push(new $h(c.key,l,Ml(l.value.mapValue),Uh.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new sf(Yc)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,im(r,i.changes)];case 3:return a.sent(),[4,ly(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=_y(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Gy(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r;return Object(Lc.d)(this,function(i){switch(i.label){case 0:n=$c(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ng(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Wc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Wc(r.bo):t.removedDocuments.size>0&&(Wc(r.bo),r.bo=!1))}),[4,im(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Ip(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Ky(t,e,n){var r=$c(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=$c(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&ky(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Wy(t,e,n){return Object(Lc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Lc.d)(this,function(c){switch(c.label){case 0:return(r=$c(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new sf(_l.comparator)).insert(o,Fl.newNoDocument(o,el.min())),a=vf().add(o),u=new _f(el.min(),new Map,new cf(Yc),s,a),[4,Gy(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),rm(r),[3,4];case 2:return[4,sg(r.localStore,e,!1).then(function(){return Zy(r,e,n)}).catch(Ip)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function $y(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Lc.d)(this,function(o){switch(o.label){case 0:n=$c(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,tg(n.localStore,e)];case 2:return i=o.sent(),Xy(n,r,null),Yy(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,im(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Ip(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Qy(t,e,n){return Object(Lc.b)(this,void 0,void 0,function(){var r,i;return Object(Lc.d)(this,function(o){switch(o.label){case 0:r=$c(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=$c(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Wc(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Xy(r,e,n),Yy(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,im(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Ip(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Jy(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Lc.d)(this,function(a){switch(a.label){case 0:ry((n=$c(t)).remoteStore)||Bc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=$c(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=_y(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Yy(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Xy(t,e,n){var r=$c(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Zy(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||tm(t,e)})}function tm(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Xg(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),rm(t))}function em(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Py?(t.No.addReference(o.key,e),nm(t,o)):o instanceof Ly?(Bc("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||tm(t,o.key)):Kc()}}function nm(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Bc("SyncEngine","New document in limbo: "+n),t.So.add(r),rm(t))}function rm(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new _l(sl.fromString(e)),r=t.ko.next();t.Co.set(r,new Uy(n)),t.Do=t.Do.insert(n,r),Yg(t.remoteStore,new Wd(ph(ah(n.path)),r,2,Mc.o))}}function im(t,e,n){return Object(Lc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Lc.d)(this,function(a){switch(a.label){case 0:return r=$c(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Qp.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Lc.d)(this,function(l){switch(l.label){case 0:n=$c(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Dd.forEach(e,function(e){return Dd.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Dd.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Fd(r=l.sent()))throw r;return Bc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function om(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r;return Object(Lc.d)(this,function(i){switch(i.label){case 0:return(n=$c(t)).currentUser.isEqual(e)?[3,3]:(Bc("SyncEngine","User change. New user:",e.toKey()),[4,Zp(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Uc(Fc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,im(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function sm(t,e){var n=$c(t),r=n.Co.get(e);if(r&&r.bo)return vf().add(r.key);var i=vf(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function am(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Lc.d)(this,function(o){switch(o.label){case 0:return[4,ag((n=$c(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&em(n,e.targetId,i.To),i)]}})})}function um(t){return Object(Lc.b)(this,void 0,void 0,function(){var e;return Object(Lc.d)(this,function(n){return[2,cg((e=$c(t)).localStore).then(function(t){return im(e,t)})]})})}function cm(t,e,n,r){return Object(Lc.b)(this,void 0,void 0,function(){var i,o;return Object(Lc.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=$c(t),r=$c(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Dd.resolve(null)})})}((i=$c(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,ly(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Xy(i,e,r||null),Yy(i,e),function(t,e){$c($c(t)._n).Gt(e)}(i.localStore,e)):Kc(),s.label=4;case 4:return[4,im(i,o)];case 5:return s.sent(),[3,7];case 6:Bc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function lm(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Lc.d)(this,function(c){switch(c.label){case 0:return ym(n=$c(t)),mm(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,hm(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,my(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Yg(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Zy(n,e),sg(n.localStore,e,!0)}),Xg(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,hm(n,a)];case 5:return c.sent(),function(t){var e=$c(t);e.Co.forEach(function(t,n){Xg(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new sf(_l.comparator)}(n),n.$o=!1,[4,my(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function hm(t,e,n){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Lc.d)(this,function(g){switch(g.label){case 0:n=$c(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,og(n.localStore,ph(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,am(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,ug(n.localStore,a)];case 8:return p=g.sent(),[4,og(n.localStore,p)];case 9:return u=g.sent(),[4,By(n,fm(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function fm(t){return sh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function dm(t){var e=$c(t);return $c($c(e.localStore).persistence).fn()}function pm(t,e,n,r){return Object(Lc.b)(this,void 0,void 0,function(){var i,o,s;return Object(Lc.d)(this,function(a){switch(a.label){case 0:return(i=$c(t)).$o?(Bc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,cg(i.localStore)];case 3:return o=a.sent(),s=_f.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,im(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,sg(i.localStore,e,!0)];case 6:return a.sent(),Zy(i,e,r),[3,8];case 7:Kc(),a.label=8;case 8:return[2]}})})}function gm(t,e,n){return Object(Lc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Lc.d)(this,function(f){switch(f.label){case 0:if(!(r=ym(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Bc("SyncEngine","Adding an already active target "+s),[3,5]):[4,ug(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,og(r.localStore,a)];case 3:return u=f.sent(),[4,By(r,fm(a),u.targetId,!1)];case 4:f.sent(),Yg(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Lc.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,sg(r.localStore,t,!1).then(function(){Xg(r.remoteStore,t),Zy(r,t)}).catch(Ip)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function ym(t){var e=$c(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wy.bind(null,e),e.vo._r=Ay.bind(null,e.eventManager),e.vo.Mo=jy.bind(null,e.eventManager),e}function mm(t){var e=$c(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$y.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qy.bind(null,e),e}var vm=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(e){switch(e.label){case 0:return this.R=qg(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Xp(this.persistence,new Jp,t.initialUser,this.R)},t.prototype.qo=function(t){return new wg(Eg.bs,this.R)},t.prototype.Bo=function(t){return new Dg},t.prototype.terminate=function(){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),bm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Lc.c)(e,t),e.prototype.initialize=function(e){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,lg(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,mm(this.Ko.syncEngine)];case 4:return n.sent(),[4,ly(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Xp(this.persistence,new Jp,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Ap(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Kp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?dp.withCacheSize(this.cacheSizeBytes):dp.DEFAULT;return new Hp(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Ug(),Vg(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Dg},e}(vm),wm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Lc.c)(e,t),e.prototype.initialize=function(e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r=this;return Object(Lc.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Ng?(this.sharedClientState.syncEngine={ui:cm.bind(null,n),ai:pm.bind(null,n),hi:gm.bind(null,n),fn:dm.bind(null,n),ci:um.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Lc.b)(r,void 0,void 0,function(){return Object(Lc.d)(this,function(e){switch(e.label){case 0:return[4,lm(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Ug();if(!Ng.yt(e))throw new Uc(Fc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Kp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ng(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(bm),_m=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n=this;return Object(Lc.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Ky(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=om.bind(null,this.syncEngine),[4,my(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Iy},t.prototype.createDatastore=function(t){var e=qg(t.databaseInfo.databaseId),n=new Fg(t.databaseInfo);return function(t,e,n){return new Kg(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Ky(s.syncEngine,t,0)},o=Pg.yt()?new Pg:new Rg,new $g(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Vy(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Lc.b)(this,void 0,void 0,function(){var e;return Object(Lc.d)(this,function(n){switch(n.label){case 0:return e=$c(t),Bc("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Jg(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Em=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Sm=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Nd,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Lc.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Lc.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Dy(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Lc.b)(this,void 0,void 0,function(){var t,e;return Object(Lc.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Lc.b)(this,void 0,void 0,function(){var e;return Object(Lc.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Lc.b)(this,void 0,void 0,function(){var t,e;return Object(Lc.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Lc.b)(this,void 0,void 0,function(){var e,n=this;return Object(Lc.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Uc(Fc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Lc.d)(this,function(u){switch(u.label){case 0:return n=$c(t),r=Hf(n.R)+"/documents",i={documents:e.map(function(t){return Uf(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Wc(!!e.found);var n=Vf(t,e.found.name),r=Lf(e.found.updateTime),i=new Ll({mapValue:{fields:e.found.fields}});return Fl.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Wc(!!e.missing),Wc(!!e.readTime);var n=Vf(t,e.missing),r=Lf(e.readTime);return Fl.newNoDocument(n,r)}(t,e):Kc()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Wc(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new tf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Lc.b)(this,void 0,void 0,function(){var t,e=this;return Object(Lc.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=_l.fromPath(n);e.mutations.push(new ef(r,e.precondition(r)))}),[4,function(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Lc.d)(this,function(o){switch(o.label){case 0:return n=$c(t),r=Hf(n.R)+"/documents",i={writes:e.map(function(t){return Wf(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Kc();e=el.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Uc(Fc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Uh.updateTime(e):Uh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(el.min()))throw new Uc(Fc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Uh.updateTime(e)}return Uh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Om=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Bg(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Lc.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Lc.d)(this,function(r){return t=new Sm(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!vl(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!rf(e)}return!1},t}(),Tm=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Sg.UNAUTHENTICATED,this.clientId=Jc.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return Object(Lc.b)(r,void 0,void 0,function(){return Object(Lc.d)(this,function(e){switch(e.label){case 0:return Bc("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Uc(Fc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Nd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Lc.b)(t,void 0,void 0,function(){var t,n;return Object(Lc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=_y(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Im(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Lc.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Bc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return Object(Lc.b)(i,void 0,void 0,function(){return Object(Lc.d)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Zp(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Cm(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r;return Object(Lc.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,xm(t)];case 1:return n=i.sent(),Bc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return Object(Lc.b)(this,void 0,void 0,function(){var n,r;return Object(Lc.d)(this,function(i){switch(i.label){case 0:return(n=$c(t)).asyncQueue.verifyOperationInProgress(),Bc("RemoteStore","RemoteStore received new credentials"),r=ry(n),n.Or.add(3),[4,Jg(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Qg(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function xm(t){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Bc("FirestoreClient","Using default OfflineComponentProvider"),[4,Im(t,new vm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Am(t){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Bc("FirestoreClient","Using default OnlineComponentProvider"),[4,Cm(t,new _m)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function jm(t){return xm(t).then(function(t){return t.persistence})}function km(t){return xm(t).then(function(t){return t.localStore})}function Nm(t){return Am(t).then(function(t){return t.remoteStore})}function Dm(t){return Am(t).then(function(t){return t.syncEngine})}function Rm(t){return Object(Lc.b)(this,void 0,void 0,function(){var e,n;return Object(Lc.d)(this,function(r){switch(r.label){case 0:return[4,Am(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=qy.bind(null,e.syncEngine),n.onUnlisten=Hy.bind(null,e.syncEngine),n)]}})})}function Pm(t,e,n){var r=this;void 0===n&&(n={});var i=new Nd;return t.asyncQueue.enqueueAndForget(function(){return Object(Lc.b)(r,void 0,void 0,function(){var r;return Object(Lc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Em({next:function(o){e.enqueueAndForget(function(){return xy(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Uc(Fc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Uc(Fc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Ny(ah(n.path),o,{includeMetadataChanges:!0,so:!0});return Cy(t,s)},[4,Rm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Lm(t,e,n){var r=this;void 0===n&&(n={});var i=new Nd;return t.asyncQueue.enqueueAndForget(function(){return Object(Lc.b)(r,void 0,void 0,function(){var r;return Object(Lc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Em({next:function(n){e.enqueueAndForget(function(){return xy(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Uc(Fc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Ny(n,o,{includeMetadataChanges:!0,so:!0});return Cy(t,s)},[4,Rm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Mm=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Fm=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Um=new Map,Vm=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},qm=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Sg.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Bm=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Hm=function(){function t(t){var e=this;this.currentUser=Sg.UNAUTHENTICATED,this.oc=new Nd,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Bc("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Bc("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Bc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Wc("string"==typeof n.accessToken),new Vm(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return Object(Lc.b)(n,void 0,void 0,function(){return Object(Lc.d)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Wc(null===t||"string"==typeof t),new Sg(t)},t}(),zm=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Sg.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Gm=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new zm(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Sg.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Km(t,e,n){if(!n)throw new Uc(Fc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Wm(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Uc(Fc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function $m(t,e,n,r){if(!0===e&&!0===r)throw new Uc(Fc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Qm(t){if(!_l.isDocumentKey(t))throw new Uc(Fc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Jm(t){if(_l.isDocumentKey(t))throw new Uc(Fc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Ym(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Kc()}function Xm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Uc(Fc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ym(t);throw new Uc(Fc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Zm(t,e){if(e<=0)throw new Uc(Fc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var tv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Uc(Fc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Uc(Fc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,$m("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),ev=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tv({}),this._settingsFrozen=!1,t instanceof Fm?(this._databaseId=t,this._credentials=new qm):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Uc(Fc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fm(t.options.projectId)}(t),this._credentials=new Hm(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Uc(Fc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Uc(Fc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tv(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new qm;switch(t.type){case"gapi":var e=t.client;return Wc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Gm(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Uc(Fc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Um.get(this))&&(Bc("ComponentProvider","Removing Datastore"),Um.delete(this),t.terminate()),Promise.resolve();var t},t}(),nv=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new iv(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),rv=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),iv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ah(r))||this)._path=r,i.type="collection",i}return Object(Lc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new nv(this.firestore,null,new _l(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(rv);function ov(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Io.h)(t),Km("collection","path",e),t instanceof ev)return Jm(n=sl.fromString.apply(sl,Object(Lc.f)([e],r))),new iv(t,null,n);if(!(t instanceof nv||t instanceof iv))throw new Uc(Fc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Jm(n=sl.fromString.apply(sl,Object(Lc.f)([t.path],r)).child(sl.fromString(e))),new iv(t.firestore,null,n)}function sv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Io.h)(t),1===arguments.length&&(e=Jc.u()),Km("doc","path",e),t instanceof ev)return Qm(n=sl.fromString.apply(sl,Object(Lc.f)([e],r))),new nv(t,null,new _l(n));if(!(t instanceof nv||t instanceof iv))throw new Uc(Fc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Qm(n=t._path.child(sl.fromString.apply(sl,Object(Lc.f)([e],r)))),new nv(t.firestore,t instanceof iv?t.converter:null,new _l(n))}function av(t,e){return t=Object(Io.h)(t),e=Object(Io.h)(e),(t instanceof nv||t instanceof iv)&&(e instanceof nv||e instanceof iv)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function uv(t,e){return t=Object(Io.h)(t),e=Object(Io.h)(e),t instanceof rv&&e instanceof rv&&t.firestore===e.firestore&&yh(t._query,e._query)&&t.converter===e.converter}var cv=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new Bg(this,"async_queue_retry"),this.Tc=function(){var e=Vg();e&&Bc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Vg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=Vg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise(function(t){}):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.Rc()})},t.prototype.Rc=function(){return Object(Lc.b)(this,void 0,void 0,function(){var t,e=this;return Object(Lc.d)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Fd(t=n.sent()))throw t;return Bc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.Rc()}),n.label=5;case 5:return[2]}})})},t.prototype.Ac=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,Hc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=wy.createAndSchedule(this,t,e,n,function(t){return r.bc(t)});return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&Kc()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return Object(Lc.b)(this,void 0,void 0,function(){var t;return Object(Lc.d)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()})},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function lv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Nd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var hv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new cv,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Lc.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||dv(this),this._firestoreClient.terminate()},e}(ev);function fv(t){return t._firestoreClient||dv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function dv(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Mm(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Tm(t._credentials,t._queue,r)}function pv(t,e,n){var r=this,i=new Nd;return t.asyncQueue.enqueue(function(){return Object(Lc.b)(r,void 0,void 0,function(){var r;return Object(Lc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Im(t,n)];case 1:return o.sent(),[4,Cm(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Fc.FAILED_PRECONDITION||t.code===Fc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function gv(t){if(t._initialized||t._terminated)throw new Uc(Fc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var yv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Uc(Fc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ul(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),mv=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ll.fromBase64String(e))}catch(e){throw new Uc(Fc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ll.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),vv=function(t){this._methodName=t},bv=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Uc(Fc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Uc(Fc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Yc(this._lat,t._lat)||Yc(this._long,t._long)},t}(),wv=/^__.*__$/,_v=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new $h(t,this.data,this.fieldMask,e,this.fieldTransforms):new Wh(t,this.data,e,this.fieldTransforms)},t}(),Ev=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new $h(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Sv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kc()}}var Ov=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return zv(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(Sv(this.Cc)&&wv.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),Tv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||qg(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new Ov({Cc:t,methodName:e,Bc:n,path:ul.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Iv(t){var e=t._freezeSettings(),n=qg(t._databaseId);return new Tv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);Vv("Data must be an object, but it was:",s,r);var a,u,c=Fv(r,s);if(o.merge)a=new cl(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=qv(e,f[h],n);if(!s.contains(d))throw new Uc(Fc.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Gv(l,d)||l.push(d)}a=new cl(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new _v(new Ll(c),a,u)}var xv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lc.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw t.Mc(1===t.Cc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(vv);function Av(t,e,n){return new Ov({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var jv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lc.c)(e,t),e.prototype._toFieldTransform=function(t){return new Mh(t.path,new Ah)},e.prototype.isEqual=function(t){return t instanceof e},e}(vv),kv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Lc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Av(this,t,!0),n=this.Uc.map(function(t){return Mv(t,e)}),r=new jh(n);return new Mh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(vv),Nv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Lc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Av(this,t,!0),n=this.Uc.map(function(t){return Mv(t,e)}),r=new Nh(n);return new Mh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(vv),Dv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Object(Lc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Rh(t.R,Oh(t.R,this.Qc));return new Mh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(vv);function Rv(t,e,n,r){var i=t.qc(1,e,n);Vv("Data must be an object, but it was:",i,r);var o=[],s=Ll.empty();rl(r,function(t,r){var a=Hv(e,t,n);r=Object(Io.h)(r);var u=i.$c(a);if(r instanceof xv)o.push(a);else{var c=Mv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new cl(o);return new Ev(s,a,i.fieldTransforms)}function Pv(t,e,n,r,i,o){var s=t.qc(1,e,n),a=[qv(e,r,n)],u=[i];if(o.length%2!=0)throw new Uc(Fc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(qv(e,o[c])),u.push(o[c+1]);for(var l=[],h=Ll.empty(),f=a.length-1;f>=0;--f)if(!Gv(l,a[f])){var d=a[f],p=u[f];p=Object(Io.h)(p);var g=s.$c(d);if(p instanceof xv)l.push(d);else{var y=Mv(p,g);null!=y&&(l.push(d),h.set(d,y))}}var m=new cl(l);return new Ev(h,m,s.fieldTransforms)}function Lv(t,e,n,r){return void 0===r&&(r=!1),Mv(n,t.qc(r?4:3,e))}function Mv(t,e){if(Uv(t=Object(Io.h)(t)))return Vv("Unsupported field value:",e,t),Fv(t,e);if(t instanceof vv)return function(t,e){if(!Sv(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Mv(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Io.h)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Oh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=tl.fromDate(t);return{timestampValue:Df(e.R,n)}}if(t instanceof tl)return n=new tl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Df(e.R,n)};if(t instanceof bv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof mv)return{bytesValue:Rf(e.R,t._byteString)};if(t instanceof nv){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Mf(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+Ym(t))}(t,e)}function Fv(t,e){var n={};return il(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rl(t,function(t,r){var i=Mv(r,e.xc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Uv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof tl||t instanceof bv||t instanceof mv||t instanceof nv||t instanceof vv)}function Vv(t,e,n){if(!Uv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Ym(n);throw e.Mc("an object"===r?t+" a custom object":t+" "+r)}}function qv(t,e,n){if((e=Object(Io.h)(e))instanceof yv)return e._internalPath;if("string"==typeof e)return Hv(t,e);throw zv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Bv=new RegExp("[~\\*/\\[\\]]");function Hv(t,e,n){if(e.search(Bv)>=0)throw zv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(yv.bind.apply(yv,Object(Lc.f)([void 0],e.split(".")))))._internalPath}catch(r){throw zv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function zv(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Uc(Fc.INVALID_ARGUMENT,(a+=". ")+t+u)}function Gv(t,e){return t.some(function(t){return t.isEqual(e)})}var Kv=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new nv(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Wv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field($v("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Wv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lc.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Kv);function $v(t,e){return"string"==typeof e?Hv(t,e):e instanceof yv?e._internalPath:e._delegate._internalPath}var Qv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Jv=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Lc.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Yv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field($v("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Kv),Yv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lc.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Jv),Xv=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Qv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Yv(n._firestore,n._userDataWriter,r.key,r,new Qv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Uc(Fc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Yv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Qv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Yv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Qv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Zv(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Zv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kc()}}function tb(t,e){return t instanceof Jv&&e instanceof Jv?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Xv&&e instanceof Xv&&t._firestore===e._firestore&&uv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function eb(t){if(ch(t)&&0===t.explicitOrderBy.length)throw new Uc(Fc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nb=function(){};function rb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var ib=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Kc=e,i.jc=n,i.Wc=r,i.type="where",i}return Object(Lc.c)(e,t),e.prototype._apply=function(t){var e=Iv(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Uc(Fc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){hb(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(lb(r,t,l[c]));a={arrayValue:{values:u}}}else a=lb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||hb(s,o),a=Lv(n,"where",s,"in"===o||"not-in"===o);var h=zl.create(i,o,a);return function(t,e){if(e.g()){var n=hh(t);if(null!==n&&!n.isEqual(e.field))throw new Uc(Fc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=lh(t);null!==r&&fb(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Uc(Fc.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Kc,this.jc,this.Wc);return new rv(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new oh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(nb),ob=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kc=e,r.Gc=n,r.type="orderBy",r}return Object(Lc.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Uc(Fc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Uc(Fc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new eh(e,n);return function(t,e){if(null===lh(t)){var n=hh(t);null!==n&&fb(0,n,e.field)}}(t,r),r}(t._query,this.Kc,this.Gc);return new rv(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new oh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(nb),sb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return Object(Lc.c)(e,t),e.prototype._apply=function(t){return new rv(t.firestore,t.converter,gh(t._query,this.zc,this.Hc))},e}(nb),ab=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return Object(Lc.c)(e,t),e.prototype._apply=function(t){var e=cb(t,this.type,this.Jc,this.Yc);return new rv(t.firestore,t.converter,function(t,e){return new oh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(nb),ub=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return Object(Lc.c)(e,t),e.prototype._apply=function(t){var e=cb(t,this.type,this.Jc,this.Yc);return new rv(t.firestore,t.converter,function(t,e){return new oh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(nb);function cb(t,e,n,r){if(n[0]=Object(Io.h)(n[0]),n[0]instanceof Kv)return function(t,e,n,r,i){if(!r)throw new Uc(Fc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=dh(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Al(e,r.key));else{var c=r.data.field(u.field);if(gl(c))throw new Uc(Fc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Uc(Fc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Zl(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Iv(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Uc(Fc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Uc(Fc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!fh(t)&&-1!==c.indexOf("/"))throw new Uc(Fc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(sl.fromString(c));if(!_l.isDocumentKey(l))throw new Uc(Fc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new _l(l);a.push(Al(e,h))}else{var f=Lv(n,r,c);a.push(f)}}return new Zl(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function lb(t,e,n){if("string"==typeof(n=Object(Io.h)(n))){if(""===n)throw new Uc(Fc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!fh(e)&&-1!==n.indexOf("/"))throw new Uc(Fc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(sl.fromString(n));if(!_l.isDocumentKey(r))throw new Uc(Fc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Al(t,new _l(r))}if(n instanceof nv)return Al(t,n._key);throw new Uc(Fc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ym(n)+".")}function hb(t,e){if(!Array.isArray(t)||0===t.length)throw new Uc(Fc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Uc(Fc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function fb(t,e,n){if(!n.isEqual(e))throw new Uc(Fc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var db=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),El(t)){case 0:return null;case 1:return t.booleanValue;case 2:return dl(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(pl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Kc()}},t.prototype.convertObject=function(t,e){var n=this,r={};return rl(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new bv(dl(t.latitude),dl(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=yl(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ml(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=fl(t);return new tl(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=sl.fromString(t);Wc(ud(n));var r=new Fm(n.get(1),n.get(3)),i=new _l(n.popFirst(5));return r.isEqual(e)||Hc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function pb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var gb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Lc.c)(e,t),e.prototype.convertBytes=function(t){return new mv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new nv(this.firestore,null,e)},e}(db),yb=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Iv(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=mb(t,this._firestore),i=pb(r.converter,e,n),o=Cv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Uh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=mb(t,this._firestore);return o="string"==typeof(e=Object(Io.h)(e))||e instanceof yv?Pv(this._dataReader,"WriteBatch.update",s._key,e,n,r):Rv(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Uh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=mb(t,this._firestore);return this._mutations=this._mutations.concat(new tf(e._key,Uh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Uc(Fc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function mb(t,e){if((t=Object(Io.h)(t)).firestore!==e)throw new Uc(Fc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var vb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Lc.c)(e,t),e.prototype.convertBytes=function(t){return new mv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new nv(this.firestore,null,e)},e}(db);function bb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Xm(t,nv);var o=Xm(t.firestore,hv),s=Iv(o);return _b(o,[("string"==typeof(e=Object(Io.h)(e))||e instanceof yv?Pv(s,"updateDoc",t._key,e,n,r):Rv(s,"updateDoc",t._key,e)).toMutation(t._key,Uh.exists(!0))])}function wb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(Io.h)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||lv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(lv(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof nv)c=Xm(t.firestore,hv),l=ah(t._key.path),u={next:function(e){i[a]&&i[a](Eb(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Xm(t,rv);c=Xm(d.firestore,hv),l=d._query;var p=new vb(c);u={next:function(t){i[a]&&i[a](new Xv(c,p,d,t))},error:i[a+1],complete:i[a+2]},eb(t._query)}return function(t,e,n,r){var i=this,o=new Em(r),s=new Ny(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Lc.b)(i,void 0,void 0,function(){var e;return Object(Lc.d)(this,function(n){switch(n.label){case 0:return e=Cy,[4,Rm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Lc.b)(i,void 0,void 0,function(){var e;return Object(Lc.d)(this,function(n){switch(n.label){case 0:return e=xy,[4,Rm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(fv(c),l,h,u)}function _b(t,e){return function(t,e){var n=this,r=new Nd;return t.asyncQueue.enqueueAndForget(function(){return Object(Lc.b)(n,void 0,void 0,function(){var n;return Object(Lc.d)(this,function(i){switch(i.label){case 0:return n=zy,[4,Dm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(fv(t),e)}function Eb(t,e,n){var r=n.docs.get(e._key),i=new vb(t);return new Jv(t,i,e._key,r,new Qv(n.hasPendingWrites,n.fromCache),e.converter)}var Sb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Lc.c)(e,t),e.prototype.get=function(e){var n=this,r=mb(e,this._firestore),i=new vb(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Jv(n._firestore,i,r._key,t._document,new Qv(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Iv(t)}return t.prototype.get=function(t){var e=this,n=mb(t,this._firestore),r=new gb(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Kc();var i=t[0];if(i.isFoundDocument())return new Kv(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Kv(e._firestore,r,n._key,null,n.converter);throw Kc()})},t.prototype.set=function(t,e,n){var r=mb(t,this._firestore),i=pb(r.converter,e,n),o=Cv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=mb(t,this._firestore);return o="string"==typeof(e=Object(Io.h)(e))||e instanceof yv?Pv(this._dataReader,"Transaction.update",s._key,e,n,r):Rv(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=mb(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Ob(){if("undefined"==typeof Uint8Array)throw new Uc(Fc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Tb(){if("undefined"==typeof atob)throw new Uc(Fc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ib=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Tb(),new t(mv.fromBase64String(e))},t.fromUint8Array=function(e){return Ob(),new t(mv.fromUint8Array(e))},t.prototype.toBase64=function(){return Tb(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Ob(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Cb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){gv(t=Xm(t,hv));var n=fv(t),r=t._freezeSettings(),i=new _m;return pv(n,i,new bm(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){gv(t=Xm(t,hv));var e=fv(t),n=t._freezeSettings(),r=new _m;return pv(e,r,new wm(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Uc(Fc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Nd;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Lc.b)(e,void 0,void 0,function(){var e;return Object(Lc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Lc.b)(this,void 0,void 0,function(){return Object(Lc.d)(this,function(e){switch(e.label){case 0:return Pd.yt()?[4,Pd.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Kp(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),xb=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Fm||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||zc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Xm(t,ev))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&zc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(Io.d)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Uc(Fc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Bm(new Vm(o,new Sg(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Lc.b)(e,void 0,void 0,function(){var e,n;return Object(Lc.d)(this,function(r){switch(r.label){case 0:return[4,jm(t)];case 1:return e=r.sent(),[4,Nm(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=$c(t);return e.Or.delete(0),Qg(e)}(n))]}})})})}(fv(Xm(this._delegate,hv)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Lc.b)(e,void 0,void 0,function(){var e,n;return Object(Lc.d)(this,function(r){switch(r.label){case 0:return[4,jm(t)];case 1:return e=r.sent(),[4,Nm(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Lc.b)(this,void 0,void 0,function(){var e;return Object(Lc.d)(this,function(n){switch(n.label){case 0:return(e=$c(t)).Or.add(0),[4,Jg(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(fv(Xm(this._delegate,hv)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&$m("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Nd;return t.asyncQueue.enqueueAndForget(function(){return Object(Lc.b)(e,void 0,void 0,function(){var e;return Object(Lc.d)(this,function(r){switch(r.label){case 0:return e=Jy,[4,Dm(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(fv(Xm(this._delegate,hv)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Em(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Lc.b)(n,void 0,void 0,function(){var e;return Object(Lc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){$c(t).Gr.add(e),e.next()},[4,Rm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Lc.b)(n,void 0,void 0,function(){var e;return Object(Lc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){$c(t).Gr.delete(e)},[4,Rm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(fv(t=Xm(t,hv)),lv(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new Uc(Fc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Bb(this,ov(this._delegate,t))}catch(t){throw Rb(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Db(this,sv(this._delegate,t))}catch(t){throw Rb(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Ub(this,function(t,e){if(t=Xm(t,ev),Km("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Uc(Fc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new rv(t,null,function(t){return new oh(sl.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Rb(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Nd;return t.asyncQueue.enqueueAndForget(function(){return Object(Lc.b)(n,void 0,void 0,function(){var n;return Object(Lc.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Am(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Om(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(fv(t),function(n){return e(new Sb(t,n))})}(this._delegate,function(n){return t(new jb(e,n))})},t.prototype.batch=function(){var t=this;return fv(this._delegate),new kb(new yb(this._delegate,function(e){return _b(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Uc(Fc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Uc(Fc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Ab=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Lc.c)(e,t),e.prototype.convertBytes=function(t){return new Ib(new mv(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Db.tu(e,this.firestore,null)},e}(db),jb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Ab(t)}return t.prototype.get=function(t){var e=this,n=Hb(t);return this._delegate.get(n).then(function(t){return new Mb(e._firestore,new Jv(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Hb(t);return n?(Wm("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Hb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Lc.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Hb(t);return this._delegate.delete(e),this},t}(),kb=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Hb(t);return n?(Wm("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Hb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Lc.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Hb(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Nb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Yv(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Fb(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Ab(e),n),i.set(n,o)),o},t}();Nb.nu=new WeakMap;var Db=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Ab(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new Uc(Fc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new nv(n._delegate,r,new _l(e)))},t.tu=function(e,n,r){return new t(n,new nv(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Bb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Bb(this.firestore,ov(this._delegate,t))}catch(t){throw Rb(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Io.h)(t))instanceof nv&&av(this._delegate,t)},t.prototype.set=function(t,e){e=Wm("DocumentReference.set",e);try{return function(t,e,n){t=Xm(t,nv);var r=Xm(t.firestore,hv),i=pb(t.converter,e,n);return _b(r,[Cv(Iv(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Uh.none())])}(this._delegate,t,e)}catch(t){throw Rb(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?bb(this._delegate,t):bb.apply(void 0,Object(Lc.f)([this._delegate,t,e],n))}catch(t){throw Rb(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return _b(Xm((t=this._delegate).firestore,hv),[new tf(t._key,Uh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Pb(e),i=Lb(e,function(e){return new Mb(t.firestore,new Jv(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return wb(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Xm(t,nv);var e=Xm(t.firestore,hv),n=fv(e),r=new vb(e);return function(t,e){var n=this,r=new Nd;return t.asyncQueue.enqueueAndForget(function(){return Object(Lc.b)(n,void 0,void 0,function(){var n;return Object(Lc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Lc.b)(this,void 0,void 0,function(){var r,i;return Object(Lc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=$c(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Uc(Fc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=_y(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,km(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Jv(e,r,t._key,n,new Qv(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Xm(t,nv);var e=Xm(t.firestore,hv);return Pm(fv(e),t._key,{source:"server"}).then(function(n){return Eb(e,t,n)})}(this._delegate):function(t){t=Xm(t,nv);var e=Xm(t.firestore,hv);return Pm(fv(e),t._key).then(function(n){return Eb(e,t,n)})}(this._delegate)).then(function(t){return new Mb(e.firestore,new Jv(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Nb.eu(this.firestore,e):null))},t}();function Rb(t,e,n){return t.message=t.message.replace(e,n),t}function Pb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!lv(r))return r}return{}}function Lb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=lv(t[0])?t[0]:lv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Mb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Db(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return tb(this._delegate,t._delegate)},t}(),Fb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Lc.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Mb),Ub=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Ab(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,rb(this._delegate,function(t,e,n){var r=e,i=$v("where",t);return new ib(i,r,n)}(e,n,r)))}catch(e){throw Rb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,rb(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=$v("orderBy",t);return new ob(r,n)}(e,n)))}catch(e){throw Rb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,rb(this._delegate,function(t){return Zm("limit",t),new sb("limit",t,"F")}(e)))}catch(e){throw Rb(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,rb(this._delegate,function(t){return Zm("limitToLast",t),new sb("limitToLast",t,"L")}(e)))}catch(e){throw Rb(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,rb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ab("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Rb(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,rb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ab("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Rb(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,rb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ub("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Rb(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,rb(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ub("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Rb(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return uv(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Xm(t,rv);var e=Xm(t.firestore,hv),n=fv(e),r=new vb(e);return function(t,e){var n=this,r=new Nd;return t.asyncQueue.enqueueAndForget(function(){return Object(Lc.b)(n,void 0,void 0,function(){var n;return Object(Lc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Lc.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Lc.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,ag(t,e,!0)];case 1:return a=u.sent(),r=new My(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=_y(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,km(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Xv(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Xm(t,rv);var e=Xm(t.firestore,hv),n=fv(e),r=new vb(e);return Lm(n,t._query,{source:"server"}).then(function(n){return new Xv(e,r,t,n)})}(this._delegate):function(t){t=Xm(t,rv);var e=Xm(t.firestore,hv),n=fv(e),r=new vb(e);return eb(t._query),Lm(n,t._query).then(function(n){return new Xv(e,r,t,n)})}(this._delegate)).then(function(t){return new qb(e.firestore,new Xv(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Pb(e),i=Lb(e,function(e){return new qb(t.firestore,new Xv(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return wb(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Nb.eu(this.firestore,e):null))},t}(),Vb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Fb(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),qb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Ub(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Fb(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Vb(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Fb(n._firestore,r))})},t.prototype.isEqual=function(t){return tb(this._delegate,t._delegate)},t}(),Bb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Lc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Db(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Db(this.firestore,void 0===t?sv(this._delegate):sv(this._delegate,t))}catch(t){throw Rb(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Xm(t.firestore,hv),r=sv(t),i=pb(t.converter,e);return _b(n,[Cv(Iv(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Uh.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Db(e.firestore,t)})},e.prototype.isEqual=function(t){return av(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Nb.eu(this.firestore,t):null))},e}(Ub);function Hb(t){return Xm(t,nv)}var zb,Gb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(yv.bind.apply(yv,Object(Lc.f)([void 0],t)))}return t.documentId=function(){return new t(ul.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Io.h)(t))instanceof yv&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Kb=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new jv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new xv("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kv("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Nv("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Dv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Wb=n("/6Yf"),$b={Firestore:xb,GeoPoint:bv,Timestamp:tl,Blob:Ib,Transaction:jb,WriteBatch:kb,DocumentReference:Db,DocumentSnapshot:Mb,Query:Ub,QueryDocumentSnapshot:Fb,QuerySnapshot:qb,CollectionReference:Bb,FieldPath:Gb,FieldValue:Kb,setLogLevel:function(t){Vc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Wb.a("firestore",function(t){return function(t,e){return new xb(t,new hv(t,e),new Cb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},$b)))})(zb=To.a),zb.registerVersion("@firebase/firestore","2.3.7");var Qb=n("qgXg"),Jb=n("Ylt2");class Yb extends dt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Xb(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new pt.a;if(this.isStopped||this.hasError?o=ge.a.EMPTY:(this.observers.push(t),o=new Jb.a(this,t)),r&&t.add(t=new So.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Qb.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Xb{constructor(t,e){this.time=t,this.value=e}}function Zb(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Yb(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function tw(t,e){return e?Lt(()=>t,e):Lt(()=>t)}var ew=n("tf+s");const nw=new r.r("angularfire2.auth.use-emulator"),rw=new r.r("angularfire2.auth.settings"),iw=new r.r("angularfire2.auth.tenant-id"),ow=new r.r("angularfire2.auth.langugage-code"),sw=new r.r("angularfire2.auth.use-device-language"),aw=new r.r("angularfire.auth.persistence");let uw=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new mo.d(i),f=Object(mo.h)(h),d=new dt.a,p=Object(ft.a)(void 0).pipe(Object(So.b)(h.outsideAngular),Lt(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(Rt.a)(()=>Object(mo.g)(t,i,e)),Object(Rt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(mo.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Zb({bufferSize:1,refCount:!1}));if(k(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(ft.a)(null);else{p.pipe(fe()).subscribe();const t=p.pipe(Lt(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Zb({bufferSize:1,refCount:!1})),e=t=>new Et.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Lt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Lt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(tw(n),Object(ew.a)(h.outsideAngular),Object(So.b)(h.insideAngular)),this.user=t.pipe(tw(r),Object(ew.a)(h.outsideAngular),Object(So.b)(h.insideAngular)),this.idToken=this.user.pipe(Lt(t=>t?Object(ht.a)(t.getIdToken()):Object(ft.a)(null))),this.idTokenResult=this.user.pipe(Lt(t=>t?Object(ht.a)(t.getIdTokenResult()):Object(ft.a)(null))),this.credential=Object(bi.a)(t,d,this.authState.pipe(Wt(t=>!t))).pipe(Object(Rt.a)(t=>(null==t?void 0:t.user)?t:null),Object(ew.a)(h.outsideAngular),Object(So.b)(h.insideAngular))}return Object(mo.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275prov=r.Cb({factory:function(){return new t(r.Jb(mo.c),r.Jb(mo.b,8),r.Jb(r.C),r.Jb(r.A),r.Jb(nw,8),r.Jb(rw,8),r.Jb(iw,8),r.Jb(ow,8),r.Jb(sw,8),r.Jb(aw,8))},token:t,providedIn:"any"}),t})();function cw(t,e){return function(t,e=_i.b){return new Et.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function lw(t,e){return cw(t,e).pipe(Object(Rt.a)(t=>({payload:t,type:"query"})))}function hw(t,e){return lw(t,e).pipe(Ht(void 0),vo(),Object(Rt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function fw(t,e,n){return hw(t,n).pipe(zt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return dw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return dw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new _o(void 0,void 0)),Object(Rt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function dw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function pw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(mo.e)(uw,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class gw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=hw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Rt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Ht(void 0),vo(),Wt(([t,e])=>e.length>0||!t),Object(Rt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(zt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=pw(t);return fw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return lw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Rt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ht.a)(this.query.get(t)).pipe(Object(So.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new yw(this.ref.doc(t),this.afs)}}class yw{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Ew(n,e);return new gw(r,i,this.afs)}snapshotChanges(){return cw(this.ref,this.afs.schedulers.outsideAngular).pipe(Ht(void 0),vo(),Object(Rt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Rt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(ht.a)(this.ref.get(t)).pipe(Object(So.b)(this.afs.schedulers.insideAngular))}}class mw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?hw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Rt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Wt(t=>t.length>0),this.afs.keepUnstableUntilFirst):hw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(zt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=pw(t);return fw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return lw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Rt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ht.a)(this.query.get(t)).pipe(Object(So.b)(this.afs.schedulers.insideAngular))}}const vw=new r.r("angularfire2.enableFirestorePersistence"),bw=new r.r("angularfire2.firestore.persistenceSettings"),ww=new r.r("angularfire2.firestore.settings"),_w=new r.r("angularfire2.firestore.use-emulator");function Ew(t,e=(t=>t)){return{query:e(t),ref:t}}let Sw=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new mo.d(o),this.keepUnstableUntilFirst=Object(mo.h)(this.schedulers);const c=Object(mo.g)(t,o,e);!Oo.a.auth&&u&&Object(mo.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(mo.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!k(i)){const e=()=>{try{return Object(ht.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(zb){return"undefined"!=typeof console&&console.warn(zb),Object(ft.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(ft.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Ew(n,e),o=this.schedulers.ngZone.run(()=>r);return new gw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new mw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new yw(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(mo.c),r.Jb(mo.b,8),r.Jb(vw,8),r.Jb(ww,8),r.Jb(r.C),r.Jb(r.A),r.Jb(bw,8),r.Jb(_w,8),r.Jb(nw,8))},t.\u0275prov=r.Cb({factory:function(){return new t(r.Jb(mo.c),r.Jb(mo.b,8),r.Jb(vw,8),r.Jb(ww,8),r.Jb(r.C),r.Jb(r.A),r.Jb(bw,8),r.Jb(_w,8),r.Jb(nw,8))},token:t,providedIn:"any"}),t})(),Ow=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:vw,useValue:!0},{provide:bw,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({providers:[Sw]}),t})(),Tw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Eb({type:t,bootstrap:[fi]}),t.\u0275inj=r.Db({providers:[],imports:[[lt,yo,mo.a.initializeApp(Mi),Ow,hi,Li.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"})]]}),t})();Object(r.T)(),ut().bootstrapModule(Tw).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);